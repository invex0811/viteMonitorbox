var AF=Object.defineProperty,RF=Object.defineProperties;var NF=Object.getOwnPropertyDescriptors;var mh=Object.getOwnPropertySymbols;var EE=Object.prototype.hasOwnProperty,TE=Object.prototype.propertyIsEnumerable;var IE=(t,e,n)=>e in t?AF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E=(t,e)=>{for(var n in e||(e={}))EE.call(e,n)&&IE(t,n,e[n]);if(mh)for(var n of mh(e))TE.call(e,n)&&IE(t,n,e[n]);return t},Ee=(t,e)=>RF(t,NF(e));var Ti=(t,e)=>{var n={};for(var r in t)EE.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&mh)for(var r of mh(t))e.indexOf(r)<0&&TE.call(t,r)&&(n[r]=t[r]);return n};const xF=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};xF();function T_(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const PF="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",OF=T_(PF);function $k(t){return!!t||t===""}function S_(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=St(r)?LF(r):S_(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(St(t))return t;if(vt(t))return t}}const DF=/;(?![^(]*\))/g,MF=/:(.+)/;function LF(t){const e={};return t.split(DF).forEach(n=>{if(n){const r=n.split(MF);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ap(t){let e="";if(St(t))e=t;else if(ce(t))for(let n=0;n<t.length;n++){const r=Ap(t[n]);r&&(e+=r+" ")}else if(vt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function FF(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Uo(t[r],e[r]);return n}function Uo(t,e){if(t===e)return!0;let n=SE(t),r=SE(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=bu(t),r=bu(e),n||r)return t===e;if(n=ce(t),r=ce(e),n||r)return n&&r?FF(t,e):!1;if(n=vt(t),r=vt(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Uo(t[o],e[o]))return!1}}return String(t)===String(e)}function C_(t,e){return t.findIndex(n=>Uo(n,e))}const k_=t=>St(t)?t:t==null?"":ce(t)||vt(t)&&(t.toString===Bk||!ye(t.toString))?JSON.stringify(t,Vk,2):String(t),Vk=(t,e)=>e&&e.__v_isRef?Vk(t,e.value):dl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:Jl(e)?{[`Set(${e.size})`]:[...e.values()]}:vt(e)&&!ce(e)&&!jk(e)?String(e):e,Xe={},ul=[],Fr=()=>{},$F=()=>!1,VF=/^on[^a-z]/,Rp=t=>VF.test(t),A_=t=>t.startsWith("onUpdate:"),Qt=Object.assign,R_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},UF=Object.prototype.hasOwnProperty,Le=(t,e)=>UF.call(t,e),ce=Array.isArray,dl=t=>Sd(t)==="[object Map]",Jl=t=>Sd(t)==="[object Set]",SE=t=>Sd(t)==="[object Date]",ye=t=>typeof t=="function",St=t=>typeof t=="string",bu=t=>typeof t=="symbol",vt=t=>t!==null&&typeof t=="object",Uk=t=>vt(t)&&ye(t.then)&&ye(t.catch),Bk=Object.prototype.toString,Sd=t=>Bk.call(t),BF=t=>Sd(t).slice(8,-1),jk=t=>Sd(t)==="[object Object]",N_=t=>St(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Yh=T_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Np=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},jF=/-(\w)/g,Er=Np(t=>t.replace(jF,(e,n)=>n?n.toUpperCase():"")),qF=/\B([A-Z])/g,Zl=Np(t=>t.replace(qF,"-$1").toLowerCase()),Gs=Np(t=>t.charAt(0).toUpperCase()+t.slice(1)),Qh=Np(t=>t?`on${Gs(t)}`:""),Iu=(t,e)=>!Object.is(t,e),Xh=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},ff=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Eu=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let CE;const WF=()=>CE||(CE=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let hr;class qk{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&hr&&(this.parent=hr,this.index=(hr.scopes||(hr.scopes=[])).push(this)-1)}run(e){if(this.active){const n=hr;try{return hr=this,e()}finally{hr=n}}}on(){hr=this}off(){hr=this.parent}stop(e){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function Cd(t){return new qk(t)}function HF(t,e=hr){e&&e.active&&e.effects.push(t)}function ha(t){hr&&hr.cleanups.push(t)}const x_=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Wk=t=>(t.w&Rs)>0,Hk=t=>(t.n&Rs)>0,KF=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Rs},GF=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];Wk(i)&&!Hk(i)?i.delete(t):e[n++]=i,i.w&=~Rs,i.n&=~Rs}e.length=n}},Av=new WeakMap;let Wc=0,Rs=1;const Rv=30;let Or;const Po=Symbol(""),Nv=Symbol("");class P_{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,HF(this,r)}run(){if(!this.active)return this.fn();let e=Or,n=Is;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Or,Or=this,Is=!0,Rs=1<<++Wc,Wc<=Rv?KF(this):kE(this),this.fn()}finally{Wc<=Rv&&GF(this),Rs=1<<--Wc,Or=this.parent,Is=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Or===this?this.deferStop=!0:this.active&&(kE(this),this.onStop&&this.onStop(),this.active=!1)}}function kE(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Is=!0;const Kk=[];function fa(){Kk.push(Is),Is=!1}function pa(){const t=Kk.pop();Is=t===void 0?!0:t}function ar(t,e,n){if(Is&&Or){let r=Av.get(t);r||Av.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=x_()),Gk(i)}}function Gk(t,e){let n=!1;Wc<=Rv?Hk(t)||(t.n|=Rs,n=!Wk(t)):n=!t.has(Or),n&&(t.add(Or),Or.deps.push(t))}function qi(t,e,n,r,i,s){const o=Av.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ce(t))o.forEach((l,c)=>{(c==="length"||c>=r)&&a.push(l)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ce(t)?N_(n)&&a.push(o.get("length")):(a.push(o.get(Po)),dl(t)&&a.push(o.get(Nv)));break;case"delete":ce(t)||(a.push(o.get(Po)),dl(t)&&a.push(o.get(Nv)));break;case"set":dl(t)&&a.push(o.get(Po));break}if(a.length===1)a[0]&&xv(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);xv(x_(l))}}function xv(t,e){const n=ce(t)?t:[...t];for(const r of n)r.computed&&AE(r);for(const r of n)r.computed||AE(r)}function AE(t,e){(t!==Or||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const zF=T_("__proto__,__v_isRef,__isVue"),zk=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(bu)),YF=O_(),QF=O_(!1,!0),XF=O_(!0),RE=JF();function JF(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Pe(this);for(let s=0,o=this.length;s<o;s++)ar(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(Pe)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){fa();const r=Pe(this)[e].apply(this,n);return pa(),r}}),t}function O_(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?p$:Zk:e?Jk:Xk).get(r))return r;const o=ce(r);if(!t&&o&&Le(RE,i))return Reflect.get(RE,i,s);const a=Reflect.get(r,i,s);return(bu(i)?zk.has(i):zF(i))||(t||ar(r,"get",i),e)?a:pt(a)?o&&N_(i)?a:a.value:vt(a)?t?Pp(a):bn(a):a}}const ZF=Yk(),e$=Yk(!0);function Yk(t=!1){return function(n,r,i,s){let o=n[r];if(Tu(o)&&pt(o)&&!pt(i))return!1;if(!t&&!Tu(i)&&(Pv(i)||(i=Pe(i),o=Pe(o)),!ce(n)&&pt(o)&&!pt(i)))return o.value=i,!0;const a=ce(n)&&N_(r)?Number(r)<n.length:Le(n,r),l=Reflect.set(n,r,i,s);return n===Pe(s)&&(a?Iu(i,o)&&qi(n,"set",r,i):qi(n,"add",r,i)),l}}function t$(t,e){const n=Le(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&qi(t,"delete",e,void 0),r}function n$(t,e){const n=Reflect.has(t,e);return(!bu(e)||!zk.has(e))&&ar(t,"has",e),n}function r$(t){return ar(t,"iterate",ce(t)?"length":Po),Reflect.ownKeys(t)}const Qk={get:YF,set:ZF,deleteProperty:t$,has:n$,ownKeys:r$},i$={get:XF,set(t,e){return!0},deleteProperty(t,e){return!0}},s$=Qt({},Qk,{get:QF,set:e$}),D_=t=>t,xp=t=>Reflect.getPrototypeOf(t);function vh(t,e,n=!1,r=!1){t=t.__v_raw;const i=Pe(t),s=Pe(e);n||(e!==s&&ar(i,"get",e),ar(i,"get",s));const{has:o}=xp(i),a=r?D_:n?F_:Su;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function yh(t,e=!1){const n=this.__v_raw,r=Pe(n),i=Pe(t);return e||(t!==i&&ar(r,"has",t),ar(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function _h(t,e=!1){return t=t.__v_raw,!e&&ar(Pe(t),"iterate",Po),Reflect.get(t,"size",t)}function NE(t){t=Pe(t);const e=Pe(this);return xp(e).has.call(e,t)||(e.add(t),qi(e,"add",t,t)),this}function xE(t,e){e=Pe(e);const n=Pe(this),{has:r,get:i}=xp(n);let s=r.call(n,t);s||(t=Pe(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Iu(e,o)&&qi(n,"set",t,e):qi(n,"add",t,e),this}function PE(t){const e=Pe(this),{has:n,get:r}=xp(e);let i=n.call(e,t);i||(t=Pe(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&qi(e,"delete",t,void 0),s}function OE(){const t=Pe(this),e=t.size!==0,n=t.clear();return e&&qi(t,"clear",void 0,void 0),n}function wh(t,e){return function(r,i){const s=this,o=s.__v_raw,a=Pe(o),l=e?D_:t?F_:Su;return!t&&ar(a,"iterate",Po),o.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function bh(t,e,n){return function(...r){const i=this.__v_raw,s=Pe(i),o=dl(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),u=n?D_:e?F_:Su;return!e&&ar(s,"iterate",l?Nv:Po),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function ss(t){return function(...e){return t==="delete"?!1:this}}function o$(){const t={get(s){return vh(this,s)},get size(){return _h(this)},has:yh,add:NE,set:xE,delete:PE,clear:OE,forEach:wh(!1,!1)},e={get(s){return vh(this,s,!1,!0)},get size(){return _h(this)},has:yh,add:NE,set:xE,delete:PE,clear:OE,forEach:wh(!1,!0)},n={get(s){return vh(this,s,!0)},get size(){return _h(this,!0)},has(s){return yh.call(this,s,!0)},add:ss("add"),set:ss("set"),delete:ss("delete"),clear:ss("clear"),forEach:wh(!0,!1)},r={get(s){return vh(this,s,!0,!0)},get size(){return _h(this,!0)},has(s){return yh.call(this,s,!0)},add:ss("add"),set:ss("set"),delete:ss("delete"),clear:ss("clear"),forEach:wh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=bh(s,!1,!1),n[s]=bh(s,!0,!1),e[s]=bh(s,!1,!0),r[s]=bh(s,!0,!0)}),[t,n,e,r]}const[a$,l$,c$,u$]=o$();function M_(t,e){const n=e?t?u$:c$:t?l$:a$;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Le(n,i)&&i in r?n:r,i,s)}const d$={get:M_(!1,!1)},h$={get:M_(!1,!0)},f$={get:M_(!0,!1)},Xk=new WeakMap,Jk=new WeakMap,Zk=new WeakMap,p$=new WeakMap;function g$(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function m$(t){return t.__v_skip||!Object.isExtensible(t)?0:g$(BF(t))}function bn(t){return Tu(t)?t:L_(t,!1,Qk,d$,Xk)}function eA(t){return L_(t,!1,s$,h$,Jk)}function Pp(t){return L_(t,!0,i$,f$,Zk)}function L_(t,e,n,r,i){if(!vt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=m$(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function hl(t){return Tu(t)?hl(t.__v_raw):!!(t&&t.__v_isReactive)}function Tu(t){return!!(t&&t.__v_isReadonly)}function Pv(t){return!!(t&&t.__v_isShallow)}function tA(t){return hl(t)||Tu(t)}function Pe(t){const e=t&&t.__v_raw;return e?Pe(e):t}function nA(t){return ff(t,"__v_skip",!0),t}const Su=t=>vt(t)?bn(t):t,F_=t=>vt(t)?Pp(t):t;function rA(t){Is&&Or&&(t=Pe(t),Gk(t.dep||(t.dep=x_())))}function iA(t,e){t=Pe(t),t.dep&&xv(t.dep)}function pt(t){return!!(t&&t.__v_isRef===!0)}function X(t){return oA(t,!1)}function sA(t){return oA(t,!0)}function oA(t,e){return pt(t)?t:new v$(t,e)}class v${constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Pe(e),this._value=n?e:Su(e)}get value(){return rA(this),this._value}set value(e){e=this.__v_isShallow?e:Pe(e),Iu(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:Su(e),iA(this))}}function oi(t){return pt(t)?t.value:t}const y$={get:(t,e,n)=>oi(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return pt(i)&&!pt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function aA(t){return hl(t)?t:new Proxy(t,y$)}function lA(t){const e=ce(t)?new Array(t.length):{};for(const n in t)e[n]=Se(t,n);return e}class _${constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function Se(t,e,n){const r=t[e];return pt(r)?r:new _$(t,e,n)}class w${constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new P_(e,()=>{this._dirty||(this._dirty=!0,iA(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=Pe(this);return rA(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function b$(t,e,n=!1){let r,i;const s=ye(t);return s?(r=t,i=Fr):(r=t.get,i=t.set),new w$(r,i,s||!i,n)}const Qc=[];function I$(t,...e){fa();const n=Qc.length?Qc[Qc.length-1].component:null,r=n&&n.appContext.config.warnHandler,i=E$();if(r)Li(r,n,11,[t+e.join(""),n&&n.proxy,i.map(({vnode:s})=>`at <${UA(n,s.type)}>`).join(`
`),i]);else{const s=[`[Vue warn]: ${t}`,...e];i.length&&s.push(`
`,...T$(i)),console.warn(...s)}pa()}function E$(){let t=Qc[Qc.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const r=t.component&&t.component.parent;t=r&&r.vnode}return e}function T$(t){const e=[];return t.forEach((n,r)=>{e.push(...r===0?[]:[`
`],...S$(n))}),e}function S$({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",r=t.component?t.component.parent==null:!1,i=` at <${UA(t.component,t.type,r)}`,s=">"+n;return t.props?[i,...C$(t.props),s]:[i+s]}function C$(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(r=>{e.push(...cA(r,t[r]))}),n.length>3&&e.push(" ..."),e}function cA(t,e,n){return St(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:pt(e)?(e=cA(t,Pe(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):ye(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=Pe(e),n?e:[`${t}=`,e])}function Li(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){Op(s,e,n)}return i}function wr(t,e,n,r){if(ye(t)){const s=Li(t,e,n,r);return s&&Uk(s)&&s.catch(o=>{Op(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(wr(t[s],e,n,r));return i}function Op(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Li(l,null,10,[t,o,a]);return}}k$(t,n,i,r)}function k$(t,e,n,r=!0){console.error(t)}let pf=!1,Ov=!1;const tr=[];let Ai=0;const Xc=[];let Hc=null,el=0;const Jc=[];let hs=null,tl=0;const uA=Promise.resolve();let $_=null,Dv=null;function Ar(t){const e=$_||uA;return t?e.then(this?t.bind(this):t):e}function A$(t){let e=Ai+1,n=tr.length;for(;e<n;){const r=e+n>>>1;Cu(tr[r])<t?e=r+1:n=r}return e}function dA(t){(!tr.length||!tr.includes(t,pf&&t.allowRecurse?Ai+1:Ai))&&t!==Dv&&(t.id==null?tr.push(t):tr.splice(A$(t.id),0,t),hA())}function hA(){!pf&&!Ov&&(Ov=!0,$_=uA.then(gA))}function R$(t){const e=tr.indexOf(t);e>Ai&&tr.splice(e,1)}function fA(t,e,n,r){ce(t)?n.push(...t):(!e||!e.includes(t,t.allowRecurse?r+1:r))&&n.push(t),hA()}function N$(t){fA(t,Hc,Xc,el)}function x$(t){fA(t,hs,Jc,tl)}function Dp(t,e=null){if(Xc.length){for(Dv=e,Hc=[...new Set(Xc)],Xc.length=0,el=0;el<Hc.length;el++)Hc[el]();Hc=null,el=0,Dv=null,Dp(t,e)}}function pA(t){if(Dp(),Jc.length){const e=[...new Set(Jc)];if(Jc.length=0,hs){hs.push(...e);return}for(hs=e,hs.sort((n,r)=>Cu(n)-Cu(r)),tl=0;tl<hs.length;tl++)hs[tl]();hs=null,tl=0}}const Cu=t=>t.id==null?1/0:t.id;function gA(t){Ov=!1,pf=!0,Dp(t),tr.sort((n,r)=>Cu(n)-Cu(r));const e=Fr;try{for(Ai=0;Ai<tr.length;Ai++){const n=tr[Ai];n&&n.active!==!1&&Li(n,null,14)}}finally{Ai=0,tr.length=0,pA(),pf=!1,$_=null,(tr.length||Xc.length||Jc.length)&&gA(t)}}function P$(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Xe;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:h}=r[u]||Xe;h&&(i=n.map(f=>f.trim())),d&&(i=n.map(Eu))}let a,l=r[a=Qh(e)]||r[a=Qh(Er(e))];!l&&s&&(l=r[a=Qh(Zl(e))]),l&&wr(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,wr(c,t,6,i)}}function mA(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!ye(t)){const l=c=>{const u=mA(c,e,!0);u&&(a=!0,Qt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(r.set(t,null),null):(ce(s)?s.forEach(l=>o[l]=null):Qt(o,s),r.set(t,o),o)}function Mp(t,e){return!t||!Rp(e)?!1:(e=e.slice(2).replace(/Once$/,""),Le(t,e[0].toLowerCase()+e.slice(1))||Le(t,Zl(e))||Le(t,e))}let pr=null,Lp=null;function gf(t){const e=pr;return pr=t,Lp=t&&t.type.__scopeId||null,e}function woe(t){Lp=t}function boe(){Lp=null}function Oe(t,e=pr,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&KE(-1);const s=gf(e),o=t(...i);return gf(s),r._d&&KE(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function ym(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:f,ctx:p,inheritAttrs:g}=t;let m,v;const b=gf(t);try{if(n.shapeFlag&4){const C=i||r;m=Xr(u.call(C,C,d,s,f,h,p)),v=l}else{const C=e;m=Xr(C.length>1?C(s,{attrs:l,slots:a,emit:c}):C(s,null)),v=e.props?l:O$(l)}}catch(C){eu.length=0,Op(C,t,1),m=y($r)}let T=m;if(v&&g!==!1){const C=Object.keys(v),{shapeFlag:S}=T;C.length&&S&7&&(o&&C.some(A_)&&(v=D$(v,o)),T=Ns(T,v))}return n.dirs&&(T=Ns(T),T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&(T.transition=n.transition),m=T,gf(b),m}const O$=t=>{let e;for(const n in t)(n==="class"||n==="style"||Rp(n))&&((e||(e={}))[n]=t[n]);return e},D$=(t,e)=>{const n={};for(const r in t)(!A_(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function M$(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?DE(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==r[h]&&!Mp(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?DE(r,o,c):!0:!!o;return!1}function DE(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Mp(n,s))return!0}return!1}function L$({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const F$=t=>t.__isSuspense;function $$(t,e){e&&e.pendingBranch?ce(t)?e.effects.push(...t):e.effects.push(t):x$(t)}function Kt(t,e){if(Wt){let n=Wt.provides;const r=Wt.parent&&Wt.parent.provides;r===n&&(n=Wt.provides=Object.create(r)),n[t]=e}}function Ke(t,e,n=!1){const r=Wt||pr;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&ye(e)?e.call(r.proxy):e}}function zs(t,e){return V_(t,null,e)}const ME={};function $e(t,e,n){return V_(t,e,n)}function V_(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=Xe){const a=Wt;let l,c=!1,u=!1;if(pt(t)?(l=()=>t.value,c=Pv(t)):hl(t)?(l=()=>t,r=!0):ce(t)?(u=!0,c=t.some(v=>hl(v)||Pv(v)),l=()=>t.map(v=>{if(pt(v))return v.value;if(hl(v))return Eo(v);if(ye(v))return Li(v,a,2)})):ye(t)?e?l=()=>Li(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),wr(t,a,3,[h])}:l=Fr,e&&r){const v=l;l=()=>Eo(v())}let d,h=v=>{d=m.onStop=()=>{Li(v,a,4)}};if(Nu)return h=Fr,e?n&&wr(e,a,3,[l(),u?[]:void 0,h]):l(),Fr;let f=u?[]:ME;const p=()=>{if(!!m.active)if(e){const v=m.run();(r||c||(u?v.some((b,T)=>Iu(b,f[T])):Iu(v,f)))&&(d&&d(),wr(e,a,3,[v,f===ME?void 0:f,h]),f=v)}else m.run()};p.allowRecurse=!!e;let g;i==="sync"?g=p:i==="post"?g=()=>Bn(p,a&&a.suspense):g=()=>N$(p);const m=new P_(l,g);return e?n?p():f=m.run():i==="post"?Bn(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&R_(a.scope.effects,m)}}function V$(t,e,n){const r=this.proxy,i=St(t)?t.includes(".")?vA(r,t):()=>r[t]:t.bind(r,r);let s;ye(e)?s=e:(s=e.handler,n=e);const o=Wt;Cl(this);const a=V_(i,s.bind(r),n);return o?Cl(o):Oo(),a}function vA(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Eo(t,e){if(!vt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),pt(t))Eo(t.value,e);else if(ce(t))for(let n=0;n<t.length;n++)Eo(t[n],e);else if(Jl(t)||dl(t))t.forEach(n=>{Eo(n,e)});else if(jk(t))for(const n in t)Eo(t[n],e);return t}function yA(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ga(()=>{t.isMounted=!0}),Wr(()=>{t.isUnmounting=!0}),t}const dr=[Function,Array],U$={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:dr,onEnter:dr,onAfterEnter:dr,onEnterCancelled:dr,onBeforeLeave:dr,onLeave:dr,onAfterLeave:dr,onLeaveCancelled:dr,onBeforeAppear:dr,onAppear:dr,onAfterAppear:dr,onAppearCancelled:dr},setup(t,{slots:e}){const n=jp(),r=yA();let i;return()=>{const s=e.default&&U_(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const g of s)if(g.type!==$r){o=g;break}}const a=Pe(t),{mode:l}=a;if(r.isLeaving)return _m(o);const c=LE(o);if(!c)return _m(o);const u=ku(c,a,r,n);Au(c,u);const d=n.subTree,h=d&&LE(d);let f=!1;const{getTransitionKey:p}=c.type;if(p){const g=p();i===void 0?i=g:g!==i&&(i=g,f=!0)}if(h&&h.type!==$r&&(!vo(c,h)||f)){const g=ku(h,a,r,n);if(Au(h,g),l==="out-in")return r.isLeaving=!0,g.afterLeave=()=>{r.isLeaving=!1,n.update()},_m(o);l==="in-out"&&c.type!==$r&&(g.delayLeave=(m,v,b)=>{const T=wA(r,h);T[String(h.key)]=h,m._leaveCb=()=>{v(),m._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=b})}return o}}},_A=U$;function wA(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function ku(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:g,onAppear:m,onAfterAppear:v,onAppearCancelled:b}=e,T=String(t.key),C=wA(n,t),S=(P,O)=>{P&&wr(P,r,9,O)},A=(P,O)=>{const W=O[1];S(P,O),ce(P)?P.every(G=>G.length<=1)&&W():P.length<=1&&W()},k={mode:s,persisted:o,beforeEnter(P){let O=a;if(!n.isMounted)if(i)O=g||a;else return;P._leaveCb&&P._leaveCb(!0);const W=C[T];W&&vo(t,W)&&W.el._leaveCb&&W.el._leaveCb(),S(O,[P])},enter(P){let O=l,W=c,G=u;if(!n.isMounted)if(i)O=m||l,W=v||c,G=b||u;else return;let B=!1;const ie=P._enterCb=oe=>{B||(B=!0,oe?S(G,[P]):S(W,[P]),k.delayedLeave&&k.delayedLeave(),P._enterCb=void 0)};O?A(O,[P,ie]):ie()},leave(P,O){const W=String(t.key);if(P._enterCb&&P._enterCb(!0),n.isUnmounting)return O();S(d,[P]);let G=!1;const B=P._leaveCb=ie=>{G||(G=!0,O(),ie?S(p,[P]):S(f,[P]),P._leaveCb=void 0,C[W]===t&&delete C[W])};C[W]=t,h?A(h,[P,B]):B()},clone(P){return ku(P,e,n,r)}};return k}function _m(t){if($p(t))return t=Ns(t),t.children=null,t}function LE(t){return $p(t)?t.children?t.children[0]:void 0:t}function Au(t,e){t.shapeFlag&6&&t.component?Au(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function U_(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===at?(o.patchFlag&128&&i++,r=r.concat(U_(o.children,e,a))):(e||o.type!==$r)&&r.push(a!=null?Ns(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function Fp(t){return ye(t)?{setup:t,name:t.name}:t}const Jh=t=>!!t.type.__asyncLoader,$p=t=>t.type.__isKeepAlive;function bA(t,e){EA(t,"a",e)}function IA(t,e){EA(t,"da",e)}function EA(t,e,n=Wt){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Vp(e,r,n),n){let i=n.parent;for(;i&&i.parent;)$p(i.parent.vnode)&&B$(r,e,n,i),i=i.parent}}function B$(t,e,n,r){const i=Vp(e,t,r,!0);SA(()=>{R_(r[e],i)},n)}function Vp(t,e,n=Wt,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;fa(),Cl(n);const a=wr(e,n,t,o);return Oo(),pa(),a});return r?i.unshift(s):i.push(s),s}}const Qi=t=>(e,n=Wt)=>(!Nu||t==="sp")&&Vp(t,e,n),Up=Qi("bm"),ga=Qi("m"),j$=Qi("bu"),TA=Qi("u"),Wr=Qi("bum"),SA=Qi("um"),q$=Qi("sp"),W$=Qi("rtg"),H$=Qi("rtc");function K$(t,e=Wt){Vp("ec",t,e)}function Tr(t,e){const n=pr;if(n===null)return t;const r=qp(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,c=Xe]=e[s];ye(o)&&(o={mounted:o,updated:o}),o.deep&&Eo(a),i.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:c})}return t}function io(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(fa(),wr(l,n,8,[t.el,a,t,e]),pa())}}const B_="components",G$="directives";function Fi(t,e){return j_(B_,t,!0,e)||t}const CA=Symbol();function z$(t){return St(t)?j_(B_,t,!1)||t:t||CA}function ma(t){return j_(G$,t)}function j_(t,e,n=!0,r=!1){const i=pr||Wt;if(i){const s=i.type;if(t===B_){const a=VA(s);if(a&&(a===e||a===Er(e)||a===Gs(Er(e))))return s}const o=FE(i[t]||s[t],e)||FE(i.appContext[t],e);return!o&&r?s:o}}function FE(t,e){return t&&(t[e]||t[Er(e)]||t[Gs(Er(e))])}function q_(t,e,n,r){let i;const s=n&&n[r];if(ce(t)||St(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(vt(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(t[c],c,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function $E(t){const e={};for(const n in t)e[Qh(n)]=t[n];return e}const Mv=t=>t?FA(t)?qp(t)||t.proxy:Mv(t.parent):null,mf=Qt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Mv(t.parent),$root:t=>Mv(t.root),$emit:t=>t.emit,$options:t=>AA(t),$forceUpdate:t=>t.f||(t.f=()=>dA(t.update)),$nextTick:t=>t.n||(t.n=Ar.bind(t.proxy)),$watch:t=>V$.bind(t)}),Y$={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(r!==Xe&&Le(r,e))return o[e]=1,r[e];if(i!==Xe&&Le(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Le(c,e))return o[e]=3,s[e];if(n!==Xe&&Le(n,e))return o[e]=4,n[e];Lv&&(o[e]=0)}}const u=mf[e];let d,h;if(u)return e==="$attrs"&&ar(t,"get",e),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Xe&&Le(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,Le(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return i!==Xe&&Le(i,e)?(i[e]=n,!0):r!==Xe&&Le(r,e)?(r[e]=n,!0):Le(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==Xe&&Le(t,o)||e!==Xe&&Le(e,o)||(a=s[0])&&Le(a,o)||Le(r,o)||Le(mf,o)||Le(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Le(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let Lv=!0;function Q$(t){const e=AA(t),n=t.proxy,r=t.ctx;Lv=!1,e.beforeCreate&&VE(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:p,activated:g,deactivated:m,beforeDestroy:v,beforeUnmount:b,destroyed:T,unmounted:C,render:S,renderTracked:A,renderTriggered:k,errorCaptured:P,serverPrefetch:O,expose:W,inheritAttrs:G,components:B,directives:ie,filters:oe}=e;if(c&&X$(c,r,null,t.appContext.config.unwrapInjectedRef),o)for(const be in o){const Ie=o[be];ye(Ie)&&(r[be]=Ie.bind(n))}if(i){const be=i.call(n,n);vt(be)&&(t.data=bn(be))}if(Lv=!0,s)for(const be in s){const Ie=s[be],st=ye(Ie)?Ie.bind(n,n):ye(Ie.get)?Ie.get.bind(n,n):Fr,kt=!ye(Ie)&&ye(Ie.set)?Ie.set.bind(n):Fr,He=I({get:st,set:kt});Object.defineProperty(r,be,{enumerable:!0,configurable:!0,get:()=>He.value,set:ln=>He.value=ln})}if(a)for(const be in a)kA(a[be],r,n,be);if(l){const be=ye(l)?l.call(n):l;Reflect.ownKeys(be).forEach(Ie=>{Kt(Ie,be[Ie])})}u&&VE(u,t,"c");function Ae(be,Ie){ce(Ie)?Ie.forEach(st=>be(st.bind(n))):Ie&&be(Ie.bind(n))}if(Ae(Up,d),Ae(ga,h),Ae(j$,f),Ae(TA,p),Ae(bA,g),Ae(IA,m),Ae(K$,P),Ae(H$,A),Ae(W$,k),Ae(Wr,b),Ae(SA,C),Ae(q$,O),ce(W))if(W.length){const be=t.exposed||(t.exposed={});W.forEach(Ie=>{Object.defineProperty(be,Ie,{get:()=>n[Ie],set:st=>n[Ie]=st})})}else t.exposed||(t.exposed={});S&&t.render===Fr&&(t.render=S),G!=null&&(t.inheritAttrs=G),B&&(t.components=B),ie&&(t.directives=ie)}function X$(t,e,n=Fr,r=!1){ce(t)&&(t=Fv(t));for(const i in t){const s=t[i];let o;vt(s)?"default"in s?o=Ke(s.from||i,s.default,!0):o=Ke(s.from||i):o=Ke(s),pt(o)&&r?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[i]=o}}function VE(t,e,n){wr(ce(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function kA(t,e,n,r){const i=r.includes(".")?vA(n,r):()=>n[r];if(St(t)){const s=e[t];ye(s)&&$e(i,s)}else if(ye(t))$e(i,t.bind(n));else if(vt(t))if(ce(t))t.forEach(s=>kA(s,e,n,r));else{const s=ye(t.handler)?t.handler.bind(n):e[t.handler];ye(s)&&$e(i,s,t)}}function AA(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>vf(l,c,o,!0)),vf(l,e,o)),s.set(e,l),l}function vf(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&vf(t,s,n,!0),i&&i.forEach(o=>vf(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=J$[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const J$={data:UE,props:ho,emits:ho,methods:ho,computed:ho,beforeCreate:Rn,created:Rn,beforeMount:Rn,mounted:Rn,beforeUpdate:Rn,updated:Rn,beforeDestroy:Rn,beforeUnmount:Rn,destroyed:Rn,unmounted:Rn,activated:Rn,deactivated:Rn,errorCaptured:Rn,serverPrefetch:Rn,components:ho,directives:ho,watch:eV,provide:UE,inject:Z$};function UE(t,e){return e?t?function(){return Qt(ye(t)?t.call(this,this):t,ye(e)?e.call(this,this):e)}:e:t}function Z$(t,e){return ho(Fv(t),Fv(e))}function Fv(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Rn(t,e){return t?[...new Set([].concat(t,e))]:e}function ho(t,e){return t?Qt(Qt(Object.create(null),t),e):e}function eV(t,e){if(!t)return e;if(!e)return t;const n=Qt(Object.create(null),t);for(const r in e)n[r]=Rn(t[r],e[r]);return n}function tV(t,e,n,r=!1){const i={},s={};ff(s,Bp,1),t.propsDefaults=Object.create(null),RA(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:eA(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function nV(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Pe(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Mp(t.emitsOptions,h))continue;const f=e[h];if(l)if(Le(s,h))f!==s[h]&&(s[h]=f,c=!0);else{const p=Er(h);i[p]=$v(l,a,p,f,t,!1)}else f!==s[h]&&(s[h]=f,c=!0)}}}else{RA(t,e,i,s)&&(c=!0);let u;for(const d in a)(!e||!Le(e,d)&&((u=Zl(d))===d||!Le(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=$v(l,a,d,void 0,t,!0)):delete i[d]);if(s!==a)for(const d in s)(!e||!Le(e,d)&&!0)&&(delete s[d],c=!0)}c&&qi(t,"set","$attrs")}function RA(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Yh(l))continue;const c=e[l];let u;i&&Le(i,u=Er(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:Mp(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Pe(n),c=a||Xe;for(let u=0;u<s.length;u++){const d=s[u];n[d]=$v(i,l,d,c[d],t,!Le(c,d))}}return o}function $v(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Le(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&ye(l)){const{propsDefaults:c}=i;n in c?r=c[n]:(Cl(i),r=c[n]=l.call(null,e),Oo())}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Zl(n))&&(r=!0))}return r}function NA(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!ye(t)){const u=d=>{l=!0;const[h,f]=NA(d,e,!0);Qt(o,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return r.set(t,ul),ul;if(ce(s))for(let u=0;u<s.length;u++){const d=Er(s[u]);BE(d)&&(o[d]=Xe)}else if(s)for(const u in s){const d=Er(u);if(BE(d)){const h=s[u],f=o[d]=ce(h)||ye(h)?{type:h}:h;if(f){const p=WE(Boolean,f.type),g=WE(String,f.type);f[0]=p>-1,f[1]=g<0||p<g,(p>-1||Le(f,"default"))&&a.push(d)}}}const c=[o,a];return r.set(t,c),c}function BE(t){return t[0]!=="$"}function jE(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function qE(t,e){return jE(t)===jE(e)}function WE(t,e){return ce(e)?e.findIndex(n=>qE(n,t)):ye(e)&&qE(e,t)?0:-1}const xA=t=>t[0]==="_"||t==="$stable",W_=t=>ce(t)?t.map(Xr):[Xr(t)],rV=(t,e,n)=>{if(e._n)return e;const r=Oe((...i)=>W_(e(...i)),n);return r._c=!1,r},PA=(t,e,n)=>{const r=t._ctx;for(const i in t){if(xA(i))continue;const s=t[i];if(ye(s))e[i]=rV(i,s,r);else if(s!=null){const o=W_(s);e[i]=()=>o}}},OA=(t,e)=>{const n=W_(e);t.slots.default=()=>n},iV=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Pe(e),ff(e,"_",n)):PA(e,t.slots={})}else t.slots={},e&&OA(t,e);ff(t.slots,Bp,1)},sV=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Xe;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Qt(i,e),!n&&a===1&&delete i._):(s=!e.$stable,PA(e,i)),o=e}else e&&(OA(t,e),o={default:1});if(s)for(const a in i)!xA(a)&&!(a in o)&&delete i[a]};function DA(){return{app:null,config:{isNativeTag:$F,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let oV=0;function aV(t,e){return function(r,i=null){ye(r)||(r=Object.assign({},r)),i!=null&&!vt(i)&&(i=null);const s=DA(),o=new Set;let a=!1;const l=s.app={_uid:oV++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:RV,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&ye(c.install)?(o.add(c),c.install(l,...u)):ye(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,d){if(!a){const h=y(r,i);return h.appContext=s,u&&e?e(h,c):t(h,c,d),a=!0,l._container=c,c.__vue_app__=l,qp(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l}};return l}}function Vv(t,e,n,r,i=!1){if(ce(t)){t.forEach((h,f)=>Vv(h,e&&(ce(e)?e[f]:e),n,r,i));return}if(Jh(r)&&!i)return;const s=r.shapeFlag&4?qp(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Xe?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(St(c)?(u[c]=null,Le(d,c)&&(d[c]=null)):pt(c)&&(c.value=null)),ye(l))Li(l,a,12,[o,u]);else{const h=St(l),f=pt(l);if(h||f){const p=()=>{if(t.f){const g=h?u[l]:l.value;i?ce(g)&&R_(g,s):ce(g)?g.includes(s)||g.push(s):h?(u[l]=[s],Le(d,l)&&(d[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else h?(u[l]=o,Le(d,l)&&(d[l]=o)):pt(l)&&(l.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,Bn(p,n)):p()}}}const Bn=$$;function lV(t){return cV(t)}function cV(t,e){const n=WF();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=Fr,cloneNode:p,insertStaticContent:g}=t,m=(_,w,x,F=null,M=null,K=null,Z=!1,H=null,Y=!!w.dynamicChildren)=>{if(_===w)return;_&&!vo(_,w)&&(F=se(_),cn(_,M,K,!0),_=null),w.patchFlag===-2&&(Y=!1,w.dynamicChildren=null);const{type:V,ref:ae,shapeFlag:re}=w;switch(V){case K_:v(_,w,x,F);break;case $r:b(_,w,x,F);break;case wm:_==null&&T(w,x,F,Z);break;case at:ie(_,w,x,F,M,K,Z,H,Y);break;default:re&1?A(_,w,x,F,M,K,Z,H,Y):re&6?oe(_,w,x,F,M,K,Z,H,Y):(re&64||re&128)&&V.process(_,w,x,F,M,K,Z,H,Y,tt)}ae!=null&&M&&Vv(ae,_&&_.ref,K,w||_,!w)},v=(_,w,x,F)=>{if(_==null)r(w.el=a(w.children),x,F);else{const M=w.el=_.el;w.children!==_.children&&c(M,w.children)}},b=(_,w,x,F)=>{_==null?r(w.el=l(w.children||""),x,F):w.el=_.el},T=(_,w,x,F)=>{[_.el,_.anchor]=g(_.children,w,x,F,_.el,_.anchor)},C=({el:_,anchor:w},x,F)=>{let M;for(;_&&_!==w;)M=h(_),r(_,x,F),_=M;r(w,x,F)},S=({el:_,anchor:w})=>{let x;for(;_&&_!==w;)x=h(_),i(_),_=x;i(w)},A=(_,w,x,F,M,K,Z,H,Y)=>{Z=Z||w.type==="svg",_==null?k(w,x,F,M,K,Z,H,Y):W(_,w,M,K,Z,H,Y)},k=(_,w,x,F,M,K,Z,H)=>{let Y,V;const{type:ae,props:re,shapeFlag:le,transition:ge,patchFlag:Ve,dirs:ze}=_;if(_.el&&p!==void 0&&Ve===-1)Y=_.el=p(_.el);else{if(Y=_.el=o(_.type,K,re&&re.is,re),le&8?u(Y,_.children):le&16&&O(_.children,Y,null,F,M,K&&ae!=="foreignObject",Z,H),ze&&io(_,null,F,"created"),re){for(const ot in re)ot!=="value"&&!Yh(ot)&&s(Y,ot,null,re[ot],K,_.children,F,M,Q);"value"in re&&s(Y,"value",null,re.value),(V=re.onVnodeBeforeMount)&&Qr(V,F,_)}P(Y,_,_.scopeId,Z,F)}ze&&io(_,null,F,"beforeMount");const Ye=(!M||M&&!M.pendingBranch)&&ge&&!ge.persisted;Ye&&ge.beforeEnter(Y),r(Y,w,x),((V=re&&re.onVnodeMounted)||Ye||ze)&&Bn(()=>{V&&Qr(V,F,_),Ye&&ge.enter(Y),ze&&io(_,null,F,"mounted")},M)},P=(_,w,x,F,M)=>{if(x&&f(_,x),F)for(let K=0;K<F.length;K++)f(_,F[K]);if(M){let K=M.subTree;if(w===K){const Z=M.vnode;P(_,Z,Z.scopeId,Z.slotScopeIds,M.parent)}}},O=(_,w,x,F,M,K,Z,H,Y=0)=>{for(let V=Y;V<_.length;V++){const ae=_[V]=H?ps(_[V]):Xr(_[V]);m(null,ae,w,x,F,M,K,Z,H)}},W=(_,w,x,F,M,K,Z)=>{const H=w.el=_.el;let{patchFlag:Y,dynamicChildren:V,dirs:ae}=w;Y|=_.patchFlag&16;const re=_.props||Xe,le=w.props||Xe;let ge;x&&so(x,!1),(ge=le.onVnodeBeforeUpdate)&&Qr(ge,x,w,_),ae&&io(w,_,x,"beforeUpdate"),x&&so(x,!0);const Ve=M&&w.type!=="foreignObject";if(V?G(_.dynamicChildren,V,H,x,F,Ve,K):Z||st(_,w,H,null,x,F,Ve,K,!1),Y>0){if(Y&16)B(H,w,re,le,x,F,M);else if(Y&2&&re.class!==le.class&&s(H,"class",null,le.class,M),Y&4&&s(H,"style",re.style,le.style,M),Y&8){const ze=w.dynamicProps;for(let Ye=0;Ye<ze.length;Ye++){const ot=ze[Ye],xr=re[ot],Ua=le[ot];(Ua!==xr||ot==="value")&&s(H,ot,xr,Ua,M,_.children,x,F,Q)}}Y&1&&_.children!==w.children&&u(H,w.children)}else!Z&&V==null&&B(H,w,re,le,x,F,M);((ge=le.onVnodeUpdated)||ae)&&Bn(()=>{ge&&Qr(ge,x,w,_),ae&&io(w,_,x,"updated")},F)},G=(_,w,x,F,M,K,Z)=>{for(let H=0;H<w.length;H++){const Y=_[H],V=w[H],ae=Y.el&&(Y.type===at||!vo(Y,V)||Y.shapeFlag&70)?d(Y.el):x;m(Y,V,ae,null,F,M,K,Z,!0)}},B=(_,w,x,F,M,K,Z)=>{if(x!==F){for(const H in F){if(Yh(H))continue;const Y=F[H],V=x[H];Y!==V&&H!=="value"&&s(_,H,V,Y,Z,w.children,M,K,Q)}if(x!==Xe)for(const H in x)!Yh(H)&&!(H in F)&&s(_,H,x[H],null,Z,w.children,M,K,Q);"value"in F&&s(_,"value",x.value,F.value)}},ie=(_,w,x,F,M,K,Z,H,Y)=>{const V=w.el=_?_.el:a(""),ae=w.anchor=_?_.anchor:a("");let{patchFlag:re,dynamicChildren:le,slotScopeIds:ge}=w;ge&&(H=H?H.concat(ge):ge),_==null?(r(V,x,F),r(ae,x,F),O(w.children,x,ae,M,K,Z,H,Y)):re>0&&re&64&&le&&_.dynamicChildren?(G(_.dynamicChildren,le,x,M,K,Z,H),(w.key!=null||M&&w===M.subTree)&&H_(_,w,!0)):st(_,w,x,ae,M,K,Z,H,Y)},oe=(_,w,x,F,M,K,Z,H,Y)=>{w.slotScopeIds=H,_==null?w.shapeFlag&512?M.ctx.activate(w,x,F,Z,Y):xe(w,x,F,M,K,Z,Y):Ae(_,w,Y)},xe=(_,w,x,F,M,K,Z)=>{const H=_.component=bV(_,F,M);if($p(_)&&(H.ctx.renderer=tt),IV(H),H.asyncDep){if(M&&M.registerDep(H,be),!_.el){const Y=H.subTree=y($r);b(null,Y,w,x)}return}be(H,_,w,x,M,K,Z)},Ae=(_,w,x)=>{const F=w.component=_.component;if(M$(_,w,x))if(F.asyncDep&&!F.asyncResolved){Ie(F,w,x);return}else F.next=w,R$(F.update),F.update();else w.el=_.el,F.vnode=w},be=(_,w,x,F,M,K,Z)=>{const H=()=>{if(_.isMounted){let{next:ae,bu:re,u:le,parent:ge,vnode:Ve}=_,ze=ae,Ye;so(_,!1),ae?(ae.el=Ve.el,Ie(_,ae,Z)):ae=Ve,re&&Xh(re),(Ye=ae.props&&ae.props.onVnodeBeforeUpdate)&&Qr(Ye,ge,ae,Ve),so(_,!0);const ot=ym(_),xr=_.subTree;_.subTree=ot,m(xr,ot,d(xr.el),se(xr),_,M,K),ae.el=ot.el,ze===null&&L$(_,ot.el),le&&Bn(le,M),(Ye=ae.props&&ae.props.onVnodeUpdated)&&Bn(()=>Qr(Ye,ge,ae,Ve),M)}else{let ae;const{el:re,props:le}=w,{bm:ge,m:Ve,parent:ze}=_,Ye=Jh(w);if(so(_,!1),ge&&Xh(ge),!Ye&&(ae=le&&le.onVnodeBeforeMount)&&Qr(ae,ze,w),so(_,!0),re&&we){const ot=()=>{_.subTree=ym(_),we(re,_.subTree,_,M,null)};Ye?w.type.__asyncLoader().then(()=>!_.isUnmounted&&ot()):ot()}else{const ot=_.subTree=ym(_);m(null,ot,x,F,_,M,K),w.el=ot.el}if(Ve&&Bn(Ve,M),!Ye&&(ae=le&&le.onVnodeMounted)){const ot=w;Bn(()=>Qr(ae,ze,ot),M)}(w.shapeFlag&256||ze&&Jh(ze.vnode)&&ze.vnode.shapeFlag&256)&&_.a&&Bn(_.a,M),_.isMounted=!0,w=x=F=null}},Y=_.effect=new P_(H,()=>dA(V),_.scope),V=_.update=()=>Y.run();V.id=_.uid,so(_,!0),V()},Ie=(_,w,x)=>{w.component=_;const F=_.vnode.props;_.vnode=w,_.next=null,nV(_,w.props,F,x),sV(_,w.children,x),fa(),Dp(void 0,_.update),pa()},st=(_,w,x,F,M,K,Z,H,Y=!1)=>{const V=_&&_.children,ae=_?_.shapeFlag:0,re=w.children,{patchFlag:le,shapeFlag:ge}=w;if(le>0){if(le&128){He(V,re,x,F,M,K,Z,H,Y);return}else if(le&256){kt(V,re,x,F,M,K,Z,H,Y);return}}ge&8?(ae&16&&Q(V,M,K),re!==V&&u(x,re)):ae&16?ge&16?He(V,re,x,F,M,K,Z,H,Y):Q(V,M,K,!0):(ae&8&&u(x,""),ge&16&&O(re,x,F,M,K,Z,H,Y))},kt=(_,w,x,F,M,K,Z,H,Y)=>{_=_||ul,w=w||ul;const V=_.length,ae=w.length,re=Math.min(V,ae);let le;for(le=0;le<re;le++){const ge=w[le]=Y?ps(w[le]):Xr(w[le]);m(_[le],ge,x,null,M,K,Z,H,Y)}V>ae?Q(_,M,K,!0,!1,re):O(w,x,F,M,K,Z,H,Y,re)},He=(_,w,x,F,M,K,Z,H,Y)=>{let V=0;const ae=w.length;let re=_.length-1,le=ae-1;for(;V<=re&&V<=le;){const ge=_[V],Ve=w[V]=Y?ps(w[V]):Xr(w[V]);if(vo(ge,Ve))m(ge,Ve,x,null,M,K,Z,H,Y);else break;V++}for(;V<=re&&V<=le;){const ge=_[re],Ve=w[le]=Y?ps(w[le]):Xr(w[le]);if(vo(ge,Ve))m(ge,Ve,x,null,M,K,Z,H,Y);else break;re--,le--}if(V>re){if(V<=le){const ge=le+1,Ve=ge<ae?w[ge].el:F;for(;V<=le;)m(null,w[V]=Y?ps(w[V]):Xr(w[V]),x,Ve,M,K,Z,H,Y),V++}}else if(V>le)for(;V<=re;)cn(_[V],M,K,!0),V++;else{const ge=V,Ve=V,ze=new Map;for(V=Ve;V<=le;V++){const Zn=w[V]=Y?ps(w[V]):Xr(w[V]);Zn.key!=null&&ze.set(Zn.key,V)}let Ye,ot=0;const xr=le-Ve+1;let Ua=!1,_E=0;const Sc=new Array(xr);for(V=0;V<xr;V++)Sc[V]=0;for(V=ge;V<=re;V++){const Zn=_[V];if(ot>=xr){cn(Zn,M,K,!0);continue}let Yr;if(Zn.key!=null)Yr=ze.get(Zn.key);else for(Ye=Ve;Ye<=le;Ye++)if(Sc[Ye-Ve]===0&&vo(Zn,w[Ye])){Yr=Ye;break}Yr===void 0?cn(Zn,M,K,!0):(Sc[Yr-Ve]=V+1,Yr>=_E?_E=Yr:Ua=!0,m(Zn,w[Yr],x,null,M,K,Z,H,Y),ot++)}const wE=Ua?uV(Sc):ul;for(Ye=wE.length-1,V=xr-1;V>=0;V--){const Zn=Ve+V,Yr=w[Zn],bE=Zn+1<ae?w[Zn+1].el:F;Sc[V]===0?m(null,Yr,x,bE,M,K,Z,H,Y):Ua&&(Ye<0||V!==wE[Ye]?ln(Yr,x,bE,2):Ye--)}}},ln=(_,w,x,F,M=null)=>{const{el:K,type:Z,transition:H,children:Y,shapeFlag:V}=_;if(V&6){ln(_.component.subTree,w,x,F);return}if(V&128){_.suspense.move(w,x,F);return}if(V&64){Z.move(_,w,x,tt);return}if(Z===at){r(K,w,x);for(let re=0;re<Y.length;re++)ln(Y[re],w,x,F);r(_.anchor,w,x);return}if(Z===wm){C(_,w,x);return}if(F!==2&&V&1&&H)if(F===0)H.beforeEnter(K),r(K,w,x),Bn(()=>H.enter(K),M);else{const{leave:re,delayLeave:le,afterLeave:ge}=H,Ve=()=>r(K,w,x),ze=()=>{re(K,()=>{Ve(),ge&&ge()})};le?le(K,Ve,ze):ze()}else r(K,w,x)},cn=(_,w,x,F=!1,M=!1)=>{const{type:K,props:Z,ref:H,children:Y,dynamicChildren:V,shapeFlag:ae,patchFlag:re,dirs:le}=_;if(H!=null&&Vv(H,null,x,_,!0),ae&256){w.ctx.deactivate(_);return}const ge=ae&1&&le,Ve=!Jh(_);let ze;if(Ve&&(ze=Z&&Z.onVnodeBeforeUnmount)&&Qr(ze,w,_),ae&6)ne(_.component,x,F);else{if(ae&128){_.suspense.unmount(x,F);return}ge&&io(_,null,w,"beforeUnmount"),ae&64?_.type.remove(_,w,x,M,tt,F):V&&(K!==at||re>0&&re&64)?Q(V,w,x,!1,!0):(K===at&&re&384||!M&&ae&16)&&Q(Y,w,x),F&&Va(_)}(Ve&&(ze=Z&&Z.onVnodeUnmounted)||ge)&&Bn(()=>{ze&&Qr(ze,w,_),ge&&io(_,null,w,"unmounted")},x)},Va=_=>{const{type:w,el:x,anchor:F,transition:M}=_;if(w===at){D(x,F);return}if(w===wm){S(_);return}const K=()=>{i(x),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(_.shapeFlag&1&&M&&!M.persisted){const{leave:Z,delayLeave:H}=M,Y=()=>Z(x,K);H?H(_.el,K,Y):Y()}else K()},D=(_,w)=>{let x;for(;_!==w;)x=h(_),i(_),_=x;i(w)},ne=(_,w,x)=>{const{bum:F,scope:M,update:K,subTree:Z,um:H}=_;F&&Xh(F),M.stop(),K&&(K.active=!1,cn(Z,_,w,x)),H&&Bn(H,w),Bn(()=>{_.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},Q=(_,w,x,F=!1,M=!1,K=0)=>{for(let Z=K;Z<_.length;Z++)cn(_[Z],w,x,F,M)},se=_=>_.shapeFlag&6?se(_.component.subTree):_.shapeFlag&128?_.suspense.next():h(_.anchor||_.el),Ge=(_,w,x)=>{_==null?w._vnode&&cn(w._vnode,null,null,!0):m(w._vnode||null,_,w,null,null,null,x),pA(),w._vnode=_},tt={p:m,um:cn,m:ln,r:Va,mt:xe,mc:O,pc:st,pbc:G,n:se,o:t};let Ne,we;return e&&([Ne,we]=e(tt)),{render:Ge,hydrate:Ne,createApp:aV(Ge,Ne)}}function so({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function H_(t,e,n=!1){const r=t.children,i=e.children;if(ce(r)&&ce(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=ps(i[s]),a.el=o.el),n||H_(o,a))}}function uV(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const dV=t=>t.__isTeleport,Zc=t=>t&&(t.disabled||t.disabled===""),HE=t=>typeof SVGElement!="undefined"&&t instanceof SVGElement,Uv=(t,e)=>{const n=t&&t.to;return St(n)?e?e(n):null:n},hV={__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:p,createText:g,createComment:m}}=c,v=Zc(e.props);let{shapeFlag:b,children:T,dynamicChildren:C}=e;if(t==null){const S=e.el=g(""),A=e.anchor=g("");f(S,n,r),f(A,n,r);const k=e.target=Uv(e.props,p),P=e.targetAnchor=g("");k&&(f(P,k),o=o||HE(k));const O=(W,G)=>{b&16&&u(T,W,G,i,s,o,a,l)};v?O(n,A):k&&O(k,P)}else{e.el=t.el;const S=e.anchor=t.anchor,A=e.target=t.target,k=e.targetAnchor=t.targetAnchor,P=Zc(t.props),O=P?n:A,W=P?S:k;if(o=o||HE(A),C?(h(t.dynamicChildren,C,O,i,s,o,a),H_(t,e,!0)):l||d(t,e,O,W,i,s,o,a,!1),v)P||Ih(e,n,S,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const G=e.target=Uv(e.props,p);G&&Ih(e,G,null,c,0)}else P&&Ih(e,A,k,c,1)}},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:h}=t;if(d&&s(u),(o||!Zc(h))&&(s(c),a&16))for(let f=0;f<l.length;f++){const p=l[f];i(p,e,n,!0,!!p.dynamicChildren)}},move:Ih,hydrate:fV};function Ih(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,d=s===2;if(d&&r(o,e,n),(!d||Zc(u))&&l&16)for(let h=0;h<c.length;h++)i(c[h],e,n,2);d&&r(a,e,n)}function fV(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=Uv(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(Zc(e.props))e.anchor=c(o(t),e,a(t),n,r,i,s),e.targetAnchor=d;else{e.anchor=o(t);let h=d;for(;h;)if(h=o(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(d,e,u,n,r,i,s)}}return e.anchor&&o(e.anchor)}const pV=hV,at=Symbol(void 0),K_=Symbol(void 0),$r=Symbol(void 0),wm=Symbol(void 0),eu=[];let Dr=null;function Ht(t=!1){eu.push(Dr=t?null:[])}function gV(){eu.pop(),Dr=eu[eu.length-1]||null}let Ru=1;function KE(t){Ru+=t}function MA(t){return t.dynamicChildren=Ru>0?Dr||ul:null,gV(),Ru>0&&Dr&&Dr.push(t),t}function Sl(t,e,n,r,i,s){return MA(ri(t,e,n,r,i,s,!0))}function br(t,e,n,r,i){return MA(y(t,e,n,r,i,!0))}function Bv(t){return t?t.__v_isVNode===!0:!1}function vo(t,e){return t.type===e.type&&t.key===e.key}const Bp="__vInternal",LA=({key:t})=>t!=null?t:null,Zh=({ref:t,ref_key:e,ref_for:n})=>t!=null?St(t)||pt(t)||ye(t)?{i:pr,r:t,k:e,f:!!n}:t:null;function ri(t,e=null,n=null,r=0,i=null,s=t===at?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&LA(e),ref:e&&Zh(e),scopeId:Lp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(G_(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=St(n)?8:16),Ru>0&&!o&&Dr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Dr.push(l),l}const y=mV;function mV(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===CA)&&(t=$r),Bv(t)){const a=Ns(t,e,!0);return n&&G_(a,n),Ru>0&&!s&&Dr&&(a.shapeFlag&6?Dr[Dr.indexOf(t)]=a:Dr.push(a)),a.patchFlag|=-2,a}if(AV(t)&&(t=t.__vccOpts),e){e=vV(e);let{class:a,style:l}=e;a&&!St(a)&&(e.class=Ap(a)),vt(l)&&(tA(l)&&!ce(l)&&(l=Qt({},l)),e.style=S_(l))}const o=St(t)?1:F$(t)?128:dV(t)?64:vt(t)?4:ye(t)?2:0;return ri(t,e,n,r,i,o,s,!0)}function vV(t){return t?tA(t)||Bp in t?Qt({},t):t:null}function Ns(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?ct(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&LA(a),ref:e&&e.ref?n&&i?ce(i)?i.concat(Zh(e)):[i,Zh(e)]:Zh(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==at?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ns(t.ssContent),ssFallback:t.ssFallback&&Ns(t.ssFallback),el:t.el,anchor:t.anchor}}function wi(t=" ",e=0){return y(K_,null,t,e)}function yV(t="",e=!1){return e?(Ht(),br($r,null,t)):y($r,null,t)}function Xr(t){return t==null||typeof t=="boolean"?y($r):ce(t)?y(at,null,t.slice()):typeof t=="object"?ps(t):y(K_,null,String(t))}function ps(t){return t.el===null||t.memo?t:Ns(t)}function G_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ce(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),G_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Bp in e)?e._ctx=pr:i===3&&pr&&(pr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ye(e)?(e={default:e,_ctx:pr},n=32):(e=String(e),r&64?(n=16,e=[wi(e)]):n=8);t.children=e,t.shapeFlag|=n}function ct(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Ap([e.class,r.class]));else if(i==="style")e.style=S_([e.style,r.style]);else if(Rp(i)){const s=e[i],o=r[i];o&&s!==o&&!(ce(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Qr(t,e,n,r=null){wr(t,e,7,[n,r])}const _V=DA();let wV=0;function bV(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||_V,s={uid:wV++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new qk(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:NA(r,i),emitsOptions:mA(r,i),emit:null,emitted:null,propsDefaults:Xe,inheritAttrs:r.inheritAttrs,ctx:Xe,data:Xe,props:Xe,attrs:Xe,slots:Xe,refs:Xe,setupState:Xe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=P$.bind(null,s),t.ce&&t.ce(s),s}let Wt=null;const jp=()=>Wt||pr,Cl=t=>{Wt=t,t.scope.on()},Oo=()=>{Wt&&Wt.scope.off(),Wt=null};function FA(t){return t.vnode.shapeFlag&4}let Nu=!1;function IV(t,e=!1){Nu=e;const{props:n,children:r}=t.vnode,i=FA(t);tV(t,n,i,e),iV(t,r);const s=i?EV(t,e):void 0;return Nu=!1,s}function EV(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=nA(new Proxy(t.ctx,Y$));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?SV(t):null;Cl(t),fa();const s=Li(r,t,0,[t.props,i]);if(pa(),Oo(),Uk(s)){if(s.then(Oo,Oo),e)return s.then(o=>{GE(t,o,e)}).catch(o=>{Op(o,t,0)});t.asyncDep=s}else GE(t,s,e)}else $A(t,e)}function GE(t,e,n){ye(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:vt(e)&&(t.setupState=aA(e)),$A(t,n)}let zE;function $A(t,e,n){const r=t.type;if(!t.render){if(!e&&zE&&!r.render){const i=r.template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Qt(Qt({isCustomElement:s,delimiters:a},o),l);r.render=zE(i,c)}}t.render=r.render||Fr}Cl(t),fa(),Q$(t),pa(),Oo()}function TV(t){return new Proxy(t.attrs,{get(e,n){return ar(t,"get","$attrs"),e[n]}})}function SV(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=TV(t))},slots:t.slots,emit:t.emit,expose:e}}function qp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(aA(nA(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in mf)return mf[n](t)}}))}const CV=/(?:^|[-_])(\w)/g,kV=t=>t.replace(CV,e=>e.toUpperCase()).replace(/[-_]/g,"");function VA(t){return ye(t)&&t.displayName||t.name}function UA(t,e,n=!1){let r=VA(e);if(!r&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(r=i[1])}if(!r&&t&&t.parent){const i=s=>{for(const o in s)if(s[o]===e)return o};r=i(t.components||t.parent.type.components)||i(t.appContext.components)}return r?kV(r):n?"App":"Anonymous"}function AV(t){return ye(t)&&"__vccOpts"in t}const I=(t,e)=>b$(t,e,Nu);function Rr(t,e,n){const r=arguments.length;return r===2?vt(e)&&!ce(e)?Bv(e)?y(t,null,[e]):y(t,e):y(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Bv(n)&&(n=[n]),y(t,e,n))}const RV="3.2.36",NV="http://www.w3.org/2000/svg",yo=typeof document!="undefined"?document:null,YE=yo&&yo.createElement("template"),xV={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?yo.createElementNS(NV,t):yo.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>yo.createTextNode(t),createComment:t=>yo.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>yo.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{YE.innerHTML=r?`<svg>${t}</svg>`:t;const a=YE.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function PV(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function OV(t,e,n){const r=t.style,i=St(n);if(n&&!i){for(const s in n)jv(r,s,n[s]);if(e&&!St(e))for(const s in e)n[s]==null&&jv(r,s,"")}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const QE=/\s*!important$/;function jv(t,e,n){if(ce(n))n.forEach(r=>jv(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=DV(t,e);QE.test(n)?t.setProperty(Zl(r),n.replace(QE,""),"important"):t[r]=n}}const XE=["Webkit","Moz","ms"],bm={};function DV(t,e){const n=bm[e];if(n)return n;let r=Er(e);if(r!=="filter"&&r in t)return bm[e]=r;r=Gs(r);for(let i=0;i<XE.length;i++){const s=XE[i]+r;if(s in t)return bm[e]=s}return e}const JE="http://www.w3.org/1999/xlink";function MV(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(JE,e.slice(6,e.length)):t.setAttributeNS(JE,e,n);else{const s=OF(e);n==null||s&&!$k(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function LV(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const l=n==null?"":n;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=$k(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}const[BA,FV]=(()=>{let t=Date.now,e=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(n&&Number(n[1])<=53)}return[t,e]})();let qv=0;const $V=Promise.resolve(),VV=()=>{qv=0},UV=()=>qv||($V.then(VV),qv=BA());function Ri(t,e,n,r){t.addEventListener(e,n,r)}function BV(t,e,n,r){t.removeEventListener(e,n,r)}function jV(t,e,n,r,i=null){const s=t._vei||(t._vei={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=qV(e);if(r){const c=s[e]=WV(r,i);Ri(t,a,c,l)}else o&&(BV(t,a,o,l),s[e]=void 0)}}const ZE=/(?:Once|Passive|Capture)$/;function qV(t){let e;if(ZE.test(t)){e={};let n;for(;n=t.match(ZE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[Zl(t.slice(2)),e]}function WV(t,e){const n=r=>{const i=r.timeStamp||BA();(FV||i>=n.attached-1)&&wr(HV(r,n.value),e,5,[r])};return n.value=t,n.attached=UV(),n}function HV(t,e){if(ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const eT=/^on[a-z]/,KV=(t,e,n,r,i=!1,s,o,a,l)=>{e==="class"?PV(t,r,i):e==="style"?OV(t,n,r):Rp(e)?A_(e)||jV(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):GV(t,e,r,i))?LV(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),MV(t,e,r,i))};function GV(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&eT.test(e)&&ye(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||eT.test(e)&&St(n)?!1:e in t}const os="transition",Cc="animation",hi=(t,{slots:e})=>Rr(_A,qA(t),e);hi.displayName="Transition";const jA={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},zV=hi.props=Qt({},_A.props,jA),oo=(t,e=[])=>{ce(t)?t.forEach(n=>n(...e)):t&&t(...e)},tT=t=>t?ce(t)?t.some(e=>e.length>1):t.length>1:!1;function qA(t){const e={};for(const B in t)B in jA||(e[B]=t[B]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=YV(i),g=p&&p[0],m=p&&p[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:T,onLeave:C,onLeaveCancelled:S,onBeforeAppear:A=v,onAppear:k=b,onAppearCancelled:P=T}=e,O=(B,ie,oe)=>{fs(B,ie?u:a),fs(B,ie?c:o),oe&&oe()},W=(B,ie)=>{B._isLeaving=!1,fs(B,d),fs(B,f),fs(B,h),ie&&ie()},G=B=>(ie,oe)=>{const xe=B?k:b,Ae=()=>O(ie,B,oe);oo(xe,[ie,Ae]),nT(()=>{fs(ie,B?l:s),Si(ie,B?u:a),tT(xe)||rT(ie,r,g,Ae)})};return Qt(e,{onBeforeEnter(B){oo(v,[B]),Si(B,s),Si(B,o)},onBeforeAppear(B){oo(A,[B]),Si(B,l),Si(B,c)},onEnter:G(!1),onAppear:G(!0),onLeave(B,ie){B._isLeaving=!0;const oe=()=>W(B,ie);Si(B,d),HA(),Si(B,h),nT(()=>{!B._isLeaving||(fs(B,d),Si(B,f),tT(C)||rT(B,r,m,oe))}),oo(C,[B,oe])},onEnterCancelled(B){O(B,!1),oo(T,[B])},onAppearCancelled(B){O(B,!0),oo(P,[B])},onLeaveCancelled(B){W(B),oo(S,[B])}})}function YV(t){if(t==null)return null;if(vt(t))return[Im(t.enter),Im(t.leave)];{const e=Im(t);return[e,e]}}function Im(t){return Eu(t)}function Si(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function fs(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function nT(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let QV=0;function rT(t,e,n,r){const i=t._endId=++QV,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=WA(t,e);if(!o)return r();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,h),s()},h=f=>{f.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,h)}function WA(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(os+"Delay"),s=r(os+"Duration"),o=iT(i,s),a=r(Cc+"Delay"),l=r(Cc+"Duration"),c=iT(a,l);let u=null,d=0,h=0;e===os?o>0&&(u=os,d=o,h=s.length):e===Cc?c>0&&(u=Cc,d=c,h=l.length):(d=Math.max(o,c),u=d>0?o>c?os:Cc:null,h=u?u===os?s.length:l.length:0);const f=u===os&&/\b(transform|all)(,|$)/.test(n[os+"Property"]);return{type:u,timeout:d,propCount:h,hasTransform:f}}function iT(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>sT(n)+sT(t[r])))}function sT(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function HA(){return document.body.offsetHeight}const KA=new WeakMap,GA=new WeakMap,XV={name:"TransitionGroup",props:Qt({},zV,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=jp(),r=yA();let i,s;return TA(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!nU(i[0].el,n.vnode.el,o))return;i.forEach(ZV),i.forEach(eU);const a=i.filter(tU);HA(),a.forEach(l=>{const c=l.el,u=c.style;Si(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c._moveCb=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c._moveCb=null,fs(c,o))};c.addEventListener("transitionend",d)})}),()=>{const o=Pe(t),a=qA(o);let l=o.tag||at;i=s,s=e.default?U_(e.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&Au(u,ku(u,a,r,n))}if(i)for(let c=0;c<i.length;c++){const u=i[c];Au(u,ku(u,a,r,n)),KA.set(u,u.el.getBoundingClientRect())}return y(l,null,s)}}},JV=XV;function ZV(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function eU(t){GA.set(t,t.el.getBoundingClientRect())}function tU(t){const e=KA.get(t),n=GA.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function nU(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&r.classList.remove(a))}),n.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:s}=WA(r);return i.removeChild(r),s}const xs=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ce(e)?n=>Xh(e,n):e};function rU(t){t.target.composing=!0}function oT(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const aT={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=xs(i);const s=r||i.props&&i.props.type==="number";Ri(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Eu(a)),t._assign(a)}),n&&Ri(t,"change",()=>{t.value=t.value.trim()}),e||(Ri(t,"compositionstart",rU),Ri(t,"compositionend",oT),Ri(t,"change",oT))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t._assign=xs(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&Eu(t.value)===e))return;const o=e==null?"":e;t.value!==o&&(t.value=o)}},iU={deep:!0,created(t,e,n){t._assign=xs(n),Ri(t,"change",()=>{const r=t._modelValue,i=kl(t),s=t.checked,o=t._assign;if(ce(r)){const a=C_(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Jl(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(zA(t,s))})},mounted:lT,beforeUpdate(t,e,n){t._assign=xs(n),lT(t,e,n)}};function lT(t,{value:e,oldValue:n},r){t._modelValue=e,ce(e)?t.checked=C_(e,r.props.value)>-1:Jl(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Uo(e,zA(t,!0)))}const sU={created(t,{value:e},n){t.checked=Uo(e,n.props.value),t._assign=xs(n),Ri(t,"change",()=>{t._assign(kl(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t._assign=xs(r),e!==n&&(t.checked=Uo(e,r.props.value))}},oU={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Jl(e);Ri(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Eu(kl(o)):kl(o));t._assign(t.multiple?i?new Set(s):s:s[0])}),t._assign=xs(r)},mounted(t,{value:e}){cT(t,e)},beforeUpdate(t,e,n){t._assign=xs(n)},updated(t,{value:e}){cT(t,e)}};function cT(t,e){const n=t.multiple;if(!(n&&!ce(e)&&!Jl(e))){for(let r=0,i=t.options.length;r<i;r++){const s=t.options[r],o=kl(s);if(n)ce(e)?s.selected=C_(e,o)>-1:s.selected=e.has(o);else if(Uo(kl(s),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function kl(t){return"_value"in t?t._value:t.value}function zA(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const YA={created(t,e,n){Eh(t,e,n,null,"created")},mounted(t,e,n){Eh(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){Eh(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){Eh(t,e,n,r,"updated")}};function aU(t,e){switch(t){case"SELECT":return oU;case"TEXTAREA":return aT;default:switch(e){case"checkbox":return iU;case"radio":return sU;default:return aT}}}function Eh(t,e,n,r,i){const o=aU(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}const kd={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):kc(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),kc(t,!0),r.enter(t)):r.leave(t,()=>{kc(t,!1)}):kc(t,e))},beforeUnmount(t,{value:e}){kc(t,e)}};function kc(t,e){t.style.display=e?t._vod:"none"}const lU=Qt({patchProp:KV},xV);let uT;function cU(){return uT||(uT=lV(lU))}const uU=(...t)=>{const e=cU().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=dU(r);if(!i)return;const s=e._component;!ye(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function dU(t){return St(t)?document.querySelector(t):t}var ec=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n};function Wv(t){let[e,n]=t.split(" ");return n||(n=e==="top"||e==="bottom"?"start":e==="start"||e==="end"?"top":"center"),{side:e,align:n}}function Em(t){return{side:{center:"center",top:"bottom",bottom:"top",start:"end",end:"start"}[t.side],align:t.align}}function dT(t,e){var n,r;const{side:i,align:s}=t,{direction:o}=window.getComputedStyle(e),a=o==="ltr"?{start:"left",end:"right"}:{start:"right",end:"left"};return((n=a[i])!=null?n:i)+" "+((r=a[s])!=null?r:s)}class ef{constructor(e){let{x:n,y:r,width:i,height:s}=e;this.x=n,this.y=r,this.width=i,this.height=s}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function z_(t){const e=t.getBoundingClientRect(),n=getComputedStyle(t),r=n.transform;if(r){let i,s,o,a,l;if(r.startsWith("matrix3d("))i=r.slice(9,-1).split(/, /),s=+i[0],o=+i[5],a=+i[12],l=+i[13];else if(r.startsWith("matrix("))i=r.slice(7,-1).split(/, /),s=+i[0],o=+i[3],a=+i[4],l=+i[5];else return new ef(e);const c=n.transformOrigin,u=e.x-a-(1-s)*parseFloat(c),d=e.y-l-(1-o)*parseFloat(c.slice(c.indexOf(" ")+1)),h=s?e.width/s:t.offsetWidth,f=o?e.height/o:t.offsetHeight;return new ef({x:u,y:d,width:h,height:f})}else return new ef(e)}function QA(t,e,n){if(n&&(e={_isVue:!0,$parent:n,$options:e}),e){if(e.$_alreadyWarned=e.$_alreadyWarned||[],e.$_alreadyWarned.includes(t))return;e.$_alreadyWarned.push(t)}return`[Vuetify] ${t}`+(e?pU(e):"")}function Do(t,e,n){const r=QA(t,e,n);r!=null&&console.warn(r)}function hT(t,e,n){const r=QA(t,e,n);r!=null&&console.error(r)}const hU=/(?:^|[-_])(\w)/g,fU=t=>t.replace(hU,e=>e.toUpperCase()).replace(/[-_]/g,"");function Tm(t,e){if(t.$root===t)return"<Root>";const n=typeof t=="function"&&t.cid!=null?t.options:t._isVue?t.$options||t.constructor.options:t||{};let r=n.name||n._componentTag;const i=n.__file;if(!r&&i){const s=i.match(/([^/\\]+)\.vue$/);r=s==null?void 0:s[1]}return(r?`<${fU(r)}>`:"<Anonymous>")+(i&&e!==!1?` at ${i}`:"")}function pU(t){if(t._isVue&&t.$parent){const e=[];let n=0;for(;t;){if(e.length>0){const r=e[e.length-1];if(r.constructor===t.constructor){n++,t=t.$parent;continue}else n>0&&(e[e.length-1]=[r,n],n=0)}e.push(t),t=t.$parent}return`

found in

`+e.map((r,i)=>`${i===0?"---> ":" ".repeat(5+i*2)}${Array.isArray(r)?`${Tm(r[0])}... (${r[1]} recursive calls)`:Tm(r)}`).join(`
`)}else return`

(found in ${Tm(t)})`}function fT(t,e,n){gU(t,e),e.set(t,n)}function gU(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mU(t,e,n){var r=XA(t,e,"set");return vU(t,r,n),n}function vU(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function ao(t,e){var n=XA(t,e,"get");return yU(t,n)}function XA(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function yU(t,e){return e.get?e.get.call(t):e.value}function JA(t,e,n){const r=e.length-1;if(r<0)return t===void 0?n:t;for(let i=0;i<r;i++){if(t==null)return n;t=t[e[i]]}return t==null||t[e[r]]===void 0?n:t[e[r]]}function Y_(t,e){if(t===e)return!0;if(t instanceof Date&&e instanceof Date&&t.getTime()!==e.getTime()||t!==Object(t)||e!==Object(e))return!1;const n=Object.keys(t);return n.length!==Object.keys(e).length?!1:n.every(r=>Y_(t[r],e[r]))}function Hv(t,e,n){return t==null||!e||typeof e!="string"?n:t[e]!==void 0?t[e]:(e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,""),JA(t,e.split("."),n))}function Ni(t,e,n){if(e==null)return t===void 0?n:t;if(t!==Object(t))return n;if(typeof e=="string")return Hv(t,e,n);if(Array.isArray(e))return JA(t,e,n);if(typeof e!="function")return n;const r=e(t,n);return typeof r=="undefined"?n:r}function _U(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:t},(n,r)=>e+r)}function me(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(t==null||t===""))return isNaN(+t)?String(t):isFinite(+t)?`${Number(t)}${e}`:void 0}function Kv(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function wU(t){return t==null?void 0:t.$el}const pT=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function Ioe(t){return Object.keys(t)}function va(t,e){const n=Object.create(null),r=Object.create(null);for(const i in t)e.some(s=>s instanceof RegExp?s.test(i):s===i)?n[i]=t[i]:r[i]=t[i];return[n,r]}function ZA(t){return va(t,["class","style","id",/^data-/])}function Al(t){return t==null?[]:Array.isArray(t)?t:[t]}function bU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(e,Math.min(n,t))}function Bo(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r={};for(const i in t)r[i]=t[i];for(const i in e){const s=t[i],o=e[i];if(Kv(s)&&Kv(o)){r[i]=Bo(s,o,n);continue}if(Array.isArray(s)&&Array.isArray(o)&&n){r[i]=n(s,o);continue}r[i]=o}return r}function Hr(){return Hr._uid++}Hr._uid=0;function eR(t){return t.map(e=>e.type===at?eR(e.children):e).flat()}function Q_(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase()}function tu(t,e){if(!e||typeof e!="object")return[];if(Array.isArray(e))return e.map(n=>tu(t,n)).flat(1);if(Array.isArray(e.children))return e.children.map(n=>tu(t,n)).flat(1);if(e.component){if(Object.getOwnPropertySymbols(e.component.provides).includes(t))return[e.component];if(e.component.subTree)return tu(t,e.component.subTree).flat(1)}return[]}var Th=new WeakMap,Ba=new WeakMap;class IU{constructor(e){fT(this,Th,{writable:!0,value:[]}),fT(this,Ba,{writable:!0,value:0}),this.size=e}push(e){ao(this,Th)[ao(this,Ba)]=e,mU(this,Ba,(ao(this,Ba)+1)%this.size)}values(){return ao(this,Th).slice(ao(this,Ba)).concat(ao(this,Th).slice(0,ao(this,Ba)))}}const EU=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],TU=t=>t<=.0031308?t*12.92:1.055*t**(1/2.4)-.055,SU=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],CU=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4;function tR(t){const e=Array(3),n=TU,r=EU;for(let i=0;i<3;++i)e[i]=Math.round(bU(n(r[i][0]*t[0]+r[i][1]*t[1]+r[i][2]*t[2]))*255);return(e[0]<<16)+(e[1]<<8)+(e[2]<<0)}function X_(t){const e=[0,0,0],n=CU,r=SU,i=n((t>>16&255)/255),s=n((t>>8&255)/255),o=n((t>>0&255)/255);for(let a=0;a<3;++a)e[a]=r[a][0]*i+r[a][1]*s+r[a][2]*o;return e}const yf=.20689655172413793,kU=t=>t>yf**3?Math.cbrt(t):t/(3*yf**2)+4/29,AU=t=>t>yf?t**3:3*yf**2*(t-4/29);function nR(t){const e=kU,n=e(t[1]);return[116*n-16,500*(e(t[0]/.95047)-n),200*(n-e(t[2]/1.08883))]}function rR(t){const e=AU,n=(t[0]+16)/116;return[e(n+t[1]/500)*.95047,e(n),e(n-t[2]/200)*1.08883]}function gT(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}function _f(t){let e;if(typeof t=="number")e=t;else if(typeof t=="string"){let n=t.startsWith("#")?t.substring(1):t;n.length===3&&(n=n.split("").map(r=>r+r).join("")),n.length!==6&&Do(`'${t}' is not a valid rgb color`),e=parseInt(n,16)}else throw new TypeError(`Colors can only be numbers or strings, recieved ${t==null?t:t.constructor.name} instead`);return e<0?(Do(`Colors cannot be negative: '${t}'`),e=0):(e>16777215||isNaN(e))&&(Do(`'${t}' is not a valid rgb color`),e=16777215),e}function RU(t){let e=t.toString(16);return e.length<6&&(e="0".repeat(6-e.length)+e),"#"+e}function iR(t){const e=_f(t);return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255}}function NU(t,e){const n=nR(X_(t));return n[0]=n[0]+e*10,tR(rR(n))}function xU(t,e){const n=nR(X_(t));return n[0]=n[0]-e*10,tR(rR(n))}function PU(t){const e=_f(t);return X_(e)[1]}const wf=Symbol.for("vuetify:defaults");function OU(t){return X(t!=null?t:{})}function sR(){const t=Ke(wf);if(!t)throw new Error("[Vuetify] Could not find defaults instance");return t}function tc(t,e){const n=sR(),r=X(t),i=I(()=>{const s=oi(e==null?void 0:e.scoped),o=oi(e==null?void 0:e.reset),a=oi(e==null?void 0:e.root);let l=Bo(r.value,{prev:n.value});if(s)return l;if(o||a){const c=Number(o||1/0);for(let u=0;u<=c&&l.prev;u++)l=l.prev;return l}return Bo(l.prev,l)});return Kt(wf,i),i}function DU(t,e){var n,r;return((n=t.props)==null?void 0:n.hasOwnProperty(e))||((r=t.props)==null?void 0:r.hasOwnProperty(Q_(e)))}const _e=function(e){var n;if(e._setup=(n=e._setup)!=null?n:e.setup,!e.name)return Do("The component is missing an explicit name, unable to generate default prop value"),e;if(e._setup){var r;e.props=(r=e.props)!=null?r:{},e.props._as=String,e.setup=function(s,o){const a=jp(),l=sR(),c=sA(),u=eA(E({},Pe(s)));zs(()=>{var f;const p=l.value.global,g=l.value[(f=s._as)!=null?f:e.name];if(g){const b=Object.entries(g).filter(T=>{let[C]=T;return C.startsWith("V")});b.length&&(c.value=Object.fromEntries(b))}for(const b of Object.keys(s)){let T;if(DU(a.vnode,b))T=s[b];else{var m,v;T=(m=(v=g==null?void 0:g[b])!=null?v:p==null?void 0:p[b])!=null?m:s[b]}u[b]!==T&&(u[b]=T)}});const d=e._setup(u,o);let h;return $e(c,(f,p)=>{!f&&h?h.stop():f&&!p&&(h=Cd(),h.run(()=>{tc(f)}))},{immediate:!0}),d}}return e};function Yn(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e=>(t?_e:Fp)(e)}function Kr(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return _e({name:n!=null?n:Gs(Er(t.replace(/__/g,"-"))),props:{tag:{type:String,default:e}},setup(r,i){let{slots:s}=i;return()=>{var o;return Rr(r.tag,{class:t},(o=s.default)==null?void 0:o.call(s))}}})}function oR(t){if(typeof t.getRootNode!="function"){for(;t.parentNode;)t=t.parentNode;return t!==document?null:document}const e=t.getRootNode();return e!==document&&e.getRootNode({composed:!0})!==document?null:e}const bf="cubic-bezier(0.4, 0, 0.2, 1)",MU="cubic-bezier(0.0, 0, 0.2, 1)",LU="cubic-bezier(0.4, 0, 1, 1)";function ur(t,e){const n=jp();if(!n)throw new Error(`[Vuetify] ${t} ${e||"must be called from inside a setup function"}`);return n}function Xi(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";return Q_((t=ur(e).type)==null?void 0:t.name)}function aR(t){for(;t;){if(J_(t))return t;t=t.parentElement}return document.scrollingElement}function Gv(t){const e=[];for(;t;)J_(t)&&e.push(t),t=t.parentElement;return e}function J_(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return e.overflowY==="scroll"||e.overflowY==="auto"&&t.scrollHeight>t.clientHeight}const bt=typeof window!="undefined",Z_=bt&&"IntersectionObserver"in window,FU=bt&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),zv=bt&&CSS.supports("selector(:focus-visible)");function $U(t){for(;t;){if(window.getComputedStyle(t).position==="fixed")return!0;t=t.offsetParent}return!1}function De(t,e){return n=>Object.keys(t).reduce((r,i)=>{const o=typeof t[i]=="object"&&t[i]!=null&&!Array.isArray(t[i])?t[i]:{type:t[i]};return n&&i in n?r[i]=Ee(E({},o),{default:n[i]}):r[i]=o,e&&(r[i].source=e),r},{})}function Ft(t){const e=ur("useRender");e.render=t}const mT=["x-small","small","default","large","x-large"],Wp=De({size:{type:[String,Number],default:"default"}},"size");function Hp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xi();const n=I(()=>mT.includes(t.size)?`${e}--size-${t.size}`:null),r=I(()=>!mT.includes(t.size)&&t.size?{width:me(t.size),height:me(t.size)}:null);return{sizeClasses:n,sizeStyles:r}}const nn=De({tag:{type:String,default:"div"}},"tag"),VU={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sort:"mdi-arrow-up",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"},UU={component:t=>Rr(lR,Ee(E({},t),{class:"mdi"}))},It=[String,Function,Object],Yv=Symbol.for("vuetify:icons"),Kp=De({icon:{type:It,required:!0},tag:{type:String,required:!0}},"icon"),BU=_e({name:"VComponentIcon",props:Kp(),setup(t){return()=>y(t.tag,null,{default:()=>[y(t.icon,null,null)]})}}),jU=_e({name:"VSvgIcon",inheritAttrs:!1,props:Kp(),setup(t,e){let{attrs:n}=e;return()=>y(t.tag,ct(n,{style:null}),{default:()=>[y("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[y("path",{d:t.icon},null)])]})}}),qU=_e({name:"VLigatureIcon",props:Kp(),setup(t){return()=>y(t.tag,null,{default:()=>[t.icon]})}}),lR=_e({name:"VClassIcon",props:Kp(),setup(t){return()=>y(t.tag,{class:t.icon},null)}}),WU={svg:{component:jU},class:{component:lR}};function HU(t){return Bo({defaultSet:"mdi",sets:Ee(E({},WU),{mdi:UU}),aliases:VU},t)}const KU=t=>{const e=Ke(Yv);if(!e)throw new Error("Missing Vuetify Icons provide!");return{iconData:I(()=>{const r=pt(t)?t.value:t.icon;if(!r)throw new Error("Icon value is undefined or null");let i=r;if(typeof r=="string"&&r.includes("$")){var s;i=(s=e.aliases)==null?void 0:s[r.slice(r.indexOf("$")+1)]}if(!i)throw new Error(`Could not find aliased icon "${r}"`);if(typeof i!="string")return{component:BU,icon:i};const o=Object.keys(e.sets).find(c=>typeof i=="string"&&i.startsWith(`${c}:`)),a=o?i.slice(o.length+1):i;return{component:e.sets[o!=null?o:e.defaultSet].component,icon:a}})}};function ew(t){const e=I(()=>gT(t.value.background)),n=I(()=>gT(t.value.text)),r=I(()=>{const s=[];return t.value.background&&!e.value&&s.push(`bg-${t.value.background}`),t.value.text&&!n.value&&s.push(`text-${t.value.text}`),s}),i=I(()=>{const s={};return t.value.background&&e.value&&(s.backgroundColor=t.value.background),t.value.text&&n.value&&(s.color=t.value.text,s.caretColor=t.value.text),s});return{colorClasses:r,colorStyles:i}}function Ps(t,e){const n=I(()=>({text:pt(t)?t.value:e?t[e]:null})),{colorClasses:r,colorStyles:i}=ew(n);return{textColorClasses:r,textColorStyles:i}}function Wi(t,e){const n=I(()=>({background:pt(t)?t.value:e?t[e]:null})),{colorClasses:r,colorStyles:i}=ew(n);return{backgroundColorClasses:r,backgroundColorStyles:i}}const ja=2.4,vT=.2126729,yT=.7151522,_T=.072175,GU=.55,zU=.58,YU=.57,QU=.62,Sh=.03,wT=1.45,XU=5e-4,JU=1.25,ZU=1.25,bT=.078,IT=12.82051282051282,Ch=.06,ET=.001;function TT(t,e){const n=((t>>16&255)/255)**ja,r=((t>>8&255)/255)**ja,i=((t>>0&255)/255)**ja,s=((e>>16&255)/255)**ja,o=((e>>8&255)/255)**ja,a=((e>>0&255)/255)**ja;let l=n*vT+r*yT+i*_T,c=s*vT+o*yT+a*_T;if(l<=Sh&&(l+=(Sh-l)**wT),c<=Sh&&(c+=(Sh-c)**wT),Math.abs(c-l)<XU)return 0;let u;if(c>l){const d=(c**GU-l**zU)*JU;u=d<ET?0:d<bT?d-d*IT*Ch:d-Ch}else{const d=(c**QU-l**YU)*ZU;u=d>-ET?0:d>-bT?d-d*IT*Ch:d+Ch}return u*100}const If=Symbol.for("vuetify:theme"),kn=De({theme:String},"theme"),Ac={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"kbd-background-color":"#212529","kbd-color":"#FFFFFF","code-background-color":"#C2C2C2"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"kbd-background-color":"#212529","kbd-color":"#FFFFFF","code-background-color":"#B7B7B7"}}}};function eB(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ac;if(!t)return Ee(E({},Ac),{isDisabled:!0});const e={};for(const[s,o]of Object.entries((n=t.themes)!=null?n:{})){var n,r,i;const a=o.dark?(r=Ac.themes)==null?void 0:r.dark:(i=Ac.themes)==null?void 0:i.light;e[s]=Bo(a,o)}return Bo(Ac,Ee(E({},t),{themes:e}))}function tB(t,e){const n=t._context.provides.usehead,r=bn(eB(e)),i=X(r.defaultTheme),s=X(r.themes),o=I(()=>{const u={};for(const[d,h]of Object.entries(s.value)){const f=u[d]=Ee(E({},h),{colors:E({},h.colors)});if(r.variations)for(const p of r.variations.colors){const g=f.colors[p];for(const m of["lighten","darken"]){const v=m==="lighten"?NU:xU;for(const b of _U(r.variations[m],1))f.colors[`${p}-${m}-${b}`]=RU(v(_f(g),b))}}for(const p of Object.keys(f.colors)){if(/on-[a-z]/.test(p)||f.colors[`on-${p}`])continue;const g=`on-${p}`,m=_f(f.colors[p]),v=Math.abs(TT(0,m)),b=Math.abs(TT(16777215,m));f.colors[g]=b>Math.min(v,50)?"#fff":"#000"}}return u}),a=I(()=>o.value[i.value]),l=I(()=>{const u=[];a.value.dark&&qa(u,":root",["color-scheme: dark"]);for(const[h,f]of Object.entries(o.value)){const{variables:p,dark:g}=f;qa(u,`.v-theme--${h}`,[`color-scheme: ${g?"dark":"normal"}`,...nB(f),...Object.keys(p).map(m=>{const v=p[m],b=typeof v=="string"&&v.startsWith("#")?iR(v):void 0,T=b?`${b.r}, ${b.g}, ${b.b}`:void 0;return`--v-${m}: ${T!=null?T:v}`})])}const d=new Set(Object.values(o.value).flatMap(h=>Object.keys(h.colors)));for(const h of d)/on-[a-z]/.test(h)?qa(u,`.${h}`,[`color: rgb(var(--v-theme-${h})) !important`]):(qa(u,`.bg-${h}`,[`--v-theme-overlay-multiplier: var(--v-theme-${h}-overlay-multiplier)`,`background: rgb(var(--v-theme-${h})) !important`,`color: rgb(var(--v-theme-on-${h})) !important`]),qa(u,`.text-${h}`,[`color: rgb(var(--v-theme-${h})) !important`]),qa(u,`.border-${h}`,[`--v-border-color: var(--v-theme-${h})`]));return u.map((h,f)=>f===0?h:`    ${h}`).join("")});if(n)n.addHeadObjs(I(()=>({style:[{children:l.value,type:"text/css",id:"vuetify-theme-stylesheet"}]}))),bt&&zs(()=>n.updateDOM());else{let d=function(){if(!r.isDisabled){if(typeof document!="undefined"&&!u){const h=document.createElement("style");h.type="text/css",h.id="vuetify-theme-stylesheet",u=h,document.head.appendChild(u)}u&&(u.innerHTML=l.value)}},u;$e(l,d,{immediate:!0})}const c=I(()=>r.isDisabled?void 0:`v-theme--${i.value}`);return{isDisabled:r.isDisabled,name:i,themes:s,current:a,computedThemes:o,themeClasses:c,styles:l}}function Qn(t){ur("provideTheme");const e=Ke(If,null);if(!e)throw new Error("Could not find Vuetify theme injection");const n=I(()=>{var s;return(s=t.theme)!=null?s:e==null?void 0:e.name.value}),r=I(()=>e.isDisabled?void 0:`v-theme--${n.value}`),i=Ee(E({},e),{name:n,themeClasses:r});return Kt(If,i),i}function qa(t,e,n){t.push(`${e} {
`,...n.map(r=>`  ${r};
`),`}
`)}function nB(t){const e=t.dark?2:1,n=t.dark?1:2,r=[];for(const[i,s]of Object.entries(t.colors)){const o=iR(s);r.push(`--v-theme-${i}: ${o.r},${o.g},${o.b}`),i.startsWith("on-")||r.push(`--v-theme-${i}-overlay-multiplier: ${PU(s)>.18?e:n}`)}return r}const cR=De(E(E(E({color:String,start:Boolean,end:Boolean,icon:It},Wp()),nn({tag:"i"})),kn()),"v-icon"),Kn=_e({name:"VIcon",props:cR(),setup(t,e){let{attrs:n,slots:r}=e,i;r.default&&(i=I(()=>{var u,d;const h=(u=r.default)==null?void 0:u.call(r);if(!!h)return(d=eR(h).filter(f=>f.children&&typeof f.children=="string")[0])==null?void 0:d.children}));const{themeClasses:s}=Qn(t),{iconData:o}=KU(i||t),{sizeClasses:a}=Hp(t),{textColorClasses:l,textColorStyles:c}=Ps(Se(t,"color"));return()=>y(o.value.component,{tag:t.tag,icon:o.value.icon,class:["v-icon","notranslate",a.value,l.value,s.value,{"v-icon--clickable":!!n.onClick,"v-icon--start":t.start,"v-icon--end":t.end}],style:[a.value?void 0:{fontSize:me(t.size),width:me(t.size),height:me(t.size)},c.value],"aria-hidden":"true"},null)}});const rB=_e({name:"VDivider",props:E({color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean},kn()),setup(t,e){let{attrs:n}=e;const{themeClasses:r}=Qn(t),{backgroundColorClasses:i,backgroundColorStyles:s}=Wi(Se(t,"color")),o=I(()=>{const a={};return t.length&&(a[t.vertical?"maxHeight":"maxWidth"]=me(t.length)),t.thickness&&(a[t.vertical?"borderRightWidth":"borderTopWidth"]=me(t.thickness)),a});return()=>y("hr",{class:[{"v-divider":!0,"v-divider--inset":t.inset,"v-divider--vertical":t.vertical},r.value,i.value],style:[o.value,s.value],"aria-orientation":!n.role||n.role==="separator"?t.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null)}}),nu=Fp({name:"VDefaultsProvider",props:{defaults:Object,reset:[Number,String],root:Boolean,scoped:Boolean},setup(t,e){let{slots:n}=e;const{defaults:r,reset:i,root:s,scoped:o}=lA(t);return tc(r,{reset:i,root:s,scoped:o}),()=>{var a;return(a=n.default)==null?void 0:a.call(n)}}});function rn(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top center 0",n=arguments.length>2?arguments[2]:void 0;return _e({name:t,props:{group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:{type:String,default:n},origin:{type:String,default:e}},setup(r,i){let{slots:s}=i;return()=>{const o=r.group?JV:hi;return Rr(o,{name:t,mode:r.mode,onBeforeEnter(a){a.style.transformOrigin=r.origin},onLeave(a){if(r.leaveAbsolute){const{offsetTop:l,offsetLeft:c,offsetWidth:u,offsetHeight:d}=a;a._transitionInitialStyles={position:a.style.position,top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height},a.style.position="absolute",a.style.top=`${l}px`,a.style.left=`${c}px`,a.style.width=`${u}px`,a.style.height=`${d}px`}r.hideOnLeave&&a.style.setProperty("display","none","important")},onAfterLeave(a){if(r.leaveAbsolute&&a!=null&&a._transitionInitialStyles){const{position:l,top:c,left:u,width:d,height:h}=a._transitionInitialStyles;delete a._transitionInitialStyles,a.style.position=l||"",a.style.top=c||"",a.style.left=u||"",a.style.width=d||"",a.style.height=h||""}}},s.default)}}})}function uR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return _e({name:t,props:{mode:{type:String,default:n}},setup(r,i){let{slots:s}=i;return()=>Rr(hi,E({name:t},e),s.default)}})}function dR(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",r=Er(`offset-${n}`);return{onBeforeEnter(o){o._parent=o.parentNode,o._initialStyle={transition:o.style.transition,overflow:o.style.overflow,[n]:o.style[n]}},onEnter(o){const a=o._initialStyle;o.style.setProperty("transition","none","important"),o.style.overflow="hidden";const l=`${o[r]}px`;o.style[n]="0",o.offsetHeight,o.style.transition=a.transition,t&&o._parent&&o._parent.classList.add(t),requestAnimationFrame(()=>{o.style[n]=l})},onAfterEnter:s,onEnterCancelled:s,onLeave(o){o._initialStyle={transition:"",overflow:o.style.overflow,[n]:o.style[n]},o.style.overflow="hidden",o.style[n]=`${o[r]}px`,o.offsetHeight,requestAnimationFrame(()=>o.style[n]="0")},onAfterLeave:i,onLeaveCancelled:i};function i(o){t&&o._parent&&o._parent.classList.remove(t),s(o)}function s(o){const a=o._initialStyle[n];o.style.overflow=o._initialStyle.overflow,a!=null&&(o.style[n]=a),delete o._initialStyle}}const hR=_e({name:"VDialogTransition",props:{target:Object},setup(t,e){let{slots:n}=e;const r={onBeforeEnter(i){i.style.pointerEvents="none"},async onEnter(i,s){var o;await new Promise(f=>requestAnimationFrame(f));const{x:a,y:l,sx:c,sy:u,speed:d}=CT(t.target,i),h=i.animate([{transform:`translate(${a}px, ${l}px) scale(${c}, ${u})`,opacity:0},{transform:""}],{duration:225*d,easing:MU});(o=ST(i))==null||o.forEach(f=>{f.animate([{opacity:0},{opacity:0,offset:.33},{opacity:1}],{duration:225*2*d,easing:bf})}),h.finished.then(()=>s())},onAfterEnter(i){i.style.removeProperty("pointer-events")},onBeforeLeave(i){i.style.pointerEvents="none"},async onLeave(i,s){var o;await new Promise(f=>requestAnimationFrame(f));const{x:a,y:l,sx:c,sy:u,speed:d}=CT(t.target,i);i.animate([{transform:""},{transform:`translate(${a}px, ${l}px) scale(${c}, ${u})`,opacity:0}],{duration:125*d,easing:LU}).finished.then(()=>s()),(o=ST(i))==null||o.forEach(f=>{f.animate([{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*d,easing:bf})})},onAfterLeave(i){i.style.removeProperty("pointer-events")}};return()=>t.target?y(hi,ct({name:"dialog-transition"},r,{css:!1}),n):y(hi,{name:"dialog-transition"},n)}});function ST(t){var e;const n=(e=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:e.children;return n&&[...n]}function CT(t,e){const n=t.getBoundingClientRect(),r=z_(e),[i,s]=getComputedStyle(e).transformOrigin.split(" ").map(v=>parseFloat(v)),[o,a]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=n.left+n.width/2;o==="left"||a==="left"?l-=n.width/2:(o==="right"||a==="right")&&(l+=n.width/2);let c=n.top+n.height/2;o==="top"||a==="top"?c-=n.height/2:(o==="bottom"||a==="bottom")&&(c+=n.height/2);const u=n.width/r.width,d=n.height/r.height,h=Math.max(1,u,d),f=u/h,p=d/h,g=r.width*r.height/(window.innerWidth*window.innerHeight),m=g>.12?Math.min(1.5,(g-.12)*10+1):1;return{x:l-(i+r.left),y:c-(s+r.top),sx:f,sy:p,speed:m}}rn("carousel-transition");rn("carousel-reverse-transition");rn("tab-transition");rn("tab-reverse-transition");rn("menu-transition");rn("fab-transition","center center","out-in");rn("dialog-bottom-transition");rn("dialog-top-transition");rn("fade-transition");rn("scale-transition");rn("scroll-x-transition");rn("scroll-x-reverse-transition");rn("scroll-y-transition");rn("scroll-y-reverse-transition");rn("slide-x-transition");rn("slide-x-reverse-transition");const fR=rn("slide-y-transition");rn("slide-y-reverse-transition");const pR=uR("expand-transition",dR()),iB=uR("expand-x-transition",dR("",!0)),Qv=Symbol.for("vuetify:list");function gR(){const t=Ke(Qv,{hasPrepend:X(!1),updateHasPrepend:()=>null}),e={hasPrepend:X(!1),updateHasPrepend:n=>{n&&(e.hasPrepend.value=n)}};return Kt(Qv,e),t}function mR(){return Ke(Qv,null)}function yn(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:l=>l,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:l=>l;const s=ur("useProxiedModel"),o=I(()=>{var l,c;return!!(typeof t[e]!="undefined"&&(s!=null&&(l=s.vnode.props)!=null&&l.hasOwnProperty(e)||s!=null&&(c=s.vnode.props)!=null&&c.hasOwnProperty(Q_(e))))}),a=X(r(t[e]));return I({get(){return o.value?r(t[e]):a.value},set(l){(o.value?r(t[e]):a.value)!==l&&(a.value=l,s==null||s.emit(`update:${e}`,i(l)))}})}const sB={open:t=>{let{id:e,value:n,opened:r,parents:i}=t;if(n){const s=new Set;s.add(e);let o=i.get(e);for(;o!=null;)s.add(o),o=i.get(o);return s}else return r.delete(e),r},select:()=>null},vR={open:t=>{let{id:e,value:n,opened:r,parents:i}=t;if(n){let s=i.get(e);for(r.add(e);s!=null&&s!==e;)r.add(s),s=i.get(s);return r}else r.delete(e);return r},select:()=>null},oB={open:vR.open,select:t=>{let{id:e,value:n,opened:r,parents:i}=t;if(!n)return r;const s=[];let o=i.get(e);for(;o!=null;)s.push(o),o=i.get(o);return new Set(s)}},tw=t=>{const e={select:n=>{let{id:r,value:i,selected:s}=n;if(t&&!i){const o=Array.from(s.entries()).reduce((a,l)=>{let[c,u]=l;return u==="on"?[...a,c]:a},[]);if(o.length===1&&o[0]===r)return s}return s.set(r,i?"on":"off"),s},in:(n,r,i)=>{let s=new Map;for(const o of n||[])s=e.select({id:o,value:!0,selected:new Map(s),children:r,parents:i});return s},out:n=>{const r=[];for(const[i,s]of n.entries())s==="on"&&r.push(i);return r}};return e},yR=t=>{const e=tw(t);return{select:r=>{let l=r,{selected:i,id:s}=l,o=Ti(l,["selected","id"]);const a=i.has(s)?new Map([[s,i.get(s)]]):new Map;return e.select(Ee(E({},o),{id:s,selected:a}))},in:(r,i,s)=>{let o=new Map;return r!=null&&r.length&&(o=e.in(r.slice(0,1),i,s)),o},out:(r,i,s)=>e.out(r,i,s)}},aB=t=>{const e=tw(t);return{select:r=>{let l=r,{id:i,selected:s,children:o}=l,a=Ti(l,["id","selected","children"]);return o.has(i)?s:e.select(E({id:i,selected:s,children:o},a))},in:e.in,out:e.out}},lB=t=>{const e=yR(t);return{select:r=>{let l=r,{id:i,selected:s,children:o}=l,a=Ti(l,["id","selected","children"]);return o.has(i)?s:e.select(E({id:i,selected:s,children:o},a))},in:e.in,out:e.out}},cB=t=>{const e={select:n=>{let{id:r,value:i,selected:s,children:o,parents:a}=n;const l=new Map(s),c=[r];for(;c.length;){const d=c.shift();s.set(d,i?"on":"off"),o.has(d)&&c.push(...o.get(d))}let u=a.get(r);for(;u;){const d=o.get(u),h=d.every(p=>s.get(p)==="on"),f=d.every(p=>!s.has(p)||s.get(p)==="off");s.set(u,h?"on":f?"off":"indeterminate"),u=a.get(u)}return t&&!i&&Array.from(s.entries()).reduce((h,f)=>{let[p,g]=f;return g==="on"?[...h,p]:h},[]).length===0?l:s},in:(n,r,i)=>{let s=new Map;for(const o of n||[])s=e.select({id:o,value:!0,selected:new Map(s),children:r,parents:i});return s},out:(n,r)=>{const i=[];for(const[s,o]of n.entries())o==="on"&&!r.has(s)&&i.push(s);return i}};return e},xu=Symbol.for("vuetify:nested"),_R={id:X(),root:{register:()=>null,unregister:()=>null,parents:X(new Map),children:X(new Map),open:()=>null,select:()=>null,opened:X(new Set),selected:X(new Map),selectedValues:X([])}},uB=De({selectStrategy:[String,Function],openStrategy:[String,Function],opened:Array,selected:Array,mandatory:Boolean},"nested"),dB=t=>{let e=!1;const n=X(new Map),r=X(new Map),i=yn(t,"opened",t.opened,d=>new Set(d),d=>[...d.values()]),s=I(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;switch(t.selectStrategy){case"single-leaf":return lB(t.mandatory);case"leaf":return aB(t.mandatory);case"independent":return tw(t.mandatory);case"single-independent":return yR(t.mandatory);case"classic":default:return cB(t.mandatory)}}),o=I(()=>{if(typeof t.openStrategy=="function")return t.openStrategy;switch(t.openStrategy){case"list":return oB;case"single":return sB;case"multiple":default:return vR}}),a=yn(t,"selected",t.selected,d=>s.value.in(d,n.value,r.value),d=>s.value.out(d,n.value,r.value));Wr(()=>{e=!0});function l(d){const h=[];let f=d;for(;f!=null;)h.unshift(f),f=r.value.get(f);return h}const c=ur("nested"),u={id:X(),root:{opened:i,selected:a,selectedValues:I(()=>{const d=[];for(const[h,f]of a.value.entries())f==="on"&&d.push(h);return d}),register:(d,h,f)=>{h&&d!==h&&r.value.set(d,h),f&&n.value.set(d,[]),h!=null&&n.value.set(h,[...n.value.get(h)||[],d])},unregister:d=>{if(e)return;n.value.delete(d);const h=r.value.get(d);if(h){var f;const p=(f=n.value.get(h))!=null?f:[];n.value.set(h,p.filter(g=>g!==d))}r.value.delete(d),i.value.delete(d)},open:(d,h,f)=>{c.emit("click:open",{id:d,value:h,path:l(d),event:f});const p=o.value.open({id:d,value:h,opened:new Set(i.value),children:n.value,parents:r.value,event:f});p&&(i.value=p)},select:(d,h,f)=>{c.emit("click:select",{id:d,value:h,path:l(d),event:f});const p=s.value.select({id:d,value:h,selected:new Map(a.value),children:n.value,parents:r.value,event:f});p&&(a.value=p);const g=o.value.select({id:d,value:h,selected:new Map(a.value),opened:new Set(i.value),children:n.value,parents:r.value,event:f});g&&(i.value=g)},children:n,parents:r}};return Kt(xu,u),u.root},wR=(t,e)=>{const n=Ke(xu,_R),r=I(()=>{var s;return(s=t.value)!=null?s:Hr().toString()}),i=Ee(E({},n),{id:r,open:(s,o)=>n.root.open(r.value,s,o),isOpen:I(()=>n.root.opened.value.has(r.value)),parent:I(()=>n.root.parents.value.get(r.value)),select:(s,o)=>n.root.select(r.value,s,o),isSelected:I(()=>n.root.selected.value.get(r.value)==="on"),isIndeterminate:I(()=>n.root.selected.value.get(r.value)==="indeterminate"),isLeaf:I(()=>!n.root.children.value.get(r.value)),isGroupActivator:n.isGroupActivator});return!n.isGroupActivator&&n.root.register(r.value,n.id.value,e),Wr(()=>{!n.isGroupActivator&&n.root.unregister(r.value)}),e&&Kt(xu,i),i},hB=()=>{const t=Ke(xu,_R);Kt(xu,Ee(E({},t),{isGroupActivator:!0}))},fB=_e({name:"VListGroupActivator",setup(t,e){let{slots:n}=e;return hB(),()=>{var r;return(r=n.default)==null?void 0:r.call(n)}}}),pB=Yn()({name:"VListGroup",props:E({activeColor:String,color:String,collapseIcon:{type:It,default:"$collapse"},expandIcon:{type:It,default:"$expand"},value:null},nn()),setup(t,e){let{slots:n}=e;const{isOpen:r,open:i}=wR(Se(t,"value"),!0),s=mR(),o=l=>{i(!r.value,l)},a=I(()=>{var l;return{onClick:o,active:r.value,appendIcon:r.value?t.collapseIcon:t.expandIcon,class:"v-list-group__header",color:r.value?(l=t.activeColor)!=null?l:t.color:void 0}});return()=>{var l;return y(t.tag,{class:["v-list-group",{"v-list-group--prepend":s==null?void 0:s.hasPrepend.value}]},{default:()=>[n.activator&&y(nu,{defaults:{VListItemIcon:{color:a.value.color}}},{default:()=>[y(fB,null,{default:()=>[n.activator({props:a.value,isOpen:r})]})]}),y(pR,null,{default:()=>[Tr(y("div",{class:"v-list-group__items"},[(l=n.default)==null?void 0:l.call(n)]),[[kd,r.value]])]})]})}}});const ya=De({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function _a(t){return{dimensionStyles:I(()=>({height:me(t.height),maxHeight:me(t.maxHeight),maxWidth:me(t.maxWidth),minHeight:me(t.minHeight),minWidth:me(t.minWidth),width:me(t.width)}))}}function gB(t){return{aspectStyles:I(()=>{const e=Number(t.aspectRatio);return e?{paddingBottom:String(1/e*100)+"%"}:void 0})}}const mB=_e({name:"VResponsive",props:E({aspectRatio:[String,Number],contentClass:String},ya()),setup(t,e){let{slots:n}=e;const{dimensionStyles:r}=_a(t),{aspectStyles:i}=gB(t);return()=>{var s;return y("div",{class:"v-responsive",style:r.value},[y("div",{class:"v-responsive__sizer",style:i.value},null),(s=n.additional)==null?void 0:s.call(n),n.default&&y("div",{class:["v-responsive__content",t.contentClass]},[n.default()])])}}});function vB(t,e){if(!Z_)return;const n=e.modifiers||{},r=e.value,{handler:i,options:s}=typeof r=="object"?r:{handler:r,options:{}},o=new IntersectionObserver(function(){var a;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1?arguments[1]:void 0;const u=(a=t._observe)==null?void 0:a[e.instance.$.uid];if(!u)return;const d=l.some(h=>h.isIntersecting);i&&(!n.quiet||u.init)&&(!n.once||d||u.init)&&i(d,l,c),d&&n.once?bR(t,e):u.init=!0},s);t._observe=Object(t._observe),t._observe[e.instance.$.uid]={init:!1,observer:o},o.observe(t)}function bR(t,e){var n;const r=(n=t._observe)==null?void 0:n[e.instance.$.uid];!r||(r.observer.unobserve(t),delete t._observe[e.instance.$.uid])}const yB={mounted:vB,unmounted:bR};var IR=yB;const nc=De({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:t=>t!==!0}},"transition"),To=(t,e)=>{var n;let{slots:r}=e;const l=t,{transition:i}=l,s=Ti(l,["transition"]);if(!i||typeof i=="boolean")return(n=r.default)==null?void 0:n.call(r);const c=typeof i=="object"?i:{},{component:o=hi}=c,a=Ti(c,["component"]);return Rr(o,ct(typeof i=="string"?{name:i}:a,s),r)},Gp=_e({name:"VImg",directives:{intersect:IR},props:E({aspectRatio:[String,Number],alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,width:[String,Number]},nc()),emits:["loadstart","load","error"],setup(t,e){let{emit:n,slots:r}=e;const i=X(""),s=X(),o=X(t.eager?"loading":"idle"),a=X(),l=X(),c=I(()=>t.src&&typeof t.src=="object"?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)}),u=I(()=>c.value.aspect||a.value/l.value||0);$e(()=>t.src,()=>{d(o.value!=="idle")}),Up(()=>d());function d(k){if(!(t.eager&&k)&&!(Z_&&!k&&!t.eager)){if(o.value="loading",c.value.lazySrc){const P=new Image;P.src=c.value.lazySrc,g(P,null)}!c.value.src||Ar(()=>{var P,O;if(n("loadstart",((P=s.value)==null?void 0:P.currentSrc)||c.value.src),(O=s.value)!=null&&O.complete){if(s.value.naturalWidth||f(),o.value==="error")return;u.value||g(s.value,null),h()}else u.value||g(s.value),p()})}}function h(){var k;p(),o.value="loaded",n("load",((k=s.value)==null?void 0:k.currentSrc)||c.value.src)}function f(){var k;o.value="error",n("error",((k=s.value)==null?void 0:k.currentSrc)||c.value.src)}function p(){const k=s.value;k&&(i.value=k.currentSrc||k.src)}function g(k){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const O=()=>{const{naturalHeight:W,naturalWidth:G}=k;W||G?(a.value=G,l.value=W):!k.complete&&o.value==="loading"&&P!=null?setTimeout(O,P):(k.currentSrc.endsWith(".svg")||k.currentSrc.startsWith("data:image/svg+xml"))&&(a.value=1,l.value=1)};O()}const m=I(()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover})),v=I(()=>{var k;if(!c.value.src||o.value==="idle")return;const P=Rr("img",{class:["v-img__img",m.value],src:c.value.src,srcset:c.value.srcset,sizes:t.sizes,ref:s,onLoad:h,onError:f}),O=(k=r.sources)==null?void 0:k.call(r);return y(To,{transition:t.transition,appear:!0},{default:()=>[Tr(O?y("picture",{class:"v-img__picture"},[O,P]):P,[[kd,o.value==="loaded"]])]})}),b=I(()=>y(To,{transition:t.transition},{default:()=>[c.value.lazySrc&&o.value!=="loaded"&&y("img",{class:["v-img__img","v-img__img--preload",m.value],src:c.value.lazySrc,alt:""},null)]})),T=I(()=>{if(!!r.placeholder)return y(To,{transition:t.transition,appear:!0},{default:()=>[(o.value==="loading"||o.value==="error"&&!r.error)&&y("div",{class:"v-img__placeholder"},[r.placeholder()])]})}),C=I(()=>{if(!!r.error)return y(To,{transition:t.transition,appear:!0},{default:()=>[o.value==="error"&&y("div",{class:"v-img__error"},[r.error()])]})}),S=I(()=>{if(!!t.gradient)return y("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null)}),A=X(!1);{const k=$e(u,P=>{P&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{A.value=!0})}),k())})}return Ft(()=>Tr(y(mB,{class:["v-img",{"v-img--booting":!A.value}],style:{width:me(t.width==="auto"?a.value:t.width)},aspectRatio:u.value,"aria-label":t.alt,role:t.alt?"img":void 0},{additional:()=>[v.value,b.value,S.value,T.value,C.value],default:r.default}),[[ma("intersect"),{handler:d,options:t.options},null,{once:!0}]])),{currentSrc:i,image:s,state:o,naturalWidth:a,naturalHeight:l}}}),_B=[null,"default","comfortable","compact"],Ys=De({density:{type:String,default:"default",validator:t=>_B.includes(t)}},"density");function Qs(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xi();return{densityClasses:I(()=>`${e}--density-${t.density}`)}}const Ji=De({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function Zi(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xi();return{roundedClasses:I(()=>{const r=pt(t)?t.value:t.rounded,i=[];if(r===!0||r==="")i.push(`${e}--rounded`);else if(typeof r=="string"||r===0)for(const s of String(r).split(" "))i.push(`rounded-${s}`);return i})}}const ER=De(E(E(E(E({color:String,start:Boolean,end:Boolean,icon:It,image:String},Ys()),Ji()),Wp()),nn())),Pu=_e({name:"VAvatar",props:ER(),setup(t,e){let{slots:n}=e;const{backgroundColorClasses:r,backgroundColorStyles:i}=Wi(Se(t,"color")),{densityClasses:s}=Qs(t),{roundedClasses:o}=Zi(t),{sizeClasses:a,sizeStyles:l}=Hp(t);return Ft(()=>{var c;return y(t.tag,{class:["v-avatar",{"v-avatar--start":t.start,"v-avatar--end":t.end},r.value,s.value,o.value,a.value],style:[i.value,l.value]},{default:()=>[t.image?y(Gp,{src:t.image,alt:""},null):t.icon?y(Kn,{icon:t.icon},null):(c=n.default)==null?void 0:c.call(n)]})}),{}}}),kT=_e({name:"VListItemAvatar",props:ER(),setup(t,e){let{slots:n}=e;return()=>y(Pu,ct({class:["v-list-item-avatar",{"v-list-item-avatar--start":t.start,"v-list-item-avatar--end":t.end}]},t),n)}}),wB=Kr("v-list-item-header"),AT=_e({name:"VListItemIcon",props:cR(),setup(t,e){let{slots:n}=e;return()=>y(Kn,ct({class:["v-list-item-icon",{"v-list-item-icon--start":t.start,"v-list-item-icon--end":t.end}]},t),n)}}),bB=Kr("v-list-item-subtitle"),TR=Kr("v-list-item-title"),IB=["outlined","plain","text","contained","contained-flat","contained-text"];function nw(t,e){return y(at,null,[t&&y("div",{class:`${e}__overlay`},null),y("div",{class:`${e}__underlay`},null)])}const Ad=De({color:String,variant:{type:String,default:"contained",validator:t=>IB.includes(t)}},"variant");function rw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xi();const n=I(()=>{const{variant:s}=oi(t);return`${e}--variant-${s}`}),{colorClasses:r,colorStyles:i}=ew(I(()=>{const{variant:s,color:o}=oi(t);return{[["contained","contained-flat"].includes(s)?"background":"text"]:o}}));return{colorClasses:r,colorStyles:i,variantClasses:n}}const wa=De({border:[Boolean,Number,String]},"border");function ba(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xi();return{borderClasses:I(()=>{const r=[];if(t.border!=null&&t.border!==!1&&r.push(`${e}--border`),typeof t.border=="string"&&t.border!==""||t.border===0)for(const i of String(t.border).split(" "))r.push(`border-${i}`);return r})}}const Ia=De({elevation:{type:[Number,String],validator(t){const e=parseInt(t);return!isNaN(e)&&e>=0&&e<=24}}},"elevation");function Ea(t){return{elevationClasses:I(()=>{const n=pt(t)?t.value:t.elevation,r=[];return n==null||r.push(`elevation-${n}`),r})}}function SR(){var t,e;return(t=ur("useRouter"))==null||(e=t.proxy)==null?void 0:e.$router}function iw(t,e){const n=z$("RouterLink"),r=I(()=>!!(t.href||t.to)),i=I(()=>(r==null?void 0:r.value)||!!(e.onClick||e.onClickOnce));if(typeof n=="string")return{isLink:r,isClickable:i,href:Se(t,"href")};const s=t.to?n.useLink(t):void 0;return Ee(E({},s),{isLink:r,isClickable:i,href:I(()=>t.to?s==null?void 0:s.route.value.href:t.href)})}const sw=De({href:String,replace:Boolean,to:[String,Object]},"router");let Sm=!1;function EB(t,e){let n=!1,r,i;bt&&(Ar(()=>{window.addEventListener("popstate",s),r=t==null?void 0:t.beforeEach((o,a,l)=>{Sm?n?e(l):l():setTimeout(()=>n?e(l):l()),Sm=!0}),i=t==null?void 0:t.afterEach(()=>{Sm=!1})}),ha(()=>{var o,a;window.removeEventListener("popstate",s),(o=r)==null||o(),(a=i)==null||a()}));function s(o){var a;(a=o.state)!=null&&a.replaced||(n=!0,setTimeout(()=>n=!1))}}const Xv=Symbol("rippleStop"),TB=80;function RT(t,e){t.style.transform=e,t.style.webkitTransform=e}function Cm(t,e){t.style.opacity=`calc(${e} * var(--v-theme-overlay-multiplier))`}function Jv(t){return t.constructor.name==="TouchEvent"}function CR(t){return t.constructor.name==="KeyboardEvent"}const SB=function(t,e){var n;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=0,s=0;if(!CR(t)){const h=e.getBoundingClientRect(),f=Jv(t)?t.touches[t.touches.length-1]:t;i=f.clientX-h.left,s=f.clientY-h.top}let o=0,a=.3;(n=e._ripple)!=null&&n.circle?(a=.15,o=e.clientWidth/2,o=r.center?o:o+Math.sqrt((i-o)**2+(s-o)**2)/4):o=Math.sqrt(e.clientWidth**2+e.clientHeight**2)/2;const l=`${(e.clientWidth-o*2)/2}px`,c=`${(e.clientHeight-o*2)/2}px`,u=r.center?l:`${i-o}px`,d=r.center?c:`${s-o}px`;return{radius:o,scale:a,x:u,y:d,centerX:l,centerY:c}},Ef={show(t,e){var n;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(e!=null&&(n=e._ripple)!=null&&n.enabled))return;const i=document.createElement("span"),s=document.createElement("span");i.appendChild(s),i.className="v-ripple__container",r.class&&(i.className+=` ${r.class}`);const{radius:o,scale:a,x:l,y:c,centerX:u,centerY:d}=SB(t,e,r),h=`${o*2}px`;s.className="v-ripple__animation",s.style.width=h,s.style.height=h,e.appendChild(i);const f=window.getComputedStyle(e);f&&f.position==="static"&&(e.style.position="relative",e.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),RT(s,`translate(${l}, ${c}) scale3d(${a},${a},${a})`),Cm(s,0),s.dataset.activated=String(performance.now()),setTimeout(()=>{s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),RT(s,`translate(${u}, ${d}) scale3d(1,1,1)`),Cm(s,.08)},0)},hide(t){var e;if(!(t!=null&&(e=t._ripple)!=null&&e.enabled))return;const n=t.getElementsByClassName("v-ripple__animation");if(n.length===0)return;const r=n[n.length-1];if(r.dataset.isHiding)return;r.dataset.isHiding="true";const i=performance.now()-Number(r.dataset.activated),s=Math.max(250-i,0);setTimeout(()=>{r.classList.remove("v-ripple__animation--in"),r.classList.add("v-ripple__animation--out"),Cm(r,0),setTimeout(()=>{t.getElementsByClassName("v-ripple__animation").length===1&&t.dataset.previousPosition&&(t.style.position=t.dataset.previousPosition,delete t.dataset.previousPosition),r.parentNode&&t.removeChild(r.parentNode)},300)},s)}};function kR(t){return typeof t=="undefined"||!!t}function Ou(t){const e={},n=t.currentTarget;if(!(!(n!=null&&n._ripple)||n._ripple.touched||t[Xv])){if(t[Xv]=!0,Jv(t))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(e.center=n._ripple.centered||CR(t),n._ripple.class&&(e.class=n._ripple.class),Jv(t)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{Ef.show(t,n,e)},n._ripple.showTimer=window.setTimeout(()=>{var r;n!=null&&(r=n._ripple)!=null&&r.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},TB)}else Ef.show(t,n,e)}}function NT(t){t[Xv]=!0}function nr(t){const e=t.currentTarget;if(!(!e||!e._ripple)){if(window.clearTimeout(e._ripple.showTimer),t.type==="touchend"&&e._ripple.showTimerCommit){e._ripple.showTimerCommit(),e._ripple.showTimerCommit=null,e._ripple.showTimer=window.setTimeout(()=>{nr(t)});return}window.setTimeout(()=>{e._ripple&&(e._ripple.touched=!1)}),Ef.hide(e)}}function AR(t){const e=t.currentTarget;!e||!e._ripple||(e._ripple.showTimerCommit&&(e._ripple.showTimerCommit=null),window.clearTimeout(e._ripple.showTimer))}let Du=!1;function RR(t){!Du&&(t.keyCode===pT.enter||t.keyCode===pT.space)&&(Du=!0,Ou(t))}function NR(t){Du=!1,nr(t)}function xR(t){Du&&(Du=!1,nr(t))}function PR(t,e,n){var r;const{value:i,modifiers:s}=e,o=kR(i);if(o||Ef.hide(t),t._ripple=(r=t._ripple)!=null?r:{},t._ripple.enabled=o,t._ripple.centered=s.center,t._ripple.circle=s.circle,Kv(i)&&i.class&&(t._ripple.class=i.class),o&&!n){if(s.stop){t.addEventListener("touchstart",NT,{passive:!0}),t.addEventListener("mousedown",NT);return}t.addEventListener("touchstart",Ou,{passive:!0}),t.addEventListener("touchend",nr,{passive:!0}),t.addEventListener("touchmove",AR,{passive:!0}),t.addEventListener("touchcancel",nr),t.addEventListener("mousedown",Ou),t.addEventListener("mouseup",nr),t.addEventListener("mouseleave",nr),t.addEventListener("keydown",RR),t.addEventListener("keyup",NR),t.addEventListener("blur",xR),t.addEventListener("dragstart",nr,{passive:!0})}else!o&&n&&OR(t)}function OR(t){t.removeEventListener("mousedown",Ou),t.removeEventListener("touchstart",Ou),t.removeEventListener("touchend",nr),t.removeEventListener("touchmove",AR),t.removeEventListener("touchcancel",nr),t.removeEventListener("mouseup",nr),t.removeEventListener("mouseleave",nr),t.removeEventListener("keydown",RR),t.removeEventListener("keyup",NR),t.removeEventListener("dragstart",nr),t.removeEventListener("blur",xR)}function CB(t,e){PR(t,e,!1)}function kB(t){delete t._ripple,OR(t)}function AB(t,e){if(e.value===e.oldValue)return;const n=kR(e.oldValue);PR(t,e,n)}const zp={mounted:CB,unmounted:kB,updated:AB},Mu=Yn()({name:"VListItem",directives:{Ripple:zp},props:E(E(E(E(E(E(E(E(E({active:Boolean,activeColor:String,activeClass:String,appendAvatar:String,appendIcon:It,disabled:Boolean,lines:String,nav:Boolean,prependAvatar:String,prependIcon:It,subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,link:Boolean},wa()),Ys()),ya()),Ia()),Ji()),sw()),nn()),kn()),Ad({variant:"text"})),setup(t,e){let{attrs:n,slots:r}=e;const i=iw(t,n),s=I(()=>{var G;return(G=t.value)!=null?G:i.href.value}),{select:o,isSelected:a,isIndeterminate:l,isGroupActivator:c,root:u,parent:d}=wR(s,!1),h=mR(),f=I(()=>{var G;return t.active||((G=i.isExactActive)==null?void 0:G.value)||a.value}),p=I(()=>t.rounded||t.nav),g=I(()=>{var G;return{color:f.value&&(G=t.activeColor)!=null?G:t.color,variant:t.variant}});ga(()=>{var G;(G=i.isExactActive)!=null&&G.value&&d.value!=null&&u.open(d.value,!0)}),$e(()=>{var G;return(G=i.isExactActive)==null?void 0:G.value},G=>{G&&d.value!=null&&u.open(d.value,!0)});const{themeClasses:m}=Qn(t),{borderClasses:v}=ba(t),{colorClasses:b,colorStyles:T,variantClasses:C}=rw(g),{densityClasses:S}=Qs(t),{dimensionStyles:A}=_a(t),{elevationClasses:k}=Ea(t),{roundedClasses:P}=Zi(p),O=I(()=>t.lines?`v-list-item--${t.lines}-line`:void 0),W=I(()=>({isActive:f.value,select:o,isSelected:a.value,isIndeterminate:l.value}));Ft(()=>{var G,B,ie;const oe=i.isLink.value?"a":t.tag,xe=!h||a.value||f.value,Ae=r.title||t.title,be=r.subtitle||t.subtitle,Ie=!!(Ae||be),st=!!(r.append||t.appendAvatar||t.appendIcon),kt=!!(r.prepend||t.prependAvatar||t.prependIcon),He=!t.disabled&&(t.link||i.isClickable.value||t.value!=null&&!!h);return h==null||h.updateHasPrepend(kt),Tr(y(oe,{class:["v-list-item",{"v-list-item--active":f.value,"v-list-item--disabled":t.disabled,"v-list-item--link":He,"v-list-item--nav":t.nav,"v-list-item--prepend":!kt&&(h==null?void 0:h.hasPrepend.value),[`${t.activeClass}`]:f.value},m.value,v.value,xe?b.value:void 0,S.value,k.value,O.value,P.value,C.value],style:[xe?T.value:void 0,A.value],href:i.href.value,tabindex:He?0:void 0,onClick:He&&(ln=>{var cn;c||((cn=i.navigate)==null||cn.call(i,ln),t.value!=null&&o(!a.value,ln))})},{default:()=>[nw(He||f.value,"v-list-item"),kt&&y(at,null,[t.prependAvatar&&y(kT,{image:t.prependAvatar,start:!0},null),t.prependIcon&&y(AT,{icon:t.prependIcon,start:!0},null),(G=r.prepend)==null?void 0:G.call(r,W.value)]),Ie&&y(wB,null,{default:()=>[Ae&&y(TR,null,{default:()=>[r.title?r.title({title:t.title}):t.title]}),be&&y(bB,null,{default:()=>[r.subtitle?r.subtitle({subtitle:t.subtitle}):t.subtitle]})]}),(B=r.default)==null?void 0:B.call(r,W.value),st&&y(at,null,[(ie=r.append)==null?void 0:ie.call(r,W.value),t.appendAvatar&&y(kT,{image:t.appendAvatar,end:!0},null),t.appendIcon&&y(AT,{icon:t.appendIcon,end:!0},null)])]}),[[ma("ripple"),He]])})}}),RB=_e({name:"VListSubheader",props:E({color:String,inset:Boolean,sticky:Boolean,title:String},nn()),setup(t,e){let{slots:n}=e;const{textColorClasses:r,textColorStyles:i}=Ps(Se(t,"color"));return()=>{var s,o;const a=!!(n.default||t.title);return y(t.tag,{class:["v-list-subheader",{"v-list-subheader--inset":t.inset,"v-list-subheader--sticky":t.sticky},r.value],style:{textColorStyles:i}},{default:()=>[a&&y("div",{class:"v-list-subheader__text"},[(s=(o=n.default)==null?void 0:o.call(n))!=null?s:t.title])]})}}}),DR=Yn()({name:"VListChildren",props:{items:Array},setup(t,e){let{slots:n}=e;return gR(),()=>{var r,i,s;return(r=(i=n.default)==null?void 0:i.call(n))!=null?r:(s=t.items)==null?void 0:s.map(o=>{let{children:a,props:l,type:c,originalItem:u}=o;if(c==="divider")return y(rB,l,null);if(c==="subheader")return y(RB,l,n);const d={subtitle:n.subtitle?h=>{var f;return(f=n.subtitle)==null?void 0:f.call(n,Ee(E({},h),{item:u}))}:void 0,prepend:n.prepend?h=>{var f;return(f=n.prepend)==null?void 0:f.call(n,Ee(E({},h),{item:u}))}:void 0,append:n.append?h=>{var f;return(f=n.append)==null?void 0:f.call(n,Ee(E({},h),{item:u}))}:void 0,default:n.default?h=>{var f;return(f=n.default)==null?void 0:f.call(n,Ee(E({},h),{item:u}))}:void 0,title:n.title?h=>{var f;return(f=n.title)==null?void 0:f.call(n,Ee(E({},h),{item:u}))}:void 0};return a?y(pB,{value:l==null?void 0:l.value},{activator:h=>{let{props:f}=h;return n.header?n.header(E(E({},l),f)):y(Mu,ct(l,f),d)},default:()=>y(DR,{items:a},n)}):n.item?n.item(l):y(Mu,l,d)})}}}),NB=De({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean},"item");function MR(t,e){const n=Ni(e,t.itemTitle,e),r=Ni(e,t.itemValue,n),i=Ni(e,t.itemChildren),s=t.itemProps===!0?va(e,["children"])[1]:Ni(e,t.itemProps),o=E({title:n,value:r},s);return{title:o.title,value:o.value,props:o,children:Array.isArray(i)?LR(t,i):void 0,originalItem:e}}function LR(t,e){const n=[];for(const r of e)n.push(MR(t,r));return n}function Eoe(t){const e=I(()=>LR(t,t.items));function n(i){return i.map(s=>MR(t,s))}function r(i){return t.returnObject?i.map(s=>{let{originalItem:o}=s;return o}):i.map(s=>{let{props:o}=s;return o.value})}return{items:e,transformIn:n,transformOut:r}}function xB(t,e){const n=Ni(e,t.itemType,"item"),r=typeof e=="string"?e:Ni(e,t.itemTitle),i=Ni(e,t.itemValue,void 0),s=Ni(e,t.itemChildren),o=t.itemProps===!0?va(e,["children"])[1]:Ni(e,t.itemProps),a=E({title:r,value:i},o);return{type:n,title:a.title,value:a.value,props:a,children:n==="item"&&s?FR(t,s):void 0,originalItem:e}}function FR(t,e){const n=[];for(const r of e)n.push(xB(t,r));return n}function PB(t){return{items:I(()=>FR(t,t.items))}}const $R=Yn()({name:"VList",props:E(E(E(E(E(Ee(E(E(E(E(E({activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},nav:Boolean},uB({selectStrategy:"single-leaf",openStrategy:"list"})),wa()),Ys()),ya()),Ia()),{itemType:{type:String,default:"type"}}),NB()),Ji()),nn()),kn()),Ad({variant:"text"})),emits:{"update:selected":t=>!0,"update:opened":t=>!0,"click:open":t=>!0,"click:select":t=>!0},setup(t,e){let{slots:n}=e;const{items:r}=PB(t),{themeClasses:i}=Qn(t),{backgroundColorClasses:s,backgroundColorStyles:o}=Wi(Se(t,"bgColor")),{borderClasses:a}=ba(t),{densityClasses:l}=Qs(t),{dimensionStyles:c}=_a(t),{elevationClasses:u}=Ea(t),{roundedClasses:d}=Zi(t),{open:h,select:f}=dB(t),p=I(()=>t.lines?`v-list--${t.lines}-line`:void 0),g=Se(t,"activeColor"),m=Se(t,"color");return gR(),tc({VListGroup:{activeColor:g,color:m},VListItem:{activeClass:Se(t,"activeClass"),activeColor:g,color:m,density:Se(t,"density"),disabled:Se(t,"disabled"),lines:Se(t,"lines"),nav:Se(t,"nav"),variant:Se(t,"variant")}}),Ft(()=>y(t.tag,{class:["v-list",{"v-list--disabled":t.disabled,"v-list--nav":t.nav},i.value,s.value,a.value,l.value,u.value,p.value,d.value],style:[o.value,c.value]},{default:()=>[y(DR,{items:r.value},n)]})),{open:h,select:f}}});function VR(t){const e=X(),n=X();if(bt){const r=new ResizeObserver(i=>{t==null||t(i,r),i.length&&(n.value=i[0].contentRect)});Wr(()=>{r.disconnect()}),$e(e,(i,s)=>{s&&(r.unobserve(s),n.value=void 0),i&&r.observe(i)},{flush:"post"})}return{resizeRef:e,contentRect:Pp(n)}}const Tf=Symbol.for("vuetify:layout"),UR=Symbol.for("vuetify:layout-item"),km=1e3,OB=De({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),BR=De({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function DB(){const t=Ke(Tf);if(!t)throw new Error("Could not find injected Vuetify layout");return t}function jR(t){var e;const n=Ke(Tf);if(!n)throw new Error("Could not find injected Vuetify layout");const r=(e=t.id)!=null?e:`layout-item-${Hr()}`,i=ur("useLayoutItem");Kt(UR,{id:r});const s=X(!1);IA(()=>s.value=!0),bA(()=>s.value=!1);const{layoutItemStyles:o,layoutItemScrimStyles:a}=n.register(i,Ee(E({},t),{active:I(()=>s.value?!1:t.active.value),id:r}));return Wr(()=>n.unregister(r)),{layoutItemStyles:o,layoutRect:n.layoutRect,layoutItemScrimStyles:a}}const MB=(t,e,n,r)=>{let i={top:0,left:0,right:0,bottom:0};const s=[{id:"",layer:E({},i)}];for(const o of t){const a=e.get(o),l=n.get(o),c=r.get(o);if(!a||!l||!c)continue;const u=Ee(E({},i),{[a.value]:parseInt(i[a.value],10)+(c.value?parseInt(l.value,10):0)});s.push({id:o,layer:u}),i=u}return s};function LB(t){const e=Ke(Tf,null),n=I(()=>e?e.rootZIndex.value-100:km),r=X([]),i=bn(new Map),s=bn(new Map),o=bn(new Map),a=bn(new Map),l=bn(new Map),{resizeRef:c,contentRect:u}=VR(),d=I(()=>{var S;const A=new Map,k=(S=t.overlaps)!=null?S:[];for(const P of k.filter(O=>O.includes(":"))){const[O,W]=P.split(":");if(!r.value.includes(O)||!r.value.includes(W))continue;const G=i.get(O),B=i.get(W),ie=s.get(O),oe=s.get(W);!G||!B||!ie||!oe||(A.set(W,{position:G.value,amount:parseInt(ie.value,10)}),A.set(O,{position:B.value,amount:-parseInt(oe.value,10)}))}return A}),h=I(()=>{const S=[...new Set([...o.values()].map(k=>k.value))].sort((k,P)=>k-P),A=[];for(const k of S){const P=r.value.filter(O=>{var W;return((W=o.get(O))==null?void 0:W.value)===k});A.push(...P)}return MB(A,i,s,a)}),f=I(()=>!Array.from(l.values()).some(S=>S.value)),p=I(()=>{const S=h.value[h.value.length-1].layer;return E({position:"relative",paddingLeft:me(S.left),paddingRight:me(S.right),paddingTop:me(S.top),paddingBottom:me(S.bottom)},f.value?void 0:{transition:"none"})}),g=I(()=>h.value.slice(1).map((S,A)=>{let{id:k}=S;const{layer:P}=h.value[A],O=s.get(k);return Ee(E({id:k},P),{size:Number(O.value)})})),m=S=>g.value.find(A=>A.id===S),v=ur("createLayout"),b=X(!1);ga(()=>{b.value=!0}),Kt(Tf,{register:(S,A)=>{let{id:k,order:P,position:O,layoutSize:W,elementSize:G,active:B,disableTransitions:ie,absolute:oe}=A;o.set(k,P),i.set(k,O),s.set(k,W),a.set(k,B),ie&&l.set(k,ie);const Ae=tu(UR,v==null?void 0:v.vnode).indexOf(S);Ae>-1?r.value.splice(Ae,0,k):r.value.push(k);const be=I(()=>g.value.findIndex(He=>He.id===k)),Ie=I(()=>n.value+h.value.length*2-be.value*2),st=I(()=>{const He=O.value==="left"||O.value==="right",ln=O.value==="right",cn=O.value==="bottom",Va=E({[O.value]:0,zIndex:Ie.value,transform:`translate${He?"X":"Y"}(${(B.value?0:-110)*(ln||cn?-1:1)}%)`,position:oe.value||n.value!==km?"absolute":"fixed"},f.value?void 0:{transition:"none"});if(!b.value)return Va;if(be.value<0)throw new Error(`Layout item "${k}" is missing`);const D=g.value[be.value];if(!D)throw new Error(`Could not find layout item "${k}`);const ne=d.value.get(k);return ne&&(D[ne.position]+=ne.amount),Ee(E({},Va),{height:He?`calc(100% - ${D.top}px - ${D.bottom}px)`:G.value?`${G.value}px`:void 0,marginLeft:ln?void 0:`${D.left}px`,marginRight:ln?`${D.right}px`:void 0,marginTop:O.value!=="bottom"?`${D.top}px`:void 0,marginBottom:O.value!=="top"?`${D.bottom}px`:void 0,width:He?G.value?`${G.value}px`:void 0:`calc(100% - ${D.left}px - ${D.right}px)`})}),kt=I(()=>({zIndex:Ie.value-1,position:n.value===km?"fixed":"absolute"}));return{layoutItemStyles:st,layoutItemScrimStyles:kt,zIndex:Ie}},unregister:S=>{o.delete(S),i.delete(S),s.delete(S),a.delete(S),l.delete(S),r.value=r.value.filter(A=>A!==S)},mainStyles:p,getLayoutItem:m,items:g,layoutRect:u,rootZIndex:n});const T=I(()=>["v-layout",{"v-layout--full-height":t.fullHeight}]),C=I(()=>({zIndex:n.value}));return{layoutClasses:T,layoutStyles:C,getLayoutItem:m,items:g,layoutRect:u,layoutRef:c}}const Zv=Symbol.for("vuetify:display"),xT={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},FB=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xT;return Bo(xT,t)};function PT(){return bt?Math.max(document.documentElement.clientWidth,window.innerWidth):0}function OT(){return bt?Math.max(document.documentElement.clientHeight,window.innerHeight):0}function $B(){const t=bt?window.navigator.userAgent:"ssr";function e(p){return Boolean(t.match(p))}const n=e(/android/i),r=e(/iphone|ipad|ipod/i),i=e(/cordova/i),s=e(/electron/i),o=e(/chrome/i),a=e(/edge/i),l=e(/firefox/i),c=e(/opera/i),u=e(/win/i),d=e(/mac/i),h=e(/linux/i),f=e(/ssr/i);return{android:n,ios:r,cordova:i,electron:s,chrome:o,edge:a,firefox:l,opera:c,win:u,mac:d,linux:h,touch:FU,ssr:f}}function VB(t){const{thresholds:e,mobileBreakpoint:n}=FB(t),r=X(OT()),i=$B(),s=bn({}),o=X(PT());function a(){r.value=OT(),o.value=PT()}return zs(()=>{const l=o.value<e.sm,c=o.value<e.md&&!l,u=o.value<e.lg&&!(c||l),d=o.value<e.xl&&!(u||c||l),h=o.value<e.xxl&&!(d||u||c||l),f=o.value>=e.xxl,p=l?"xs":c?"sm":u?"md":d?"lg":h?"xl":"xxl",g=typeof n=="number"?n:e[n],m=i.ssr?i.android||i.ios||i.opera:o.value<g;s.xs=l,s.sm=c,s.md=u,s.lg=d,s.xl=h,s.xxl=f,s.smAndUp=!l,s.mdAndUp=!(l||c),s.lgAndUp=!(l||c||u),s.xlAndUp=!(l||c||u||d),s.smAndDown=!(u||d||h||f),s.mdAndDown=!(d||h||f),s.lgAndDown=!(h||f),s.xlAndDown=!f,s.name=p,s.height=r.value,s.width=o.value,s.mobile=m,s.mobileBreakpoint=n,s.platform=i,s.thresholds=e}),bt&&window.addEventListener("resize",a,{passive:!0}),lA(s)}function UB(){const t=Ke(Zv);if(!t)throw new Error("Could not find Vuetify display injection");return t}const BB=100,jB=20;function DT(t){const e=1.41421356237;return(t<0?-1:1)*Math.sqrt(Math.abs(t))*e}function MT(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let e=0;for(let n=t.length-1;n>0;n--){if(t[n].t===t[n-1].t)continue;const r=DT(e),i=(t[n].d-t[n-1].d)/(t[n].t-t[n-1].t);e+=(i-r)*Math.abs(i),n===t.length-1&&(e*=.5)}return DT(e)*1e3}function qB(){const t={};function e(i){Array.from(i.changedTouches).forEach(s=>{var o;((o=t[s.identifier])!=null?o:t[s.identifier]=new IU(jB)).push([i.timeStamp,s])})}function n(i){Array.from(i.changedTouches).forEach(s=>{delete t[s.identifier]})}function r(i){var s;const o=(s=t[i])==null?void 0:s.values().reverse();if(!o)throw new Error(`No samples for touch id ${i}`);const a=o[0],l=[],c=[];for(const u of o){if(a[0]-u[0]>BB)break;l.push({t:u[0],d:u[1].clientX}),c.push({t:u[0],d:u[1].clientY})}return{x:MT(l),y:MT(c),get direction(){const{x:u,y:d}=this,[h,f]=[Math.abs(u),Math.abs(d)];return h>f&&u>=0?"right":h>f&&u<=0?"left":f>h&&d>=0?"down":f>h&&d<=0?"up":WB()}}}return{addMovement:e,endTouch:n,getVelocity:r}}function WB(){throw new Error}function HB(t){let{isActive:e,isTemporary:n,width:r,touchless:i,position:s}=t;ga(()=>{window.addEventListener("touchstart",v,{passive:!0}),window.addEventListener("touchmove",b,{passive:!1}),window.addEventListener("touchend",T,{passive:!0})}),Wr(()=>{window.removeEventListener("touchstart",v),window.removeEventListener("touchmove",b),window.removeEventListener("touchend",T)});const o=I(()=>s.value!=="bottom"),{addMovement:a,endTouch:l,getVelocity:c}=qB();let u=!1;const d=X(!1),h=X(0),f=X(0);let p;function g(S,A){return(s.value==="left"?S:s.value==="right"?document.documentElement.clientWidth-S:s.value==="bottom"?document.documentElement.clientHeight-S:Wa())-(A?r.value:0)}function m(S){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const k=s.value==="left"?(S-f.value)/r.value:s.value==="right"?(document.documentElement.clientWidth-S-f.value)/r.value:s.value==="bottom"?(document.documentElement.clientHeight-S-f.value)/r.value:Wa();return A?Math.max(0,Math.min(1,k)):k}function v(S){if(i.value)return;const A=S.changedTouches[0].clientX,k=S.changedTouches[0].clientY,P=25,O=s.value==="left"?A<P:s.value==="right"?A>document.documentElement.clientWidth-P:s.value==="bottom"?k>document.documentElement.clientHeight-P:Wa(),W=e.value&&(s.value==="left"?A<r.value:s.value==="right"?A>document.documentElement.clientWidth-r.value:s.value==="bottom"?k>document.documentElement.clientHeight-r.value:Wa());(O||W||e.value&&n.value)&&(u=!0,p=[A,k],f.value=g(o.value?A:k,e.value),h.value=m(o.value?A:k),l(S),a(S))}function b(S){const A=S.changedTouches[0].clientX,k=S.changedTouches[0].clientY;if(u){if(!S.cancelable){u=!1;return}const O=Math.abs(A-p[0]),W=Math.abs(k-p[1]);(o.value?O>W&&O>3:W>O&&W>3)?(d.value=!0,u=!1):(o.value?W:O)>3&&(u=!1)}if(!d.value)return;S.preventDefault(),a(S);const P=m(o.value?A:k,!1);h.value=Math.max(0,Math.min(1,P)),P>1?f.value=g(o.value?A:k,!0):P<0&&(f.value=g(o.value?A:k,!1))}function T(S){if(u=!1,!d.value)return;a(S),d.value=!1;const A=c(S.changedTouches[0].identifier),k=Math.abs(A.x),P=Math.abs(A.y);(o.value?k>P&&k>400:P>k&&P>3)?e.value=A.direction===({left:"right",right:"left",bottom:"up"}[s.value]||Wa()):e.value=h.value>.5}const C=I(()=>d.value?{transform:s.value==="left"?`translateX(calc(-100% + ${h.value*r.value}px))`:s.value==="right"?`translateX(calc(100% - ${h.value*r.value}px))`:s.value==="bottom"?`translateY(calc(100% - ${h.value*r.value}px))`:Wa(),transition:"none"}:void 0);return{isDragging:d,dragProgress:h,dragStyles:C}}function Wa(){throw new Error}const KB=_e({name:"VNavigationDrawer",props:E(E(E(E(E(E({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:Boolean,railWidth:{type:[Number,String],default:72},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"left",validator:t=>["left","right","bottom"].includes(t)}},wa()),Ia()),BR()),Ji()),nn({tag:"nav"})),kn()),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:i}=Qn(t),{borderClasses:s}=ba(t),{backgroundColorClasses:o,backgroundColorStyles:a}=Wi(Se(t,"color")),{elevationClasses:l}=Ea(t),{mobile:c}=UB(),{roundedClasses:u}=Zi(t),d=SR(),h=yn(t,"modelValue",null,O=>!!O),f=X(!1),p=I(()=>t.rail&&t.expandOnHover&&f.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),g=I(()=>!t.permanent&&(c.value||t.temporary));t.disableResizeWatcher||$e(g,O=>!t.permanent&&(h.value=!O)),!t.disableRouteWatcher&&d&&$e(d.currentRoute,()=>g.value&&(h.value=!1)),$e(()=>t.permanent,O=>{O&&(h.value=!0)}),Up(()=>{t.modelValue!=null||g.value||(h.value=t.permanent||!c.value)});const m=X(),{isDragging:v,dragProgress:b,dragStyles:T}=HB({isActive:h,isTemporary:g,width:p,touchless:Se(t,"touchless"),position:Se(t,"location")}),C=I(()=>{const O=g.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):p.value;return v.value?O*b.value:O}),{layoutItemStyles:S,layoutRect:A,layoutItemScrimStyles:k}=jR({id:t.name,order:I(()=>parseInt(t.order,10)),position:Se(t,"location"),layoutSize:C,elementSize:p,active:I(()=>h.value||v.value),disableTransitions:I(()=>v.value),absolute:Se(t,"absolute")}),P=I(()=>E(E(E({},v.value?{opacity:b.value*.2,transition:"none"}:void 0),A.value?{left:me(A.value.left),right:me(A.value.right),top:me(A.value.top),bottom:me(A.value.bottom)}:void 0),k.value));return()=>{var O,W,G,B;const ie=r.image||t.image;return y(at,null,[y(t.tag,ct({ref:m,onMouseenter:()=>f.value=!0,onMouseleave:()=>f.value=!1,class:["v-navigation-drawer",{"v-navigation-drawer--bottom":t.location==="bottom","v-navigation-drawer--end":t.location==="right","v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":f.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--start":t.location==="left","v-navigation-drawer--temporary":g.value,"v-navigation-drawer--active":h.value},i.value,o.value,s.value,l.value,u.value],style:[a.value,S.value,T.value]},n),{default:()=>[ie&&y("div",{class:"v-navigation-drawer__img"},[r.image?(O=r.image)==null?void 0:O.call(r,{image:t.image}):y("img",{src:t.image,alt:""},null)]),r.prepend&&y("div",{class:"v-navigation-drawer__prepend"},[(W=r.prepend)==null?void 0:W.call(r)]),y("div",{class:"v-navigation-drawer__content"},[(G=r.default)==null?void 0:G.call(r)]),r.append&&y("div",{class:"v-navigation-drawer__append"},[(B=r.append)==null?void 0:B.call(r)])]}),y(hi,{name:"fade-transition"},{default:()=>[g.value&&(v.value||h.value)&&y("div",{class:"v-navigation-drawer__scrim",style:P.value,onClick:()=>h.value=!1},null)]})])}}}),GB={name:"BarMenu",data:()=>({}),computed:{}},zB=ri("div",{class:"ma-4 text-h5 text-white"},"MONITORBOX",-1);function YB(t,e,n,r,i,s){const o=Fi("router-link");return Ht(),br(KB,{bottom:"",color:"#111827",modelValue:t.$store.state.show,"onUpdate:modelValue":e[1]||(e[1]=a=>t.$store.state.show=a)},{default:Oe(()=>[y(o,{to:"/",class:"text-decoration-none",onClick:e[0]||(e[0]=a=>t.$store.state.titleToolBar="Home")},{default:Oe(()=>[zB]),_:1}),y($R,{density:"compact",class:"text-subtitle-2 ma-2 bg-transparent"},{default:Oe(()=>[(Ht(!0),Sl(at,null,q_(t.$store.state.menu,({icon:a,title:l,value:c,link:u},d)=>(Ht(),br(o,{class:"text-decoration-none text-white",to:u,key:d,onClick:h=>t.$store.state.titleToolBar=l},{default:Oe(()=>[y(Mu,{title:l,value:c,"active-color":"#2196f3",class:"v-icon--size-large mb-1",rounded:"lg"},{default:Oe(()=>[y(Kn,{icon:a},null,8,["icon"])]),_:2},1032,["title","value"])]),_:2},1032,["to","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])}var QB=ec(GB,[["render",YB]]);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q=function(t,e){if(!t)throw rc(e)},rc=function(t){return new Error("Firebase Database ("+qR.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},XB=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Yp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(WR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw Error();const h=s<<2|a>>4;if(r.push(h),c!==64){const f=a<<4&240|c>>2;if(r.push(f),d!==64){const p=c<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},HR=function(t){const e=WR(t);return Yp.encodeByteArray(e,!0)},Sf=function(t){return HR(t).replace(/\./g,"")},ey=function(t){try{return Yp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JB(t){return Lu(void 0,t)}function Lu(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!ZB(n)||(t[n]=Lu(t[n],e[n]));return t}function ZB(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Sf(JSON.stringify(n)),Sf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qp(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function aw(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ej(){return typeof self=="object"&&self.self===self}function Rd(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Nd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tj(){return dt().indexOf("Electron/")>=0}function lw(){const t=dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nj(){return dt().indexOf("MSAppHost/")>=0}function KR(){return qR.NODE_ADMIN===!0}function rj(){return!aw()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zn(){return typeof indexedDB=="object"}function xd(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function Xp(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}function ij(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj="FirebaseError";class Et extends Error{constructor(e,n,r){super(n);this.code=e,this.customData=r,this.name=sj,Object.setPrototypeOf(this,Et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Un.prototype.create)}}class Un{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?oj(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Et(i,a,r)}}function oj(t,e){return t.replace(aj,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const aj=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t){return JSON.parse(t)}function Dt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Fu(ey(s[0])||""),n=Fu(ey(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},lj=function(t){const e=cw(t).claims;return typeof e=="object"&&e.hasOwnProperty("iat")?e.iat:null},cj=function(t){const e=cw(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},uj=function(t){const e=cw(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function jo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Cf(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function kf(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Af(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(LT(s)&&LT(o)){if(!Af(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function LT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ol(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Kc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function GR(t,e){const n=new hj(t,e);return n.subscribe.bind(n)}class hj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fj(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Am),i.error===void 0&&(i.error=Am),i.complete===void 0&&(i.complete=Am);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Am(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he=function(t,e,n,r){let i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){const s=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function Gn(t,e){return`${t} failed: ${e} argument `}function Bt(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(Gn(t,e)+"must be a valid function.")}function FT(t,e,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(Gn(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,q(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Jp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=1e3,mj=2,vj=4*60*60*1e3,yj=.5;function Rf(t,e=gj,n=mj){const r=e*Math.pow(n,t),i=Math.round(yj*r*(Math.random()-.5)*2);return Math.min(vj,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t){return t&&t._delegate?t._delegate:t}class Be{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ot;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wj(e))try{this.getOrInitializeService({instanceIdentifier:fo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fo){return this.instances.has(e)}getOptions(e=fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_j(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fo){return this.component?this.component.multipleInstances?e:fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _j(t){return t===fo?void 0:t}function wj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=[];var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const QR={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},bj=Te.INFO,Ij={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},Ej=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Ij[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bi{constructor(e){this.name=e,this._logLevel=bj,this._logHandler=Ej,this._userLogHandler=null,uw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}function Tj(t){uw.forEach(e=>{e.setLogLevel(t)})}function Sj(t,e){for(const n of uw){let r=null;e&&e.level&&(r=QR[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r!=null?r:i.logLevel)&&t({level:Te[s].toLowerCase(),message:a,args:o,type:i.name})}}}const Cj=(t,e)=>e.some(n=>t instanceof n);let $T,VT;function kj(){return $T||($T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Aj(){return VT||(VT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XR=new WeakMap,ty=new WeakMap,JR=new WeakMap,Rm=new WeakMap,dw=new WeakMap;function Rj(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n($i(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&XR.set(n,t)}).catch(()=>{}),dw.set(e,t),e}function Nj(t){if(ty.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ty.set(t,e)}let ny={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ty.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $i(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xj(t){ny=t(ny)}function Pj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nm(this),e,...n);return JR.set(r,e.sort?e.sort():[e]),$i(r)}:Aj().includes(t)?function(...e){return t.apply(Nm(this),e),$i(XR.get(this))}:function(...e){return $i(t.apply(Nm(this),e))}}function Oj(t){return typeof t=="function"?Pj(t):(t instanceof IDBTransaction&&Nj(t),Cj(t,kj())?new Proxy(t,ny):t)}function $i(t){if(t instanceof IDBRequest)return Rj(t);if(Rm.has(t))return Rm.get(t);const e=Oj(t);return e!==t&&(Rm.set(t,e),dw.set(e,t)),e}const Nm=t=>dw.get(t);function ic(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=$i(o);return r&&o.addEventListener("upgradeneeded",l=>{r($i(o.result),l.oldVersion,l.newVersion,$i(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function fl(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),$i(n).then(()=>{})}const Dj=["get","getKey","getAll","getAllKeys","count"],Mj=["put","add","delete","clear"],xm=new Map;function UT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xm.get(e))return xm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Mj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Dj.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return xm.set(e,s),s}xj(t=>Ee(E({},t),{get:(e,n,r)=>UT(e,n)||t.get(e,n,r),has:(e,n)=>!!UT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Fj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ry="@firebase/app",BT="0.7.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new bi("@firebase/app"),$j="@firebase/app-compat",Vj="@firebase/analytics-compat",Uj="@firebase/analytics",Bj="@firebase/app-check-compat",jj="@firebase/app-check",qj="@firebase/auth",Wj="@firebase/auth-compat",Hj="@firebase/database",Kj="@firebase/database-compat",Gj="@firebase/functions",zj="@firebase/functions-compat",Yj="@firebase/installations",Qj="@firebase/installations-compat",Xj="@firebase/messaging",Jj="@firebase/messaging-compat",Zj="@firebase/performance",eq="@firebase/performance-compat",tq="@firebase/remote-config",nq="@firebase/remote-config-compat",rq="@firebase/storage",iq="@firebase/storage-compat",sq="@firebase/firestore",oq="@firebase/firestore-compat",aq="firebase",lq="9.8.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="[DEFAULT]",cq={[ry]:"fire-core",[$j]:"fire-core-compat",[Uj]:"fire-analytics",[Vj]:"fire-analytics-compat",[jj]:"fire-app-check",[Bj]:"fire-app-check-compat",[qj]:"fire-auth",[Wj]:"fire-auth-compat",[Hj]:"fire-rtdb",[Kj]:"fire-rtdb-compat",[Gj]:"fire-fn",[zj]:"fire-fn-compat",[Yj]:"fire-iid",[Qj]:"fire-iid-compat",[Xj]:"fire-fcm",[Jj]:"fire-fcm-compat",[Zj]:"fire-perf",[eq]:"fire-perf-compat",[tq]:"fire-rc",[nq]:"fire-rc-compat",[rq]:"fire-gcs",[iq]:"fire-gcs-compat",[sq]:"fire-fst",[oq]:"fire-fst-compat","fire-js":"fire-js",[aq]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Map,$u=new Map;function Nf(t,e){try{t.container.addComponent(e)}catch(n){hw.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ZR(t,e){t.container.addOrOverwriteComponent(e)}function yt(t){const e=t.name;if($u.has(e))return hw.debug(`There were multiple attempts to register component ${e}.`),!1;$u.set(e,t);for(const n of Os.values())Nf(n,t);return!0}function Ii(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function uq(t,e,n=qo){Ii(t,e).clearInstance(n)}function dq(){$u.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},Ds=new Un("app","Firebase",hq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Be("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=lq;function eN(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:qo,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Ds.create("bad-app-name",{appName:String(r)});const i=Os.get(r);if(i){if(Af(t,i.options)&&Af(n,i.config))return i;throw Ds.create("duplicate-app",{appName:r})}const s=new YR(r);for(const a of $u.values())s.addComponent(a);const o=new fq(t,n,s);return Os.set(r,o),o}function Zp(t=qo){const e=Os.get(t);if(!e)throw Ds.create("no-app",{appName:t});return e}function pq(){return Array.from(Os.values())}async function tN(t){const e=t.name;Os.has(e)&&(Os.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Ze(t,e,n){var r;let i=(r=cq[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hw.warn(a.join(" "));return}yt(new Be(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function nN(t,e){if(t!==null&&typeof t!="function")throw Ds.create("invalid-log-argument");Sj(t,e)}function rN(t){Tj(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gq="firebase-heartbeat-database",mq=1,Vu="firebase-heartbeat-store";let Pm=null;function iN(){return Pm||(Pm=ic(gq,mq,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Vu)}}}).catch(t=>{throw Ds.create("storage-open",{originalErrorMessage:t.message})})),Pm}async function vq(t){try{return(await iN()).transaction(Vu).objectStore(Vu).get(sN(t))}catch(e){throw Ds.create("storage-get",{originalErrorMessage:e.message})}}async function jT(t,e){try{const r=(await iN()).transaction(Vu,"readwrite");return await r.objectStore(Vu).put(e,sN(t)),r.done}catch(n){throw Ds.create("storage-set",{originalErrorMessage:n.message})}}function sN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yq=1024,_q=30*24*60*60*1e3;class wq{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Iq(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=qT();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=_q}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=qT(),{heartbeatsToSend:n,unsentEntries:r}=bq(this._heartbeatsCache.heartbeats),i=Sf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function qT(){return new Date().toISOString().substring(0,10)}function bq(t,e=yq){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),WT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),WT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Iq{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zn()?xd().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await vq(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return jT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return jT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function WT(t){return Sf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eq(t){yt(new Be("platform-logger",e=>new Lj(e),"PRIVATE")),yt(new Be("heartbeat",e=>new wq(e),"PRIVATE")),Ze(ry,BT,t),Ze(ry,BT,"esm2017"),Ze("fire-js","")}Eq("");var Tq=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:Ei,_DEFAULT_ENTRY_NAME:qo,_addComponent:Nf,_addOrOverwriteComponent:ZR,_apps:Os,_clearComponents:dq,_components:$u,_getProvider:Ii,_registerComponent:yt,_removeServiceInstance:uq,deleteApp:tN,getApp:Zp,getApps:pq,initializeApp:eN,onLog:nN,registerVersion:Ze,setLogLevel:rN,FirebaseError:Et},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{constructor(e,n){this._delegate=e,this.firebase=n,Nf(e,new Be("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),tN(this._delegate)))}_getService(e,n=qo){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=qo){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Nf(this._delegate,e)}_addOrOverwriteComponent(e){ZR(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cq={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},HT=new Un("app-compat","Firebase",Cq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Ze,setLogLevel:rN,onLog:nN,apps:null,SDK_VERSION:Ei,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:Tq}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||qo,!lr(e,c))throw HT.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,u={}){const d=eN(c,u);if(lr(e,d.name))return e[d.name];const h=new t(d,n);return e[d.name]=h,h}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,d=u.replace("-compat","");if(yt(c)&&c.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw HT.create("invalid-app-argument",{appName:u});return f[d]()};c.serviceProps!==void 0&&Lu(h,c.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){const t=kq(Sq);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:oN,extendNamespace:e,createSubscribe:GR,ErrorFactory:Un,deepExtend:Lu});function e(n){Lu(t,n)}return t}const Aq=oN();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=new bi("@firebase/app-compat"),Rq="@firebase/app-compat",Nq="0.1.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xq(t){Ze(Rq,Nq,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(ej()&&self.firebase!==void 0){KT.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&KT.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const et=Aq;xq();const aN="@firebase/installations",fw="0.5.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=1e4,cN=`w:${fw}`,uN="FIS_v2",Pq="https://firebaseinstallations.googleapis.com/v1",Oq=60*60*1e3,Dq="installations",Mq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lq={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},Wo=new Un(Dq,Mq,Lq);function dN(t){return t instanceof Et&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN({projectId:t}){return`${Pq}/projects/${t}/installations`}function fN(t){return{token:t.token,requestStatus:2,expiresIn:$q(t.expiresIn),creationTime:Date.now()}}async function pN(t,e){const r=(await e.json()).error;return Wo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function gN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Fq(t,{refreshToken:e}){const n=gN(t);return n.append("Authorization",Vq(e)),n}async function mN(t){const e=await t();return e.status>=500&&e.status<600?t():e}function $q(t){return Number(t.replace("s","000"))}function Vq(t){return`${uN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uq({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=hN(t),i=gN(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:uN,appId:t.appId,sdkVersion:cN},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await mN(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:fN(c.authToken)}}else throw await pN("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq=/^[cdef][\w-]{21}$/,iy="";function qq(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Wq(t);return jq.test(n)?n:iy}catch{return iy}}function Wq(t){return Bq(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=new Map;function _N(t,e){const n=eg(t);wN(n,e),Hq(n,e)}function wN(t,e){const n=yN.get(t);if(!!n)for(const r of n)r(e)}function Hq(t,e){const n=Kq();n&&n.postMessage({key:t,fid:e}),Gq()}let So=null;function Kq(){return!So&&"BroadcastChannel"in self&&(So=new BroadcastChannel("[Firebase] FID Change"),So.onmessage=t=>{wN(t.data.key,t.data.fid)}),So}function Gq(){yN.size===0&&So&&(So.close(),So=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq="firebase-installations-database",Yq=1,Ho="firebase-installations-store";let Om=null;function pw(){return Om||(Om=ic(zq,Yq,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ho)}}})),Om}async function xf(t,e){const n=eg(t),i=(await pw()).transaction(Ho,"readwrite"),s=i.objectStore(Ho),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&_N(t,e.fid),e}async function bN(t){const e=eg(t),r=(await pw()).transaction(Ho,"readwrite");await r.objectStore(Ho).delete(e),await r.done}async function tg(t,e){const n=eg(t),i=(await pw()).transaction(Ho,"readwrite"),s=i.objectStore(Ho),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&_N(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gw(t){let e;const n=await tg(t.appConfig,r=>{const i=Qq(r),s=Xq(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===iy?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Qq(t){const e=t||{fid:qq(),registrationStatus:0};return IN(e)}function Xq(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Wo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Jq(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Zq(t)}:{installationEntry:e}}async function Jq(t,e){try{const n=await Uq(t,e);return xf(t.appConfig,n)}catch(n){throw dN(n)&&n.customData.serverCode===409?await bN(t.appConfig):await xf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Zq(t){let e=await GT(t.appConfig);for(;e.registrationStatus===1;)await vN(100),e=await GT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await gw(t);return r||n}return e}function GT(t){return tg(t,e=>{if(!e)throw Wo.create("installation-not-found");return IN(e)})}function IN(t){return eW(t)?{fid:t.fid,registrationStatus:0}:t}function eW(t){return t.registrationStatus===1&&t.registrationTime+lN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tW({appConfig:t,heartbeatServiceProvider:e},n){const r=nW(t,n),i=Fq(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:cN,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await mN(()=>fetch(r,a));if(l.ok){const c=await l.json();return fN(c)}else throw await pN("Generate Auth Token",l)}function nW(t,{fid:e}){return`${hN(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mw(t,e=!1){let n;const r=await tg(t.appConfig,s=>{if(!EN(s))throw Wo.create("not-registered");const o=s.authToken;if(!e&&sW(o))return s;if(o.requestStatus===1)return n=rW(t,e),s;{if(!navigator.onLine)throw Wo.create("app-offline");const a=aW(s);return n=iW(t,a),a}});return n?await n:r.authToken}async function rW(t,e){let n=await zT(t.appConfig);for(;n.authToken.requestStatus===1;)await vN(100),n=await zT(t.appConfig);const r=n.authToken;return r.requestStatus===0?mw(t,e):r}function zT(t){return tg(t,e=>{if(!EN(e))throw Wo.create("not-registered");const n=e.authToken;return lW(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function iW(t,e){try{const n=await tW(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await xf(t.appConfig,r),n}catch(n){if(dN(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await bN(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await xf(t.appConfig,r)}throw n}}function EN(t){return t!==void 0&&t.registrationStatus===2}function sW(t){return t.requestStatus===2&&!oW(t)}function oW(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Oq}function aW(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function lW(t){return t.requestStatus===1&&t.requestTime+lN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cW(t){const e=t,{installationEntry:n,registrationPromise:r}=await gw(e);return r?r.catch(console.error):mw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uW(t,e=!1){const n=t;return await dW(n),(await mw(n,e)).token}async function dW(t){const{registrationPromise:e}=await gw(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hW(t){if(!t||!t.options)throw Dm("App Configuration");if(!t.name)throw Dm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Dm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Dm(t){return Wo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="installations",fW="installations-internal",pW=t=>{const e=t.getProvider("app").getImmediate(),n=hW(e),r=Ii(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},gW=t=>{const e=t.getProvider("app").getImmediate(),n=Ii(e,TN).getImmediate();return{getId:()=>cW(n),getToken:i=>uW(n,i)}};function mW(){yt(new Be(TN,pW,"PUBLIC")),yt(new Be(fW,gW,"PRIVATE"))}mW();Ze(aN,fw);Ze(aN,fw,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="analytics",vW="firebase_id",yW="origin",_W=60*1e3,wW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",SN="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new bi("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function bW(t,e){const n=document.createElement("script");n.src=`${SN}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function IW(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function EW(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await CN(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){pn.error(a)}t("config",i,s)}async function TW(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await CN(n);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){pn.error(s)}}function SW(t,e,n,r){async function i(s,o,a){try{s==="event"?await TW(t,e,n,o,a):s==="config"?await EW(t,e,n,r,o,a):t("set",o)}catch(l){pn.error(l)}}return i}function CW(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=SW(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function kW(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(SN))return e;return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'},Ir=new Un("analytics","Analytics",AW);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RW=30,NW=1e3;class xW{constructor(e={},n=NW){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const kN=new xW;function PW(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function OW(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:PW(r)},s=wW.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Ir.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function DW(t,e=kN,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Ir.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ir.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new FW;return setTimeout(async()=>{a.abort()},n!==void 0?n:_W),AN({appId:r,apiKey:i,measurementId:s},o,a,e)}async function AN(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=kN){const{appId:s,measurementId:o}=t;try{await MW(r,e)}catch(a){if(o)return pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:s,measurementId:o};throw a}try{const a=await OW(t);return i.deleteThrottleMetadata(s),a}catch(a){if(!LW(a)){if(i.deleteThrottleMetadata(s),o)return pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:s,measurementId:o};throw a}const l=Number(a.customData.httpStatus)===503?Rf(n,i.intervalMillis,RW):Rf(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(s,c),pn.debug(`Calling attemptFetch again in ${l} millis`),AN(t,c,r,i)}}function MW(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Ir.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function LW(t){if(!(t instanceof Et)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class FW{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $W(){if(zn())try{await xd()}catch(t){return pn.warn(Ir.create("indexeddb-unavailable",{errorInfo:t}).message),!1}else return pn.warn(Ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function VW(t,e,n,r,i,s,o){var a;const l=DW(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&pn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>pn.error(f)),e.push(l);const c=$W().then(f=>{if(f)return r.getId()}),[u,d]=await Promise.all([l,c]);kW()||bW(s,u.measurementId),i("js",new Date);const h=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return h[yW]="firebase",h.update=!0,d!=null&&(h[vW]=d),i("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e){this.app=e}_delete(){return delete Vi[this.app.options.appId],Promise.resolve()}}let Vi={},QT=[];const XT={};let tf="dataLayer",RN="gtag",JT,Pd,sy=!1;function BW(t){if(sy)throw Ir.create("already-initialized");t.dataLayerName&&(tf=t.dataLayerName),t.gtagName&&(RN=t.gtagName)}function jW(){const t=[];if(Rd()&&t.push("This is a browser extension environment."),Xp()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ir.create("invalid-analytics-context",{errorInfo:e});pn.warn(n.message)}}function qW(t,e,n){jW();const r=t.options.appId;if(!r)throw Ir.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ir.create("no-api-key");if(Vi[r]!=null)throw Ir.create("already-exists",{id:r});if(!sy){IW(tf);const{wrappedGtag:s,gtagCore:o}=CW(Vi,QT,XT,tf,RN);Pd=s,JT=o,sy=!0}return Vi[r]=VW(t,QT,XT,e,JT,tf,n),new UW(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WW(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}async function HW(t,e,n,r){if(r&&r.global)return t("set",{screen_name:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,screen_name:n})}}async function KW(t,e,n,r){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,user_id:n})}}async function GW(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}async function zW(t,e){const n=await t;window[`ga-disable-${n}`]=!e}async function YW(){if(Rd()||!Xp()||!zn())return!1;try{return await xd()}catch{return!1}}function QW(t,e,n){t=$(t),HW(Pd,Vi[t.app.options.appId],e,n).catch(r=>pn.error(r))}function XW(t,e,n){t=$(t),KW(Pd,Vi[t.app.options.appId],e,n).catch(r=>pn.error(r))}function JW(t,e,n){t=$(t),GW(Pd,Vi[t.app.options.appId],e,n).catch(r=>pn.error(r))}function ZW(t,e){t=$(t),zW(Vi[t.app.options.appId],e).catch(n=>pn.error(n))}function NN(t,e,n,r){t=$(t),WW(Pd,Vi[t.app.options.appId],e,n,r).catch(i=>pn.error(i))}const ZT="@firebase/analytics",e0="0.7.9";function e2(){yt(new Be(YT,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return qW(r,i,n)},"PUBLIC")),yt(new Be("analytics-internal",t,"PRIVATE")),Ze(ZT,e0),Ze(ZT,e0,"esm2017");function t(e){try{const n=e.getProvider(YT).getImmediate();return{logEvent:(r,i,s)=>NN(n,r,i,s)}}catch(n){throw Ir.create("interop-component-reg-failed",{reason:n})}}}e2();const t2="@firebase/analytics-compat",n2="0.1.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.app=e,this._delegate=n}logEvent(e,n,r){NN(this._delegate,e,n,r)}setCurrentScreen(e,n){QW(this._delegate,e,n)}setUserId(e,n){XW(this._delegate,e,n)}setUserProperties(e,n){JW(this._delegate,e,n)}setAnalyticsCollectionEnabled(e){ZW(this._delegate,e)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oy;(function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"})(oy||(oy={}));/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("analytics").getImmediate();return new xN(e,n)};function i2(){const t={Analytics:xN,settings:BW,isSupported:YW,EventName:oy};et.INTERNAL.registerComponent(new Be("analytics-compat",r2,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}i2();et.registerVersion(t2,n2);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=new Map,s2={activated:!1,tokenObservers:[]},o2={initialized:!1,enabled:!1};function Xt(t){return PN.get(t)||s2}function Br(t,e){PN.set(t,e)}function ng(){return o2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="https://content-firebaseappcheck.googleapis.com/v1",a2="exchangeRecaptchaV3Token",l2="exchangeRecaptchaEnterpriseToken",c2="exchangeDebugToken",t0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},u2=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ot,await h2(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ot,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function h2(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Mn=new Un("appCheck","AppCheck",f2);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t=!1){var e;return t?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function ON(t){if(!Xt(t).activated)throw Mn.create("use-before-activation",{appName:t.name})}function p2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function yw(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),s=e-n*3600*24-r*3600-i*60;let o="";return n&&(o+=kh(n)+"d:"),r&&(o+=kh(r)+"h:"),o+=kh(i)+"m:"+kh(s)+"s",o}function kh(t){return t===0?"00":t>=10?t.toString():"0"+t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,s)}catch(d){throw Mn.create("fetch-network-error",{originalErrorMessage:d.message})}if(o.status!==200)throw Mn.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(d){throw Mn.create("fetch-parse-error",{originalErrorMessage:d.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Mn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,u=Date.now();return{token:a.token,expireTimeMillis:u+c,issuedAtTimeMillis:u}}function g2(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${vw}/projects/${n}/apps/${r}:${a2}?key=${i}`,body:{recaptcha_v3_token:e}}}function m2(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${vw}/projects/${n}/apps/${r}:${l2}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function v2(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${vw}/projects/${n}/apps/${r}:${c2}?key=${i}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="firebase-app-check-database",_2=1,Uu="firebase-app-check-store",DN="debug-token";let Ah=null;function MN(){return Ah||(Ah=new Promise((t,e)=>{try{const n=indexedDB.open(y2,_2);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Mn.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Uu,{keyPath:"compositeKey"})}}}catch(n){e(Mn.create("storage-open",{originalErrorMessage:n.message}))}}),Ah)}function w2(t){return FN($N(t))}function b2(t,e){return LN($N(t),e)}function I2(t){return LN(DN,t)}function E2(){return FN(DN)}async function LN(t,e){const r=(await MN()).transaction(Uu,"readwrite"),s=r.objectStore(Uu).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var c;a(Mn.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}async function FN(t){const n=(await MN()).transaction(Uu,"readonly"),i=n.objectStore(Uu).get(t);return new Promise((s,o)=>{i.onsuccess=a=>{const l=a.target.result;s(l?l.value:void 0)},n.onerror=a=>{var l;o(Mn.create("storage-get",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})}function $N(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new bi("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(t){if(zn()){let e;try{e=await w2(t)}catch(n){Bu.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function n0(t,e){return zn()?b2(t,e).catch(n=>{Bu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function S2(){let t;try{t=await E2()}catch{}if(t)return t;{const e=p2();return I2(e).catch(n=>Bu.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(){return ng().enabled}async function UN(){const t=ng();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function C2(){const t=ij(),e=ng();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new Ot;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(S2())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2={error:"UNKNOWN_ERROR"};function A2(t){return Yp.encodeString(JSON.stringify(t),!1)}async function Of(t,e=!1){const n=t.app;ON(n);const r=Xt(n);let i=r.token,s;if(!i){const l=await r.cachedTokenPromise;l&&Df(l)&&(i=l)}if(!e&&i&&Df(i))return{token:i.token};let o=!1;if(VN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_w(v2(n,await UN()),t.heartbeatServiceProvider).then(c=>(r.exchangeTokenPromise=void 0,c)),o=!0);const l=await r.exchangeTokenPromise;return await n0(n,l),Br(n,Object.assign(Object.assign({},r),{token:l})),{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(l=>(r.exchangeTokenPromise=void 0,l)),o=!0),i=await r.exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Bu.warn(l.message):Bu.error(l),s=l}let a;return i?(a={token:i.token},Br(n,Object.assign(Object.assign({},r),{token:i})),await n0(n,i)):a=N2(s),o&&BN(n,a),a}function ww(t,e,n,r){const{app:i}=t,s=Xt(i),o={next:n,error:r,type:e};if(Br(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&Df(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),r0(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>r0(t))}function bw(t,e){const n=Xt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Br(t,Object.assign(Object.assign({},n),{tokenObservers:r}))}function r0(t){const{app:e}=t,n=Xt(e);let r=n.tokenRefresher;r||(r=R2(t),Br(e,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function R2(t){const{app:e}=t;return new d2(async()=>{const n=Xt(e);let r;if(n.token?r=await Of(t,!0):r=await Of(t),r.error)throw r.error},()=>!0,()=>{const n=Xt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},t0.RETRIAL_MIN_WAIT,t0.RETRIAL_MAX_WAIT)}function BN(t,e){const n=Xt(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Df(t){return t.expireTimeMillis-Date.now()>0}function N2(t){return{token:A2(k2),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Xt(this.app);for(const n of e)bw(this.app,n.next);return Promise.resolve()}}function P2(t,e){return new x2(t,e)}function O2(t){return{getToken:e=>Of(t,e),addTokenListener:e=>ww(t,"INTERNAL",e),removeTokenListener:e=>bw(t.app,e)}}const D2="@firebase/app-check",M2="0.5.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="https://www.google.com/recaptcha/api.js",F2="https://www.google.com/recaptcha/enterprise.js";function $2(t,e){const n=Xt(t),r=new Ot;Br(t,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:r}}));const i=jN(t),s=Pf(!1);return s?Mf(t,e,s,i,r):B2(()=>{const o=Pf(!1);if(!o)throw new Error("no recaptcha");Mf(t,e,o,i,r)}),r.promise}function V2(t,e){const n=Xt(t),r=new Ot;Br(t,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:r}}));const i=jN(t),s=Pf(!0);return s?Mf(t,e,s,i,r):j2(()=>{const o=Pf(!0);if(!o)throw new Error("no recaptcha");Mf(t,e,o,i,r)}),r.promise}function Mf(t,e,n,r,i){n.ready(()=>{U2(t,e,n,r),i.resolve(n)})}function jN(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function qN(t){ON(t);const n=await Xt(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Xt(t).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function U2(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible"}),s=Xt(t);Br(t,Object.assign(Object.assign({},s),{reCAPTCHAState:Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}))}function B2(t){const e=document.createElement("script");e.src=L2,e.onload=t,document.head.appendChild(e)}function j2(t){const e=document.createElement("script");e.src=F2,e.onload=t,document.head.appendChild(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e;HN(this._throttleData);const n=await qN(this._app).catch(i=>{throw Mn.create("recaptcha-error")});let r;try{r=await _w(g2(this._app,n),this._heartbeatServiceProvider)}catch(i){throw i.code==="fetch-status-error"?(this._throttleData=WN(Number((e=i.customData)===null||e===void 0?void 0:e.httpStatus),this._throttleData),Mn.create("throttled",{time:yw(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):i}return this._throttleData=null,r}initialize(e){this._app=e,this._heartbeatServiceProvider=Ii(e,"heartbeat"),$2(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof ju?this._siteKey===e._siteKey:!1}}class rg{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e;HN(this._throttleData);const n=await qN(this._app).catch(i=>{throw Mn.create("recaptcha-error")});let r;try{r=await _w(m2(this._app,n),this._heartbeatServiceProvider)}catch(i){throw i.code==="fetch-status-error"?(this._throttleData=WN(Number((e=i.customData)===null||e===void 0?void 0:e.httpStatus),this._throttleData),Mn.create("throttled",{time:yw(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):i}return this._throttleData=null,r}initialize(e){this._app=e,this._heartbeatServiceProvider=Ii(e,"heartbeat"),V2(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof rg?this._siteKey===e._siteKey:!1}}class qu{constructor(e){this._customProviderOptions=e}async getToken(){const e=await this._customProviderOptions.getToken(),n=lj(e.token),r=n!==null&&n<Date.now()&&n>0?n*1e3:Date.now();return Object.assign(Object.assign({},e),{issuedAtTimeMillis:r})}initialize(e){this._app=e}isEqual(e){return e instanceof qu?this._customProviderOptions.getToken.toString()===e._customProviderOptions.getToken.toString():!1}}function WN(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+u2,httpStatus:t};{const n=e?e.backoffCount:0,r=Rf(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function HN(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw Mn.create("throttled",{time:yw(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t=Zp(),e){t=$(t);const n=Ii(t,"app-check");if(ng().initialized||C2(),VN()&&UN().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw Mn.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return W2(t,e.provider,e.isTokenAutoRefreshEnabled),Xt(t).isTokenAutoRefreshEnabled&&ww(r,"INTERNAL",()=>{}),r}function W2(t,e,n){const r=Xt(t),i=Object.assign(Object.assign({},r),{activated:!0});i.provider=e,i.cachedTokenPromise=T2(t).then(s=>(s&&Df(s)&&(Br(t,Object.assign(Object.assign({},Xt(t)),{token:s})),BN(t,{token:s.token})),s)),i.isTokenAutoRefreshEnabled=n===void 0?t.automaticDataCollectionEnabled:n,Br(t,i),i.provider.initialize(t)}function H2(t,e){const n=t.app,r=Xt(n);r.tokenRefresher&&(e===!0?r.tokenRefresher.start():r.tokenRefresher.stop()),Br(n,Object.assign(Object.assign({},r),{isTokenAutoRefreshEnabled:e}))}async function K2(t,e){const n=await Of(t,e);if(n.error)throw n.error;return{token:n.token}}function G2(t,e,n,r){let i=()=>{},s=()=>{};return e.next!=null?i=e.next.bind(e):i=e,e.error!=null?s=e.error.bind(e):n&&(s=n),ww(t,"EXTERNAL",i,s),()=>bw(t.app,i)}const z2="app-check",i0="app-check-internal";function Y2(){yt(new Be(z2,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return P2(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(i0).initialize()})),yt(new Be(i0,t=>{const e=t.getProvider("app-check").getImmediate();return O2(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ze(D2,M2)}Y2();const Q2="@firebase/app-check-compat",X2="0.2.8";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2={["use-before-activation"]:"App Check is being used before activate() is called for FirebaseApp {$appName}. Call activate() before instantiating other Firebase services."},Mm=new Un("appCheck","AppCheck",J2);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.app=e}activate(e,n){let r;typeof e=="string"?r=new ju(e):e instanceof rg||e instanceof ju||e instanceof qu?r=e:r=new qu({getToken:e.getToken}),this._delegate=q2(this.app,{provider:r,isTokenAutoRefreshEnabled:n})}setTokenAutoRefreshEnabled(e){if(!this._delegate)throw Mm.create("use-before-activation",{appName:this.app.name});H2(this._delegate,e)}getToken(e){if(!this._delegate)throw Mm.create("use-before-activation",{appName:this.app.name});return K2(this._delegate,e)}onTokenChanged(e,n,r){if(!this._delegate)throw Mm.create("use-before-activation",{appName:this.app.name});return G2(this._delegate,e,n)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH=t=>{const e=t.getProvider("app-compat").getImmediate();return new Z2(e)};function tH(){et.INTERNAL.registerComponent(new Be("appCheck-compat",eH,"PUBLIC").setServiceProps({ReCaptchaEnterpriseProvider:rg,ReCaptchaV3Provider:ju,CustomProvider:qu}))}tH();et.registerVersion(Q2,X2);function Iw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Rc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ha={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function KN(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rH=nH,iH=KN,GN=new Un("auth","Firebase",KN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=new bi("@firebase/auth");function nf(t,...e){s0.logLevel<=Te.ERROR&&s0.error(`Auth (${Ei}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t,...e){throw Ew(t,...e)}function gn(t,...e){return Ew(t,...e)}function zN(t,e,n){const r=Object.assign(Object.assign({},iH()),{[e]:n});return new Un("auth","Firebase",r).create(e,{appName:t.name})}function sc(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jt(t,"argument-error"),zN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ew(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return GN.create(t,...e)}function j(t,e,...n){if(!t)throw Ew(e,...n)}function ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nf(e),new Error(e)}function jr(t,e){t||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Map;function ir(t){jr(t instanceof Function,"Expected a class definition");let e=o0.get(t);return e?(jr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,o0.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sH(t,e){const n=Ii(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Af(s,e!=null?e:{}))return i;Jt(i,"already-initialized")}return n.initialize({options:e})}function oH(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ir);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Tw(){return a0()==="http:"||a0()==="https:"}function a0(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aH(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Tw()||Rd()||"connection"in navigator)?navigator.onLine:!0}function lH(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n){this.shortDelay=e,this.longDelay=n,jr(n>e,"Short delay should be less than long delay!"),this.isMobile=Qp()||Nd()}get(){return aH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e){jr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=new Od(3e4,6e4);function $t(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function sn(t,e,n,r,i={}){return QN(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ta(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),YN.fetch()(XN(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function QN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},cH),e);try{const i=new dH(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Gc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Gc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Gc(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zN(t,u,c);Jt(t,u)}}catch(i){if(i instanceof Et)throw i;Jt(t,"network-request-failed")}}async function es(t,e,n,r,i={}){const s=await sn(t,e,n,r,i);return"mfaPendingCredential"in s&&Jt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function XN(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Sw(t.config,i):`${t.config.apiScheme}://${i}`}class dH{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gn(this.auth,"network-request-failed")),uH.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=gn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hH(t,e){return sn(t,"POST","/v1/accounts:delete",e)}async function fH(t,e){return sn(t,"POST","/v1/accounts:update",e)}async function pH(t,e){return sn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gH(t,e=!1){const n=$(t),r=await n.getIdToken(e),i=ig(r);j(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ru(Lm(i.auth_time)),issuedAtTime:ru(Lm(i.iat)),expirationTime:ru(Lm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Lm(t){return Number(t)*1e3}function ig(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nf("JWT malformed, contained fewer than 3 sections"),null;try{const i=ey(n);return i?JSON.parse(i):(nf("Failed to decode base64 JWT payload"),null)}catch(i){return nf("Caught error parsing JWT payload as JSON",i),null}}function mH(t){const e=ig(t);return j(e,"internal-error"),j(typeof e.exp!="undefined","internal-error"),j(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Et&&vH(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function vH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ru(this.lastLoginAt),this.creationTime=ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Hi(t,pH(n,{idToken:r}));j(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?bH(s.providerUserInfo):[],a=wH(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new JN(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function _H(t){const e=$(t);await Hu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wH(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bH(t){return t.map(e=>{var{providerId:n}=e,r=Iw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IH(t,e){const n=await QN(t,{},async()=>{const r=Ta({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=XN(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",YN.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken!="undefined","internal-error"),j(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):mH(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return j(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await IH(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ku;return r&&(j(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(j(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(j(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ku,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t,e){j(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Mo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Iw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new JN(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Hi(this,this.stsTokenManager.getToken(this.auth,e));return j(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gH(this,e)}reload(){return _H(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Mo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Hi(this,hH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,b=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:T,emailVerified:C,isAnonymous:S,providerData:A,stsTokenManager:k}=n;j(T&&k,e,"internal-error");const P=Ku.fromJSON(this.name,k);j(typeof T=="string",e,"internal-error"),as(d,e.name),as(h,e.name),j(typeof C=="boolean",e,"internal-error"),j(typeof S=="boolean",e,"internal-error"),as(f,e.name),as(p,e.name),as(g,e.name),as(m,e.name),as(v,e.name),as(b,e.name);const O=new Mo({uid:T,auth:e,email:h,emailVerified:C,displayName:d,isAnonymous:S,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:P,createdAt:v,lastLoginAt:b});return A&&Array.isArray(A)&&(O.providerData=A.map(W=>Object.assign({},W))),m&&(O._redirectEventId=m),O}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ku;i.updateFromServerResponse(n);const s=new Mo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hu(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZN.type="NONE";const Rl=ZN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t,e,n){return`firebase:${t}:${e}:${n}`}class pl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Lo(this.userKey,i.apiKey,s),this.fullPersistenceKey=Lo("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new pl(ir(Rl),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||ir(Rl);const o=Lo(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=Mo._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new pl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new pl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ex(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rx(e))return"Blackberry";if(ix(e))return"Webos";if(Cw(e))return"Safari";if((e.includes("chrome/")||tx(e))&&!e.includes("edge/"))return"Chrome";if(Dd(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ex(t=dt()){return/firefox\//i.test(t)}function Cw(t=dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tx(t=dt()){return/crios\//i.test(t)}function nx(t=dt()){return/iemobile/i.test(t)}function Dd(t=dt()){return/android/i.test(t)}function rx(t=dt()){return/blackberry/i.test(t)}function ix(t=dt()){return/webos/i.test(t)}function oc(t=dt()){return/iphone|ipad|ipod/i.test(t)}function EH(t=dt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function TH(t=dt()){var e;return oc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function SH(){return lw()&&document.documentMode===10}function sx(t=dt()){return oc(t)||Dd(t)||ix(t)||rx(t)||/windows phone/i.test(t)||nx(t)}function CH(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t,e=[]){let n;switch(t){case"Browser":n=l0(dt());break;case"Worker":n=`${l0(dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ei}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c0(this),this.idTokenSubscription=new c0(this),this.beforeStateQueue=new kH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GN,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ir(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await pl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l==null?void 0:l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hu(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?$(e):null;return n&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Un("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ir(e)||this._popupRedirectResolver;j(n,this,"argument-error"),this.redirectPersistenceManager=await pl.create(this,[ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return j(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ox(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Zt(t){return $(t)}class c0{constructor(e){this.auth=e,this.observer=null,this.addObserver=GR(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function RH(t,e,n){const r=Zt(t);j(r._canInitEmulator,r,"emulator-config-failed"),j(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=ax(e),{host:o,port:a}=NH(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||xH()}function ax(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NH(t){const e=ax(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:u0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:u0(o)}}}function u0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xH(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,n){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lx(t,e){return sn(t,"POST","/v1/accounts:resetPassword",$t(t,e))}async function cx(t,e){return sn(t,"POST","/v1/accounts:update",e)}async function PH(t,e){return sn(t,"POST","/v1/accounts:update",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OH(t,e){return es(t,"POST","/v1/accounts:signInWithPassword",$t(t,e))}async function sg(t,e){return sn(t,"POST","/v1/accounts:sendOobCode",$t(t,e))}async function DH(t,e){return sg(t,e)}async function MH(t,e){return sg(t,e)}async function LH(t,e){return sg(t,e)}async function FH(t,e){return sg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $H(t,e){return es(t,"POST","/v1/accounts:signInWithEmailLink",$t(t,e))}async function VH(t,e){return es(t,"POST","/v1/accounts:signInWithEmailLink",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends ac{constructor(e,n,r,i=null){super("password",r);this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Gu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Gu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return OH(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return $H(e,{email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return cx(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return VH(e,{idToken:n,email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ui(t,e){return es(t,"POST","/v1/accounts:signInWithIdp",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UH="http://localhost";class fi extends ac{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){const n=new fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Iw(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new fi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ui(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ui(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ui(e,n)}buildRequest(){const e={requestUri:UH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ta(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BH(t,e){return sn(t,"POST","/v1/accounts:sendVerificationCode",$t(t,e))}async function jH(t,e){return es(t,"POST","/v1/accounts:signInWithPhoneNumber",$t(t,e))}async function qH(t,e){const n=await es(t,"POST","/v1/accounts:signInWithPhoneNumber",$t(t,e));if(n.temporaryProof)throw Gc(t,"account-exists-with-different-credential",n);return n}const WH={USER_NOT_FOUND:"user-not-found"};async function HH(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return es(t,"POST","/v1/accounts:signInWithPhoneNumber",$t(t,n),WH)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends ac{constructor(e){super("phone","phone");this.params=e}static _fromVerification(e,n){return new Fo({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Fo({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return jH(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return qH(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return HH(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Fo({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GH(t){const e=ol(Kc(t)).link,n=e?ol(Kc(e)).deep_link_id:null,r=ol(Kc(t)).deep_link_id;return(r?ol(Kc(r)).link:null)||r||n||e||t}class og{constructor(e){var n,r,i,s,o,a;const l=ol(Kc(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=KH((i=l.mode)!==null&&i!==void 0?i:null);j(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=GH(e);try{return new og(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.providerId=Xs.PROVIDER_ID}static credential(e,n){return Gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=og.parseLink(n);return j(r,"argument-error"),Gu._fromEmailAndCode(e,r.code,r.tenantId)}}Xs.PROVIDER_ID="password";Xs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends ts{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class gl extends lc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return j("providerId"in n&&"signInMethod"in n,"argument-error"),fi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return j(e.idToken||e.accessToken,"argument-error"),fi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return gl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return gl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new gl(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends lc{constructor(){super("facebook.com")}static credential(e){return fi._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends lc{constructor(){super("google.com");this.addScope("profile")}static credential(e,n){return fi._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zr.credential(n,r)}catch{return null}}}Zr.GOOGLE_SIGN_IN_METHOD="google.com";Zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends lc{constructor(){super("github.com")}static credential(e){return fi._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.GITHUB_SIGN_IN_METHOD="github.com";ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH="http://localhost";class Nl extends ac{constructor(e,n){super(e,e);this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ui(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ui(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ui(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Nl(r,s)}static _create(e,n){return new Nl(e,n)}buildRequest(){return{requestUri:zH,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH="saml.";class Lf extends ts{constructor(e){j(e.startsWith(YH),"argument-error");super(e)}static credentialFromResult(e){return Lf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Lf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Nl.fromJSON(e);return j(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Nl._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends lc{constructor(){super("twitter.com")}static credential(e,n){return fi._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ti.credential(n,r)}catch{return null}}}ti.TWITTER_SIGN_IN_METHOD="twitter.com";ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(t,e){return es(t,"POST","/v1/accounts:signUp",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Mo._fromIdTokenResponse(e,r,i),o=d0(r);return new Sr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=d0(r);return new Sr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function d0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QH(t){var e;const n=Zt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Sr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ux(n,{returnSecureToken:!0}),i=await Sr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends Et{constructor(e,n,r,i){var s;super(n.code,n.message);this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ff.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ff(e,n,r,i)}}function dx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ff._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XH(t,e){const n=$(t);await ag(!0,n,e);const{providerUserInfo:r}=await fH(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=hx(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function kw(t,e,n=!1){const r=await Hi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Sr._forOperation(t,"link",r)}async function ag(t,e,n){await Hu(e);const r=hx(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";j(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fx(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Hi(t,dx(r,i,e,t),n);j(s.idToken,r,"internal-error");const o=ig(s.idToken);j(o,r,"internal-error");const{sub:a}=o;return j(t.uid===a,r,"user-mismatch"),Sr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Jt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(t,e,n=!1){const r="signIn",i=await dx(t,r,e),s=await Sr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function lg(t,e){return px(Zt(t),e)}async function gx(t,e){const n=$(t);return await ag(!1,n,e.providerId),kw(n,e)}async function mx(t,e){return fx($(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JH(t,e){return es(t,"POST","/v1/accounts:signInWithCustomToken",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZH(t,e){const n=Zt(t),r=await JH(n,{token:e,returnSecureToken:!0}),i=await Sr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Aw._fromServerResponse(e,n):Jt(e,"internal-error")}}class Aw extends cg{constructor(e){super("phone",e);this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Aw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e,n){var r;j(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),j(typeof n.dynamicLinkDomain=="undefined"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(j(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(j(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eK(t,e,n){const r=$(t),i={requestType:"PASSWORD_RESET",email:e};n&&ug(r,i,n),await MH(r,i)}async function tK(t,e,n){await lx($(t),{oobCode:e,newPassword:n})}async function nK(t,e){await PH($(t),{oobCode:e})}async function vx(t,e){const n=$(t),r=await lx(n,{oobCode:e}),i=r.requestType;switch(j(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(r.mfaInfo,n,"internal-error");default:j(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=cg._fromServerResponse(Zt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function rK(t,e){const{data:n}=await vx($(t),e);return n.email}async function iK(t,e,n){const r=Zt(t),i=await ux(r,{returnSecureToken:!0,email:e,password:n}),s=await Sr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function sK(t,e,n){return lg($(t),Xs.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oK(t,e,n){const r=$(t),i={requestType:"EMAIL_SIGNIN",email:e};j(n.handleCodeInApp,r,"argument-error"),n&&ug(r,i,n),await LH(r,i)}function aK(t,e){const n=og.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function lK(t,e,n){const r=$(t),i=Xs.credentialWithLink(e,n||Wu());return j(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),lg(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cK(t,e){return sn(t,"POST","/v1/accounts:createAuthUri",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uK(t,e){const n=Tw()?Wu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await cK($(t),r);return i||[]}async function dK(t,e){const n=$(t),r=await t.getIdToken(),i={requestType:"VERIFY_EMAIL",idToken:r};e&&ug(n.auth,i,e);const{email:s}=await DH(n.auth,i);s!==t.email&&await t.reload()}async function hK(t,e,n){const r=$(t),i=await t.getIdToken(),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:e};n&&ug(r.auth,s,n);const{email:o}=await FH(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fK(t,e){return sn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pK(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=$(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Hi(r,fK(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function gK(t,e){return yx($(t),e,null)}function mK(t,e){return yx($(t),null,e)}async function yx(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Hi(t,cx(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vK(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t==null?void 0:t.idToken)){const o=(n=(e=ig(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new ml(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new yK(s,i);case"github.com":return new _K(s,i);case"google.com":return new wK(s,i);case"twitter.com":return new bK(s,i,t.screenName||null);case"custom":case"anonymous":return new ml(s,null);default:return new ml(s,r,i)}}class ml{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class _x extends ml{constructor(e,n,r,i){super(e,n,r);this.username=i}}class yK extends ml{constructor(e,n){super(e,"facebook.com",n)}}class _K extends _x{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class wK extends ml{constructor(e,n){super(e,"google.com",n)}}class bK extends _x{constructor(e,n,r){super(e,"twitter.com",n,r)}}function IK(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:vK(n)}class Co{constructor(e,n){this.type=e,this.credential=n}static _fromIdtoken(e){return new Co("enroll",e)}static _fromMfaPendingCredential(e){return new Co("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Co._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Co._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Zt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>cg._fromServerResponse(r,a));j(i.mfaPendingCredential,r,"internal-error");const o=Co._fromMfaPendingCredential(i.mfaPendingCredential);return new Rw(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const u=await Sr._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(u.user),u;case"reauthenticate":return j(n.user,r,"internal-error"),Sr._forOperation(n.user,n.operationType,c);default:Jt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function EK(t,e){var n;const r=$(t),i=e;return j(e.customData.operationType,r,"argument-error"),j((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Rw._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(t,e){return sn(t,"POST","/v2/accounts/mfaEnrollment:start",$t(t,e))}function SK(t,e){return sn(t,"POST","/v2/accounts/mfaEnrollment:finalize",$t(t,e))}function CK(t,e){return sn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(t,e))}class Nw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>cg._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Nw(e)}async getSession(){return Co._fromIdtoken(await this.user.getIdToken())}async enroll(e,n){const r=e,i=await this.getSession(),s=await Hi(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken(),i=await Hi(this.user,CK(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i);try{await this.user.reload()}catch(s){if(s.code!=="auth/user-token-expired")throw s}}}const Fm=new WeakMap;function kK(t){const e=$(t);return Fm.has(e)||Fm.set(e,Nw._fromUser(e)),Fm.get(e)}const $f="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($f,"1"),this.storage.removeItem($f),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AK(){const t=dt();return Cw(t)||oc(t)}const RK=1e3,NK=10;class bx extends wx{constructor(){super(()=>window.localStorage,"LOCAL");this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=AK()&&CH(),this.fallbackToPolling=sx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);SH()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,NK):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bx.type="LOCAL";const dg=bx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix extends wx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ix.type="SESSION";const Ms=Ix;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xK(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new hg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await xK(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Md("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return window}function OK(t){Pt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(){return typeof Pt().WorkerGlobalScope!="undefined"&&typeof Pt().importScripts=="function"}async function DK(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MK(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LK(){return xw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="firebaseLocalStorageDb",FK=1,Vf="firebaseLocalStorage",Tx="fbase_key";class Ld{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fg(t,e){return t.transaction([Vf],e?"readwrite":"readonly").objectStore(Vf)}function $K(){const t=indexedDB.deleteDatabase(Ex);return new Ld(t).toPromise()}function ay(){const t=indexedDB.open(Ex,FK);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Vf,{keyPath:Tx})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Vf)?e(r):(r.close(),await $K(),e(await ay()))})})}async function h0(t,e,n){const r=fg(t,!0).put({[Tx]:e,value:n});return new Ld(r).toPromise()}async function VK(t,e){const n=fg(t,!1).get(e),r=await new Ld(n).toPromise();return r===void 0?null:r.value}function f0(t,e){const n=fg(t,!0).delete(e);return new Ld(n).toPromise()}const UK=800,BK=3;class Sx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ay(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>BK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hg._getInstance(LK()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await DK(),!this.activeServiceWorker)return;this.sender=new PK(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ay();return await h0(e,$f,"1"),await f0(e,$f),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>h0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>VK(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>f0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=fg(i,!1).getAll();return new Ld(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Sx.type="LOCAL";const xl=Sx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jK(t,e){return sn(t,"POST","/v2/accounts/mfaSignIn:start",$t(t,e))}function qK(t,e){return sn(t,"POST","/v2/accounts/mfaSignIn:finalize",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WK(t){return(await sn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HK(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Cx(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=gn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",HK().appendChild(r)})}function kx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK=500,GK=6e4,Rh=1e12;class zK{constructor(e){this.auth=e,this.counter=Rh,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new YK(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Rh;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Rh;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Rh;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class YK{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;j(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=QK(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},GK)},KK))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function QK(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=kx("rcb"),XK=new Od(3e4,6e4),JK="https://www.google.com/recaptcha/api.js?";class ZK{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Pt().grecaptcha}load(e,n=""){return j(eG(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Pt().grecaptcha):new Promise((r,i)=>{const s=Pt().setTimeout(()=>{i(gn(e,"network-request-failed"))},XK.get());Pt()[$m]=()=>{Pt().clearTimeout(s),delete Pt()[$m];const a=Pt().grecaptcha;if(!a){i(gn(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const d=l(c,u);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${JK}?${Ta({onload:$m,render:"explicit",hl:n})}`;Cx(o).catch(()=>{clearTimeout(s),i(gn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Pt().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function eG(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class tG{async load(e){return new zK(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="recaptcha",nG={theme:"light",type:"image"};class rG{constructor(e,n=Object.assign({},nG),r){this.parameters=n,this.type=Ax,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Zt(r),this.isInvisible=this.parameters.size==="invisible",j(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;j(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tG:new ZK,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{!o||(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Pt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){j(Tw()&&!xw(),this.auth,"internal-error"),await iG(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await WK(this.auth);j(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function iG(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Fo._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function sG(t,e,n){const r=Zt(t),i=await pg(r,e,$(n));return new Pw(i,s=>lg(r,s))}async function oG(t,e,n){const r=$(t);await ag(!1,r,"phone");const i=await pg(r.auth,e,$(n));return new Pw(i,s=>gx(r,s))}async function aG(t,e,n){const r=$(t),i=await pg(r.auth,e,$(n));return new Pw(i,s=>mx(r,s))}async function pg(t,e,n){var r;const i=await n.verify();try{j(typeof i=="string",t,"argument-error"),j(n.type===Ax,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return j(o.type==="enroll",t,"internal-error"),(await TK(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{j(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return j(a,t,"missing-multi-factor-info"),(await jK(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await BH(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function lG(t,e){await kw($(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.providerId=Vr.PROVIDER_ID,this.auth=Zt(e)}verifyPhoneNumber(e,n){return pg(this.auth,e,$(n))}static credential(e,n){return Fo._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Vr.credentialFromTaggedObject(n)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Fo._fromTokenResponse(n,r):null}}Vr.PROVIDER_ID="phone";Vr.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t,e){return e?ir(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow extends ac{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return Ui(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ui(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ui(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cG(t){return px(t.auth,new Ow(t),t.bypassAuthState)}function uG(t){const{auth:e,user:n}=t;return j(n,e,"internal-error"),fx(n,new Ow(t),t.bypassAuthState)}async function dG(t){const{auth:e,user:n}=t;return j(n,e,"internal-error"),kw(n,new Ow(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cG;case"linkViaPopup":case"linkViaRedirect":return dG;case"reauthViaPopup":case"reauthViaRedirect":return uG;default:Jt(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hG=new Od(2e3,1e4);async function fG(t,e,n){const r=Zt(t);sc(t,e,ts);const i=Sa(r,n);return new Pi(r,"signInViaPopup",e,i).executeNotNull()}async function pG(t,e,n){const r=$(t);sc(r.auth,e,ts);const i=Sa(r.auth,n);return new Pi(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function gG(t,e,n){const r=$(t);sc(r.auth,e,ts);const i=Sa(r.auth,n);return new Pi(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Pi extends Rx{constructor(e,n,r,i,s){super(e,n,i,s);this.provider=r,this.authWindow=null,this.pollId=null,Pi.currentPopupAction&&Pi.currentPopupAction.cancel(),Pi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return j(e,this.auth,"internal-error"),e}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const e=Md();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,hG.get())};e()}}Pi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mG="pendingRedirect",iu=new Map;class vG extends Rx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r);this.eventId=null}async execute(){let e=iu.get(this.auth._key());if(!e){try{const r=await yG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}iu.set(this.auth._key(),e)}return this.bypassAuthState||iu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yG(t,e){const n=xx(e),r=Nx(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Dw(t,e){return Nx(t)._set(xx(e),"true")}function _G(){iu.clear()}function Mw(t,e){iu.set(t._key(),e)}function Nx(t){return ir(t._redirectPersistence)}function xx(t){return Lo(mG,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wG(t,e,n){return bG(t,e,n)}async function bG(t,e,n){const r=Zt(t);sc(t,e,ts);const i=Sa(r,n);return await Dw(i,r),i._openRedirect(r,e,"signInViaRedirect")}function IG(t,e,n){return EG(t,e,n)}async function EG(t,e,n){const r=$(t);sc(r.auth,e,ts);const i=Sa(r.auth,n);await Dw(i,r.auth);const s=await Px(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function TG(t,e,n){return SG(t,e,n)}async function SG(t,e,n){const r=$(t);sc(r.auth,e,ts);const i=Sa(r.auth,n);await ag(!1,r,e.providerId),await Dw(i,r.auth);const s=await Px(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function CG(t,e){return await Zt(t)._initializationPromise,gg(t,e,!1)}async function gg(t,e,n=!1){const r=Zt(t),i=Sa(r,e),o=await new vG(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function Px(t){const e=Md(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kG=10*60*1e3;class Ox{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AG(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Dx(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kG&&this.cachedEventUids.clear(),this.cachedEventUids.has(p0(e))}saveEventToCache(e){this.cachedEventUids.add(p0(e)),this.lastProcessedEventTime=Date.now()}}function p0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Dx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(t,e={}){return sn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NG=/^https?/;async function xG(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Mx(t);for(const n of e)try{if(PG(n))return}catch{}Jt(t,"unauthorized-domain")}function PG(t){const e=Wu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!NG.test(n))return!1;if(RG.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OG=new Od(3e4,6e4);function g0(){const t=Pt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function DG(t){return new Promise((e,n)=>{var r,i,s;function o(){g0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g0(),n(gn(t,"network-request-failed"))},timeout:OG.get()})}if(!((i=(r=Pt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Pt().gapi)===null||s===void 0)&&s.load)o();else{const a=kx("iframefcb");return Pt()[a]=()=>{gapi.load?o():n(gn(t,"network-request-failed"))},Cx(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw rf=null,e})}let rf=null;function MG(t){return rf=rf||DG(t),rf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LG=new Od(5e3,15e3),FG="__/auth/iframe",$G="emulator/auth/iframe",VG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BG(t){const e=t.config;j(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sw(e,$G):`https://${t.config.authDomain}/${FG}`,r={apiKey:e.apiKey,appName:t.name,v:Ei},i=UG.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ta(r).slice(1)}`}async function jG(t){const e=await MG(t),n=Pt().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:BG(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VG,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=gn(t,"network-request-failed"),a=Pt().setTimeout(()=>{s(o)},LG.get());function l(){Pt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WG=500,HG=600,KG="_blank",GG="http://localhost";class m0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zG(t,e,n,r=WG,i=HG){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},qG),{width:r.toString(),height:i.toString(),top:s,left:o}),c=dt().toLowerCase();n&&(a=tx(c)?KG:n),ex(c)&&(e=e||GG,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(TH(c)&&a!=="_self")return YG(e||"",a),new m0(null);const d=window.open(e||"",a,u);j(d,t,"popup-blocked");try{d.focus()}catch{}return new m0(d)}function YG(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QG="__/auth/handler",XG="emulator/auth/handler";function ly(t,e,n,r,i,s){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ei,eventId:i};if(e instanceof ts){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Cf(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof lc){const l=e.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${JG(t)}?${Ta(a).slice(1)}`}function JG({config:t}){return t.emulator?Sw(t,XG):`https://${t.authDomain}/${QG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="webStorageSupport";class ZG{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ms,this._completeRedirectFn=gg,this._overrideRedirectResult=Mw}async _openPopup(e,n,r,i){var s;jr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=ly(e,n,r,Wu(),i);return zG(e,o,Md())}async _openRedirect(e,n,r,i){return await this._originValidation(e),OK(ly(e,n,r,Wu(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(jr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await jG(e),r=new Ox(e);return n.register("authEvent",i=>(j(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vm,{type:Vm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Vm];o!==void 0&&n(!!o),Jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xG(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sx()||Cw()||oc()}}const Lx=ZG;class ez{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return ii("unexpected MultiFactorSessionType")}}}class Lw extends ez{constructor(e){super("phone");this.credential=e}static _fromCredential(e){return new Lw(e)}_finalizeEnroll(e,n,r){return SK(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return qK(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Fx{constructor(){}static assertion(e){return Lw._fromCredential(e)}}Fx.FACTOR_ID="phone";var v0="@firebase/auth",y0="0.20.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var i;e(((i=r)===null||i===void 0?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function rz(t){yt(new Be("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,l)=>{j(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),j(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ox(t)},u=new AH(a,l,c);return oH(u,n),u})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yt(new Be("auth-internal",e=>{const n=Zt(e.getProvider("auth").getImmediate());return(r=>new tz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ze(v0,y0,nz(t)),Ze(v0,y0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Toe(t=Zp()){const e=Ii(t,"auth");return e.isInitialized()?e.getImmediate():sH(t,{popupRedirectResolver:Lx,persistence:[xl,dg,Ms]})}rz("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=2e3;async function sz(t,e,n){var r;const{BuildInfo:i}=Ko();jr(e.sessionId,"AuthEvent did not contain a session ID");const s=await uz(e.sessionId),o={};return oc()?o.ibi=i.packageName:Dd()?o.apn=i.packageName:Jt(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,ly(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function oz(t){const{BuildInfo:e}=Ko(),n={};oc()?n.iosBundleId=e.packageName:Dd()?n.androidPackageName=e.packageName:Jt(t,"operation-not-supported-in-this-environment"),await Mx(t,n)}function az(t){const{cordova:e}=Ko();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,EH()?"_blank":"_system","location=yes"),n(i)})})}async function lz(t,e,n){const{cordova:r}=Ko();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(gn(t,"redirect-cancelled-by-user"))},iz))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Dd()&&document.addEventListener("visibilitychange",u,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{i()}}function cz(t){var e,n,r,i,s,o,a,l,c,u;const d=Ko();j(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)!="undefined",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j(typeof((u=(c=d==null?void 0:d.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function uz(t){const e=dz(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function dz(t){if(jr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder!="undefined")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hz=20;class fz extends Ox{constructor(){super(...arguments);this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function pz(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:vz(),postBody:null,tenantId:t.tenantId,error:gn(t,"no-auth-event")}}function gz(t,e){return cy()._set(uy(t),e)}async function _0(t){const e=await cy()._get(uy(t));return e&&await cy()._remove(uy(t)),e}function mz(t,e){var n,r;const i=_z(e);if(i.includes("/__/auth/callback")){const s=sf(i),o=s.firebaseError?yz(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?gn(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function vz(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<hz;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function cy(){return ir(dg)}function uy(t){return Lo("authEvent",t.config.apiKey,t.name)}function yz(t){try{return JSON.parse(t)}catch{return null}}function _z(t){const e=sf(t),n=e.link?decodeURIComponent(e.link):void 0,r=sf(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return sf(i).link||i||r||n||t}function sf(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return ol(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz=500;class bz{constructor(){this._redirectPersistence=Ms,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=gg,this._overrideRedirectResult=Mw}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new fz(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Jt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){cz(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),_G(),await this._originValidation(e);const o=pz(e,r,i);await gz(e,o);const a=await sz(e,o,n),l=await az(a);return lz(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oz(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Ko(),o=setTimeout(async()=>{await _0(e),n.onEvent(w0())},wz),a=async u=>{clearTimeout(o);const d=await _0(e);let h=null;d&&(u==null?void 0:u.url)&&(h=mz(d,u.url)),n.onEvent(h||w0())};typeof r!="undefined"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;Ko().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&a({url:u}),typeof l=="function")try{l(u)}catch(d){console.error(d)}}}}const Iz=bz;function w0(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:gn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(t,e){Zt(t)._logFramework(e)}var Tz="@firebase/auth-compat",Sz="0.2.15";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz=1e3;function su(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function kz(){return su()==="http:"||su()==="https:"}function $x(t=dt()){return!!((su()==="file:"||su()==="ionic:"||su()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Az(){return Nd()||aw()}function Rz(){return lw()&&(document==null?void 0:document.documentMode)===11}function Nz(t=dt()){return/Edge\/\d+/.test(t)}function xz(t=dt()){return Rz()||Nz(t)}function Vx(){try{const t=self.localStorage,e=Md();if(t)return t.setItem(e,"1"),t.removeItem(e),xz()?zn():!0}catch{return Fw()&&zn()}return!1}function Fw(){return typeof global!="undefined"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Um(){return(kz()||Rd()||$x())&&!Az()&&Vx()&&!Fw()}function Ux(){return $x()&&typeof document!="undefined"}async function Pz(){return Ux()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},Cz);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function Oz(){return typeof window!="undefined"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er={LOCAL:"local",NONE:"none",SESSION:"session"},Nc=j,Bx="persistence";function Dz(t,e){if(Nc(Object.values(er).includes(e),t,"invalid-persistence-type"),Nd()){Nc(e!==er.SESSION,t,"unsupported-persistence-type");return}if(aw()){Nc(e===er.NONE,t,"unsupported-persistence-type");return}if(Fw()){Nc(e===er.NONE||e===er.LOCAL&&zn(),t,"unsupported-persistence-type");return}Nc(e===er.NONE||Vx(),t,"unsupported-persistence-type")}async function dy(t){await t._initializationPromise;const e=jx(),n=Lo(Bx,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function Mz(t,e){const n=jx();if(!n)return[];const r=Lo(Bx,t,e);switch(n.getItem(r)){case er.NONE:return[Rl];case er.LOCAL:return[xl,Ms];case er.SESSION:return[Ms];default:return[]}}function jx(){var t;try{return((t=Oz())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=j;class ys{constructor(){this.browserResolver=ir(Lx),this.cordovaResolver=ir(Iz),this.underlyingResolver=null,this._redirectPersistence=Ms,this._completeRedirectFn=gg,this._overrideRedirectResult=Mw}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Ux()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Lz(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Pz();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t){return t.unwrap()}function Fz(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(t){return Wx(t)}function Vz(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if(e.code==="auth/multi-factor-auth-required"){const i=e;i.resolver=new Uz(t,EK(t,e))}else if(r){const i=Wx(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function Wx(t){const{_tokenResponse:e}=t instanceof Et?t.customData:t;if(!e)return null;if(!(t instanceof Et)&&"temporaryProof"in e&&"phoneNumber"in e)return Vr.credentialFromResult(t);const n=e.providerId;if(!n||n===Rc.PASSWORD)return null;let r;switch(n){case Rc.GOOGLE:r=Zr;break;case Rc.FACEBOOK:r=Jr;break;case Rc.GITHUB:r=ei;break;case Rc.TWITTER:r=ti;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Nl._create(n,a):fi._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new gl(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Et?r.credentialFromError(t):r.credentialFromResult(t)}function jn(t,e){return e.catch(n=>{throw n instanceof Et&&Vz(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:$z(n),additionalUserInfo:IK(n),user:Oi.getOrCreate(i)}})}async function hy(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>jn(t,n.confirm(r))}}class Uz{constructor(e,n){this.resolver=n,this.auth=Fz(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return jn(qx(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this._delegate=e,this.multiFactor=kK(e)}static getOrCreate(e){return Oi.USER_MAP.has(e)||Oi.USER_MAP.set(e,new Oi(e)),Oi.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return jn(this.auth,gx(this._delegate,e))}async linkWithPhoneNumber(e,n){return hy(this.auth,oG(this._delegate,e,n))}async linkWithPopup(e){return jn(this.auth,gG(this._delegate,e,ys))}async linkWithRedirect(e){return await dy(Zt(this.auth)),TG(this._delegate,e,ys)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return jn(this.auth,mx(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return hy(this.auth,aG(this._delegate,e,n))}reauthenticateWithPopup(e){return jn(this.auth,pG(this._delegate,e,ys))}async reauthenticateWithRedirect(e){return await dy(Zt(this.auth)),IG(this._delegate,e,ys)}sendEmailVerification(e){return dK(this._delegate,e)}async unlink(e){return await XH(this._delegate,e),this}updateEmail(e){return gK(this._delegate,e)}updatePassword(e){return mK(this._delegate,e)}updatePhoneNumber(e){return lG(this._delegate,e)}updateProfile(e){return pK(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return hK(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oi.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=j;class fy{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;xc(r,"invalid-api-key",{appName:e.name}),xc(r,"invalid-api-key",{appName:e.name});const i=typeof window!="undefined"?ys:void 0;this._delegate=n.initialize({options:{persistence:Bz(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(rH),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){RH(this._delegate,e,n)}applyActionCode(e){return nK(this._delegate,e)}checkActionCode(e){return vx(this._delegate,e)}confirmPasswordReset(e,n){return tK(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return jn(this._delegate,iK(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return uK(this._delegate,e)}isSignInWithEmailLink(e){return aK(this._delegate,e)}async getRedirectResult(){xc(Um(),this._delegate,"operation-not-supported-in-this-environment");const e=await CG(this._delegate,ys);return e?jn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Ez(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=b0(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=b0(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return oK(this._delegate,e,n)}sendPasswordResetEmail(e,n){return eK(this._delegate,e,n||void 0)}async setPersistence(e){Dz(this._delegate,e);let n;switch(e){case er.SESSION:n=Ms;break;case er.LOCAL:n=await ir(xl)._isAvailable()?xl:dg;break;case er.NONE:n=Rl;break;default:return Jt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return jn(this._delegate,QH(this._delegate))}signInWithCredential(e){return jn(this._delegate,lg(this._delegate,e))}signInWithCustomToken(e){return jn(this._delegate,ZH(this._delegate,e))}signInWithEmailAndPassword(e,n){return jn(this._delegate,sK(this._delegate,e,n))}signInWithEmailLink(e,n){return jn(this._delegate,lK(this._delegate,e,n))}signInWithPhoneNumber(e,n){return hy(this._delegate,sG(this._delegate,e,n))}async signInWithPopup(e){return xc(Um(),this._delegate,"operation-not-supported-in-this-environment"),jn(this._delegate,fG(this._delegate,e,ys))}async signInWithRedirect(e){return xc(Um(),this._delegate,"operation-not-supported-in-this-environment"),await dy(this._delegate),wG(this._delegate,e,ys)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return rK(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}fy.Persistence=er;function b0(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Oi.getOrCreate(o)),error:e,complete:n}}function Bz(t,e){const n=Mz(t,e);if(typeof self!="undefined"&&!n.includes(xl)&&n.push(xl),typeof window!="undefined")for(const r of[dg,Ms])n.includes(r)||n.push(r);return n.includes(Rl)||n.push(Rl),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.providerId="phone",this._delegate=new Vr(qx(et.auth()))}static credential(e,n){return Vr.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}$w.PHONE_SIGN_IN_METHOD=Vr.PHONE_SIGN_IN_METHOD;$w.PROVIDER_ID=Vr.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jz=j;class qz{constructor(e,n,r=et.app()){var i;jz((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new rG(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz="auth-compat";function Hz(t){t.INTERNAL.registerComponent(new Be(Wz,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new fy(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ha.EMAIL_SIGNIN,PASSWORD_RESET:Ha.PASSWORD_RESET,RECOVER_EMAIL:Ha.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ha.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ha.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ha.VERIFY_EMAIL}},EmailAuthProvider:Xs,FacebookAuthProvider:Jr,GithubAuthProvider:ei,GoogleAuthProvider:Zr,OAuthProvider:gl,SAMLAuthProvider:Lf,PhoneAuthProvider:$w,PhoneMultiFactorGenerator:Fx,RecaptchaVerifier:qz,TwitterAuthProvider:ti,Auth:fy,AuthCredential:ac,Error:Et}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Tz,Sz)}Hz(et);const I0="@firebase/database",E0="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hx="";function Kx(t){Hx=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Dt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Fu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return lr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=function(t){try{if(typeof window!="undefined"&&typeof window[t]!="undefined"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Kz(e)}}catch{}return new Gz},ko=Gx("localStorage"),py=Gx("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=new bi("@firebase/database"),zx=function(){let t=1;return function(){return t++}}(),Yx=function(t){const e=pj(t),n=new dj;n.update(e);const r=n.digest();return Yp.encodeByteArray(r)},Fd=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Fd.apply(null,r):typeof r=="object"?e+=Dt(r):e+=r,e+=" "}return e};let $o=null,T0=!0;const Qx=function(t,e){q(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(vl.logLevel=Te.VERBOSE,$o=vl.log.bind(vl),e&&py.set("logging_enabled",!0)):typeof t=="function"?$o=t:($o=null,py.remove("logging_enabled"))},qt=function(...t){if(T0===!0&&(T0=!1,$o===null&&py.get("logging_enabled")===!0&&Qx(!0)),$o){const e=Fd.apply(null,t);$o(e)}},$d=function(t){return function(...e){qt(t,...e)}},gy=function(...t){const e="FIREBASE INTERNAL ERROR: "+Fd(...t);vl.error(e)},pi=function(...t){const e=`FIREBASE FATAL ERROR: ${Fd(...t)}`;throw vl.error(e),new Error(e)},Tn=function(...t){const e="FIREBASE WARNING: "+Fd(...t);vl.warn(e)},zz=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},mg=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Yz=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ki="[MIN_NAME]",gi="[MAX_NAME]",Ca=function(t,e){if(t===e)return 0;if(t===Ki||e===gi)return-1;if(e===Ki||t===gi)return 1;{const n=Uf(t),r=Uf(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Qz=function(t,e){return t===e?0:t<e?-1:1},Pc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Dt(e))},Vw=function(t){if(typeof t!="object"||t===null)return Dt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Dt(e[r]),n+=":",n+=Vw(t[e[r]]);return n+="}",n},Xx=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function en(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Jx=function(t){q(!mg(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Xz=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Jz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Zz(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const e4=new RegExp("^-?(0*)\\d{1,10}$"),Zx=-2147483648,Uw=2147483647,Uf=function(t){if(e4.test(t)){const e=Number(t);if(e>=Zx&&e<=Uw)return e}return null},cc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Tn("Exception was thrown by user callback.",n),e},Math.floor(0))}},t4=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ou=function(t,e){const n=setTimeout(t,e);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Tn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(qt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Tn(e)}}class yl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}yl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="5",eP="v",tP="s",nP="r",rP="f",iP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,sP="ls",oP="p",my="ac",aP="websocket",lP="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,r,i,s=!1,o="",a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ko.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ko.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function i4(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function uP(t,e,n){q(typeof e=="string","typeof type must == string"),q(typeof n=="object","typeof params must == object");let r;if(e===aP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===lP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);i4(t)&&(n.ns=t.namespace);const i=[];return en(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.counters_={}}incrementCounter(e,n=1){lr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return JB(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm={},jm={};function jw(t){const e=t.toString();return Bm[e]||(Bm[e]=new s4),Bm[e]}function o4(t,e){const n=t.toString();return jm[n]||(jm[n]=e()),jm[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&cc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="start",l4="close",c4="pLPCommand",u4="pRTLPCB",dP="id",hP="pw",fP="ser",d4="cb",h4="seg",f4="ts",p4="d",g4="dframe",pP=1870,gP=30,m4=pP-gP,v4=25e3,y4=3e4;class _s{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$d(e),this.stats_=jw(n),this.urlFn=l=>(this.appCheckToken&&(l[my]=this.appCheckToken),uP(n,lP,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new a4(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(y4)),Yz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qw((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===S0)this.id=a,this.password=l;else if(o===l4)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[S0]="t",r[fP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[d4]=this.scriptTagHolder.uniqueCallbackIdentifier),r[eP]=Bw,this.transportSessionId&&(r[tP]=this.transportSessionId),this.lastSessionId&&(r[sP]=this.lastSessionId),this.applicationId&&(r[oP]=this.applicationId),this.appCheckToken&&(r[my]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&iP.test(location.hostname)&&(r[nP]=rP);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_s.forceAllow_=!0}static forceDisallow(){_s.forceDisallow_=!0}static isAvailable(){return _s.forceAllow_?!0:!_s.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!Xz()&&!Jz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Dt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=HR(n),i=Xx(r,m4);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[g4]="t",r[dP]=e,r[hP]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Dt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class qw{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=zx(),window[c4+this.uniqueCallbackIdentifier]=e,window[u4+this.uniqueCallbackIdentifier]=n,this.myIFrame=qw.createIFrame_();let s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){qt("frame writing exception"),a.stack&&qt(a.stack),qt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||qt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[dP]=this.myID,e[hP]=this.myPW,e[fP]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gP+r.length<=pP;){const o=this.pendingSegs.shift();r=r+"&"+h4+i+"="+o.seg+"&"+f4+i+"="+o.ts+"&"+p4+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(v4)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{qt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=16384,w4=45e3;let Bf=null;typeof MozWebSocket!="undefined"?Bf=MozWebSocket:typeof WebSocket!="undefined"&&(Bf=WebSocket);class fr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$d(this.connId),this.stats_=jw(n),this.connURL=fr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[eP]=Bw,typeof location!="undefined"&&location.hostname&&iP.test(location.hostname)&&(o[nP]=rP),n&&(o[tP]=n),r&&(o[sP]=r),i&&(o[my]=i),s&&(o[oP]=s),uP(e,aP,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ko.set("previous_websocket_failure",!0);try{let r;KR(),this.mySock=new Bf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){fr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Bf!==null&&!fr.forceDisallow_}static previouslyFailed(){return ko.isInMemoryStorage||ko.get("previous_websocket_failure")===!0}markConnectionHealthy(){ko.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Fu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(q(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Dt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Xx(n,_4);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(w4))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}fr.responsesRequiredToBeHealthy=2;fr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[_s,fr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=fr&&fr.isAvailable();let r=n&&!fr.previouslyFailed();if(e.webSocketOnly&&(n||Tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[fr];else{const i=this.transports_=[];for(const s of Pl.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Pl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Pl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=6e4,I4=5e3,E4=10*1024,T4=100*1024,qm="t",C0="d",S4="s",k0="r",C4="e",A0="o",R0="a",N0="n",x0="p",k4="h";class A4{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$d("c:"+this.id+":"),this.transportManager_=new Pl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ou(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>T4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>E4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(qm in e){const n=e[qm];n===R0?this.upgradeIfSecondaryHealthy_():n===k0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===A0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Pc("t",e),r=Pc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:x0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:R0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:N0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Pc("t",e),r=Pc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Pc(qm,e);if(C0 in e){const r=e[C0];if(n===k4)this.onHandshake_(r);else if(n===N0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===S4?this.onConnectionShutdown_(r):n===k0?this.onReset_(r):n===C4?gy("Server Error: "+r):n===A0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gy("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Bw!==r&&Tn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ou(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(b4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ou(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(I4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:x0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ko.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.allowedEvents_=e,this.listeners_={},q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){q(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends vP{constructor(){super(["online"]);this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!Qp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new jf}getInitialEvent(e){return q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=32,O0=768;class We{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function je(){return new We("")}function Ce(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ls(t){return t.pieces_.length-t.pieceNum_}function Je(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new We(t.pieces_,e)}function Ww(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function R4(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function zu(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function yP(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new We(e,0)}function ft(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof We)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new We(n,0)}function ke(t){return t.pieceNum_>=t.pieces_.length}function Ln(t,e){const n=Ce(t),r=Ce(e);if(n===null)return e;if(n===r)return Ln(Je(t),Je(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function N4(t,e){const n=zu(t,0),r=zu(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Ca(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Hw(t,e){if(Ls(t)!==Ls(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function gr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ls(t)>Ls(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class x4{constructor(e,n){this.errorPrefix_=n,this.parts_=zu(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Jp(this.parts_[r]);_P(this)}}function P4(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Jp(e),_P(t)}function O4(t){const e=t.parts_.pop();t.byteLength_-=Jp(e),t.parts_.length>0&&(t.byteLength_-=1)}function _P(t){if(t.byteLength_>O0)throw new Error(t.errorPrefix_+"has a key path longer than "+O0+" bytes ("+t.byteLength_+").");if(t.parts_.length>P0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+P0+") or object contains a cycle "+po(t))}function po(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw extends vP{constructor(){super(["visible"]);let e,n;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(n="visibilitychange",e="hidden"):typeof document.mozHidden!="undefined"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden!="undefined"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden!="undefined"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Kw}getInitialEvent(e){return q(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=1e3,D4=60*5*1e3,M4=3*1e3,D0=30*1e3,L4=1.3,F4=3e4,$4="server_kill",M0=3;class Bi extends mP{constructor(e,n,r,i,s,o,a,l){super();if(this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Bi.nextPersistentConnectionId_++,this.log_=$d("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Oc,this.maxReconnectDelay_=D4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!KR())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Kw.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&jf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Dt(s)),q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Ot,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:o=>{const a=o.d;o.s==="ok"?(this.onDataUpdate_(r.p,a,!1,null),n.resolve(a)):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const o=this.outstandingGets_[s];o===void 0||i!==o||(delete this.outstandingGets_[s],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},M4),this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),q(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Bi.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&lr(e,"w")){const r=jo(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Tn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||uj(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=D0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=cj(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Dt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):gy("Unrecognized action received from server: "+Dt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Oc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Oc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>F4&&(this.reconnectDelay_=Oc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*L4)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Bi.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){q(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?qt("getToken() completed but was canceled"):(qt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new A4(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Tn(f+" ("+this.repoInfo_.toString()+")"),this.interrupt($4)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Tn(d),l())}}}interrupt(e){qt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){qt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Cf(this.interruptReasons_)&&(this.reconnectDelay_=Oc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Vw(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new We(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){qt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=M0&&(this.reconnectDelay_=D0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){qt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=M0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Hx.replace(/\./g,"-")]=1,Qp()?e["framework.cordova"]=1:Nd()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=jf.getInstance().currentlyOnline();return Cf(this.interruptReasons_)&&e}}Bi.nextPersistentConnectionId_=0;Bi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Re(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Re(Ki,e),i=new Re(Ki,n);return this.compare(r,i)!==0}minPost(){return Re.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh;class wP extends vg{static get __EMPTY_NODE(){return Nh}static set __EMPTY_NODE(e){Nh=e}compare(e,n){return Ca(e.name,n.name)}isDefinedOn(e){throw rc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Re.MIN}maxPost(){return new Re(gi,Nh)}makePost(e,n){return q(typeof e=="string","KeyIndex indexValue must always be a string."),new Re(e,Nh)}toString(){return".key"}}const ai=new wP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class jt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:jt.RED,this.left=i!=null?i:Hn.EMPTY_NODE,this.right=s!=null?s:Hn.EMPTY_NODE}copy(e,n,r,i,s){return new jt(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Hn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Hn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}jt.RED=!0;jt.BLACK=!1;class V4{copy(e,n,r,i,s){return this}insert(e,n,r){return new jt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Hn{constructor(e,n=Hn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Hn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,jt.BLACK,null,null))}remove(e){return new Hn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new xh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new xh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new xh(this.root_,null,this.comparator_,!0,e)}}Hn.EMPTY_NODE=new V4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(t,e){return Ca(t.name,e.name)}function Gw(t,e){return Ca(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vy;function B4(t){vy=t}const bP=function(t){return typeof t=="number"?"number:"+Jx(t):"string:"+t},IP=function(t){if(t.isLeafNode()){const e=t.val();q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&lr(e,".sv"),"Priority must be a string or number.")}else q(t===vy||t.isEmpty(),"priority of unexpected type.");q(t===vy||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L0;class Vt{constructor(e,n=Vt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),IP(this.priorityNode_)}static set __childrenNodeConstructor(e){L0=e}static get __childrenNodeConstructor(){return L0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Vt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Vt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ke(e)?this:Ce(e)===".priority"?this.priorityNode_:Vt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Vt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ce(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(q(r!==".priority"||Ls(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Vt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Je(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+bP(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Jx(this.value_):e+=this.value_,this.lazyHash_=Yx(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Vt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Vt.__childrenNodeConstructor?-1:(q(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Vt.VALUE_TYPE_ORDER.indexOf(n),s=Vt.VALUE_TYPE_ORDER.indexOf(r);return q(i>=0,"Unknown leaf type: "+n),q(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Vt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EP,TP;function j4(t){EP=t}function q4(t){TP=t}class W4 extends vg{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ca(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Re.MIN}maxPost(){return new Re(gi,new Vt("[PRIORITY-POST]",TP))}makePost(e,n){const r=EP(e);return new Re(n,new Vt("[PRIORITY-POST]",r))}toString(){return".priority"}}const rt=new W4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=Math.log(2);class K4{constructor(e){const n=s=>parseInt(Math.log(s)/H4,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const qf=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let d,h;if(u===0)return null;if(u===1)return d=t[l],h=n?n(d):d,new jt(h,d.node,jt.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),g=i(f+1,c);return d=t[f],h=n?n(d):d,new jt(h,d.node,jt.BLACK,p,g)}},s=function(l){let c=null,u=null,d=t.length;const h=function(p,g){const m=d-p,v=d;d-=p;const b=i(m+1,v),T=t[m],C=n?n(T):T;f(new jt(C,T.node,g,null,b))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),m=Math.pow(2,l.count-(p+1));g?h(m,jt.BLACK):(h(m,jt.BLACK),h(m,jt.RED))}return u},o=new K4(t.length),a=s(o);return new Hn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wm;const Ka={};class Di{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return q(Ka&&rt,"ChildrenNode.ts has not been loaded"),Wm=Wm||new Di({".priority":Ka},{".priority":rt}),Wm}get(e){const n=jo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Hn?n:null}hasIndex(e){return lr(this.indexSet_,e.toString())}addIndex(e,n){q(e!==ai,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Re.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=qf(r,e.getCompare()):a=Ka;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Di(u,c)}addToIndexes(e,n){const r=kf(this.indexes_,(i,s)=>{const o=jo(this.indexSet_,s);if(q(o,"Missing index implementation for "+s),i===Ka)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Re.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),qf(a,o.getCompare())}else return Ka;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Re(e.name,a))),l.insert(e,e.node)}});return new Di(r,this.indexSet_)}removeFromIndexes(e,n){const r=kf(this.indexes_,i=>{if(i===Ka)return i;{const s=n.get(e.name);return s?i.remove(new Re(e.name,s)):i}});return new Di(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc;class ue{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&IP(this.priorityNode_),this.children_.isEmpty()&&q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Dc||(Dc=new ue(new Hn(Gw),null,Di.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Dc}updatePriority(e){return this.children_.isEmpty()?this:new ue(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Dc:n}}getChild(e){const n=Ce(e);return n===null?this:this.getImmediateChild(n).getChild(Je(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(q(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Re(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Dc:this.priorityNode_;return new ue(i,o,s)}}updateChild(e,n){const r=Ce(e);if(r===null)return n;{q(Ce(e)!==".priority"||Ls(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Je(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(rt,(o,a)=>{n[o]=a.val(e),r++,s&&ue.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+bP(this.getPriority().val())+":"),this.forEachChild(rt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Yx(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Re(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Re(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Re(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Re.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Re.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Vd?-1:0}withIndex(e){if(e===ai||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ue(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ai||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(rt),i=n.getIterator(rt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ai?null:this.indexMap_.get(e.toString())}}ue.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class G4 extends ue{constructor(){super(new Hn(Gw),ue.EMPTY_NODE,Di.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ue.EMPTY_NODE}isEmpty(){return!1}}const Vd=new G4;Object.defineProperties(Re,{MIN:{value:new Re(Ki,ue.EMPTY_NODE)},MAX:{value:new Re(gi,Vd)}});wP.__EMPTY_NODE=ue.EMPTY_NODE;Vt.__childrenNodeConstructor=ue;B4(Vd);q4(Vd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=!0;function gt(t,e=null){if(t===null)return ue.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Vt(n,gt(e))}if(!(t instanceof Array)&&z4){const n=[];let r=!1;if(en(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=gt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Re(o,l)))}}),n.length===0)return ue.EMPTY_NODE;const s=qf(n,U4,o=>o.name,Gw);if(r){const o=qf(n,rt.getCompare());return new ue(s,gt(e),new Di({".priority":o},{".priority":rt}))}else return new ue(s,gt(e),Di.Default)}else{let n=ue.EMPTY_NODE;return en(t,(r,i)=>{if(lr(t,r)&&r.substring(0,1)!=="."){const s=gt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(gt(e))}}j4(gt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw extends vg{constructor(e){super();this.indexPath_=e,q(!ke(e)&&Ce(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ca(e.name,n.name):s}makePost(e,n){const r=gt(e),i=ue.EMPTY_NODE.updateChild(this.indexPath_,r);return new Re(n,i)}maxPost(){const e=ue.EMPTY_NODE.updateChild(this.indexPath_,Vd);return new Re(gi,e)}toString(){return zu(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4 extends vg{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ca(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Re.MIN}maxPost(){return Re.MAX}makePost(e,n){const r=gt(e);return new Re(n,r)}toString(){return".value"}}const Yw=new Y4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yy="-",SP="z",CP=786,Q4=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Ol.charAt(n%64),n=Math.floor(n/64);q(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Ol.charAt(e[i]);return q(o.length===20,"nextPushId: Length should be 20."),o}}(),F0=function(t){if(t===""+Uw)return yy;const e=Uf(t);if(e!=null)return""+(e+1);const n=new Array(t.length);for(let o=0;o<n.length;o++)n[o]=t.charAt(o);if(n.length<CP)return n.push(yy),n.join("");let r=n.length-1;for(;r>=0&&n[r]===SP;)r--;if(r===-1)return gi;const i=n[r],s=Ol.charAt(Ol.indexOf(i)+1);return n[r]=s,n.slice(0,r+1).join("")},$0=function(t){if(t===""+Zx)return Ki;const e=Uf(t);if(e!=null)return""+(e-1);const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=t.charAt(r);return n[n.length-1]===yy?n.length===1?""+Uw:(delete n[n.length-1],n.join("")):(n[n.length-1]=Ol.charAt(Ol.indexOf(n[n.length-1])-1),n.join("")+SP.repeat(CP-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t){return{type:"value",snapshotNode:t}}function Dl(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Yu(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Qu(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function X4(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){q(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Yu(n,a)):q(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Dl(n,r)):o.trackChildChange(Qu(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(rt,(i,s)=>{n.hasChild(i)||r.trackChildChange(Yu(i,s))}),n.isLeafNode()||n.forEachChild(rt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Qu(i,s,o))}else r.trackChildChange(Dl(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this.indexedFilter_=new Qw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Xu.getStartPost_(e),this.endPost_=Xu.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,n,r,i,s,o){return this.matches(new Re(n,r))||(r=ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ue.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ue.EMPTY_NODE);const s=this;return n.forEachChild(rt,(o,a)=>{s.matches(new Re(o,a))||(i=i.updateImmediateChild(o,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.rangedFilter_=new Xu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new Re(n,r))||(r=ue.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ue.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:l=this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,l)i=i.updateImmediateChild(a.name,a.node),o++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(ue.EMPTY_NODE);let s,o,a,l;if(this.reverse_){l=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();a=(h,f)=>d(f,h)}else l=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let c=0,u=!1;for(;l.hasNext();){const d=l.getNext();!u&&a(s,d)<=0&&(u=!0),u&&c<this.limit_&&a(d,o)<=0?c++:i=i.updateImmediateChild(d.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;q(a.numChildren()===this.limit_,"");const l=new Re(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,l);if(u&&!r.isEmpty()&&f>=0)return s!=null&&s.trackChildChange(Qu(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Yu(n,d));const g=a.updateImmediateChild(n,ue.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(Dl(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Yu(c.name,c.node)),s.trackChildChange(Dl(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,ue.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ki}hasEnd(){return this.endSet_}getIndexEndValue(){return q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:gi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rt}copy(){const e=new yg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Z4(t){return t.loadsAllData()?new Qw(t.getIndex()):t.hasLimit()?new J4(t):new Xu(t)}function e6(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function t6(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function _y(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function n6(t,e,n){let r;if(t.index_===ai)typeof e=="string"&&(e=F0(e)),r=_y(t,e,n);else{let i;n==null?i=gi:i=F0(n),r=_y(t,e,i)}return r.startAfterSet_=!0,r}function wy(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function r6(t,e,n){let r,i;return t.index_===ai?(typeof e=="string"&&(e=$0(e)),i=wy(t,e,n)):(n==null?r=Ki:r=$0(n),i=wy(t,e,r)),i.endBeforeSet_=!0,i}function _g(t,e){const n=t.copy();return n.index_=e,n}function V0(t){const e={};if(t.isDefault())return e;let n;return t.index_===rt?n="$priority":t.index_===Yw?n="$value":t.index_===ai?n="$key":(q(t.index_ instanceof zw,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Dt(n),t.startSet_&&(e.startAt=Dt(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+Dt(t.indexStartName_))),t.endSet_&&(e.endAt=Dt(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+Dt(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function U0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==rt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends mP{constructor(e,n,r,i){super();this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=$d("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Wf.getListenId_(e,r),a={};this.listens_[o]=a;const l=V0(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),jo(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,n){const r=Wf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=V0(e._queryParams),r=e._path.toString(),i=new Ot;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ta(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Fu(a.responseText)}catch{Tn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Tn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(){return{value:null,children:new Map}}function uc(t,e,n){if(ke(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ce(e);t.children.has(r)||t.children.set(r,Hf());const i=t.children.get(r);e=Je(e),uc(i,e,n)}}function by(t,e){if(ke(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(rt,(r,i)=>{uc(t,new We(r),i)}),by(t,e)}}else if(t.children.size>0){const n=Ce(e);return e=Je(e),t.children.has(n)&&by(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Iy(t,e,n){t.value!==null?n(e,t.value):s6(t,(r,i)=>{const s=new We(e.toString()+"/"+r);Iy(i,s,n)})}function s6(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&en(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=10*1e3,a6=30*1e3,l6=5*60*1e3;class c6{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new o6(e);const r=B0+(a6-B0)*Math.random();ou(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;en(e,(i,s)=>{s>0&&lr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ou(this.reportStats_.bind(this),Math.floor(Math.random()*2*l6))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Mr||(Mr={}));function Xw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Jw(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Zw(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Mr.ACK_USER_WRITE,this.source=Xw()}operationForChild(e){if(ke(this.path)){if(this.affectedTree.value!=null)return q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new We(e));return new Kf(je(),n,this.revert)}}else return q(Ce(this.path)===e,"operationForChild called for unrelated child."),new Kf(Je(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n){this.source=e,this.path=n,this.type=Mr.LISTEN_COMPLETE}operationForChild(e){return ke(this.path)?new Ju(this.source,je()):new Ju(this.source,Je(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Mr.OVERWRITE}operationForChild(e){return ke(this.path)?new Go(this.source,je(),this.snap.getImmediateChild(e)):new Go(this.source,Je(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Mr.MERGE}operationForChild(e){if(ke(this.path)){const n=this.children.subtree(new We(e));return n.isEmpty()?null:n.value?new Go(this.source,je(),n.value):new Ml(this.source,je(),n)}else return q(Ce(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ml(this.source,Je(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ke(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ce(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function d6(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(X4(o.childName,o.snapshotNode))}),Mc(t,i,"child_removed",e,r,n),Mc(t,i,"child_added",e,r,n),Mc(t,i,"child_moved",s,r,n),Mc(t,i,"child_changed",e,r,n),Mc(t,i,"value",e,r,n),i}function Mc(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>f6(t,a,l)),o.forEach(a=>{const l=h6(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function h6(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function f6(t,e,n){if(e.childName==null||n.childName==null)throw rc("Should only compare child_ events.");const r=new Re(e.childName,e.snapshotNode),i=new Re(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t,e){return{eventCache:t,serverCache:e}}function au(t,e,n,r){return wg(new Fs(e,n,r),t.serverCache)}function AP(t,e,n,r){return wg(t.eventCache,new Fs(e,n,r))}function Gf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function zo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hm;const p6=()=>(Hm||(Hm=new Hn(Qz)),Hm);class nt{constructor(e,n=p6()){this.value=e,this.children=n}static fromObject(e){let n=new nt(null);return en(e,(r,i)=>{n=n.set(new We(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:je(),value:this.value};if(ke(e))return null;{const r=Ce(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Je(e),n);return s!=null?{path:ft(new We(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ke(e))return this;{const n=Ce(e),r=this.children.get(n);return r!==null?r.subtree(Je(e)):new nt(null)}}set(e,n){if(ke(e))return new nt(n,this.children);{const r=Ce(e),s=(this.children.get(r)||new nt(null)).set(Je(e),n),o=this.children.insert(r,s);return new nt(this.value,o)}}remove(e){if(ke(e))return this.children.isEmpty()?new nt(null):new nt(null,this.children);{const n=Ce(e),r=this.children.get(n);if(r){const i=r.remove(Je(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new nt(null):new nt(this.value,s)}else return this}}get(e){if(ke(e))return this.value;{const n=Ce(e),r=this.children.get(n);return r?r.get(Je(e)):null}}setTree(e,n){if(ke(e))return n;{const r=Ce(e),s=(this.children.get(r)||new nt(null)).setTree(Je(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new nt(this.value,o)}}fold(e){return this.fold_(je(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ft(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,je(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(ke(e))return null;{const s=Ce(e),o=this.children.get(s);return o?o.findOnPath_(Je(e),ft(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,je(),n)}foreachOnPath_(e,n,r){if(ke(e))return this;{this.value&&r(n,this.value);const i=Ce(e),s=this.children.get(i);return s?s.foreachOnPath_(Je(e),ft(n,i),r):new nt(null)}}foreach(e){this.foreach_(je(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ft(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.writeTree_=e}static empty(){return new Ur(new nt(null))}}function lu(t,e,n){if(ke(e))return new Ur(new nt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Ln(i,e);return s=s.updateChild(o,n),new Ur(t.writeTree_.set(i,s))}else{const i=new nt(n),s=t.writeTree_.setTree(e,i);return new Ur(s)}}}function Ey(t,e,n){let r=t;return en(n,(i,s)=>{r=lu(r,ft(e,i),s)}),r}function j0(t,e){if(ke(e))return Ur.empty();{const n=t.writeTree_.setTree(e,new nt(null));return new Ur(n)}}function Ty(t,e){return ka(t,e)!=null}function ka(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ln(n.path,e)):null}function q0(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(rt,(r,i)=>{e.push(new Re(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Re(r,i.value))}),e}function Es(t,e){if(ke(e))return t;{const n=ka(t,e);return n!=null?new Ur(new nt(n)):new Ur(t.writeTree_.subtree(e))}}function Sy(t){return t.writeTree_.isEmpty()}function Ll(t,e){return RP(je(),t.writeTree_,e)}function RP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(q(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=RP(ft(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ft(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t,e){return OP(e,t)}function g6(t,e,n,r,i){q(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=lu(t.visibleWrites,e,n)),t.lastWriteId=r}function m6(t,e,n,r){q(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ey(t.visibleWrites,e,n),t.lastWriteId=r}function v6(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function y6(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);q(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&_6(a,r.path)?i=!1:gr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return w6(t),!0;if(r.snap)t.visibleWrites=j0(t.visibleWrites,r.path);else{const a=r.children;en(a,l=>{t.visibleWrites=j0(t.visibleWrites,ft(r.path,l))})}return!0}else return!1}function _6(t,e){if(t.snap)return gr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&gr(ft(t.path,n),e))return!0;return!1}function w6(t){t.visibleWrites=NP(t.allWrites,b6,je()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function b6(t){return t.visible}function NP(t,e,n){let r=Ur.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)gr(n,o)?(a=Ln(n,o),r=lu(r,a,s.snap)):gr(o,n)&&(a=Ln(o,n),r=lu(r,je(),s.snap.getChild(a)));else if(s.children){if(gr(n,o))a=Ln(n,o),r=Ey(r,a,s.children);else if(gr(o,n))if(a=Ln(o,n),ke(a))r=Ey(r,je(),s.children);else{const l=jo(s.children,Ce(a));if(l){const c=l.getChild(Je(a));r=lu(r,je(),c)}}}else throw rc("WriteRecord should have .snap or .children")}}return r}function xP(t,e,n,r,i){if(!r&&!i){const s=ka(t.visibleWrites,e);if(s!=null)return s;{const o=Es(t.visibleWrites,e);if(Sy(o))return n;if(n==null&&!Ty(o,je()))return null;{const a=n||ue.EMPTY_NODE;return Ll(o,a)}}}else{const s=Es(t.visibleWrites,e);if(!i&&Sy(s))return n;if(!i&&n==null&&!Ty(s,je()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(gr(c.path,e)||gr(e,c.path))},a=NP(t.allWrites,o,e),l=n||ue.EMPTY_NODE;return Ll(a,l)}}}function I6(t,e,n){let r=ue.EMPTY_NODE;const i=ka(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(rt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Es(t.visibleWrites,e);return n.forEachChild(rt,(o,a)=>{const l=Ll(Es(s,new We(o)),a);r=r.updateImmediateChild(o,l)}),q0(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Es(t.visibleWrites,e);return q0(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function E6(t,e,n,r,i){q(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ft(e,n);if(Ty(t.visibleWrites,s))return null;{const o=Es(t.visibleWrites,s);return Sy(o)?i.getChild(n):Ll(o,i.getChild(n))}}function T6(t,e,n,r){const i=ft(e,n),s=ka(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Es(t.visibleWrites,i);return Ll(o,r.getNode().getImmediateChild(n))}else return null}function S6(t,e){return ka(t.visibleWrites,e)}function C6(t,e,n,r,i,s,o){let a;const l=Es(t.visibleWrites,e),c=ka(l,je());if(c!=null)a=c;else if(n!=null)a=Ll(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function k6(){return{visibleWrites:Ur.empty(),allWrites:[],lastWriteId:-1}}function zf(t,e,n,r){return xP(t.writeTree,t.treePath,e,n,r)}function eb(t,e){return I6(t.writeTree,t.treePath,e)}function W0(t,e,n,r){return E6(t.writeTree,t.treePath,e,n,r)}function Yf(t,e){return S6(t.writeTree,ft(t.treePath,e))}function A6(t,e,n,r,i,s){return C6(t.writeTree,t.treePath,e,n,r,i,s)}function tb(t,e,n){return T6(t.writeTree,t.treePath,e,n)}function PP(t,e){return OP(ft(t.treePath,e),t.writeTree)}function OP(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;q(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),q(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Qu(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Yu(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Dl(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Qu(r,e.snapshotNode,i.oldSnap));else throw rc("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const DP=new N6;class nb{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Fs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tb(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:zo(this.viewCache_),s=A6(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x6(t){return{filter:t}}function P6(t,e){q(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),q(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function O6(t,e,n,r,i){const s=new R6;let o,a;if(n.type===Mr.OVERWRITE){const c=n;c.source.fromUser?o=Cy(t,e,c.path,c.snap,r,i,s):(q(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ke(c.path),o=Qf(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Mr.MERGE){const c=n;c.source.fromUser?o=M6(t,e,c.path,c.children,r,i,s):(q(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=ky(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Mr.ACK_USER_WRITE){const c=n;c.revert?o=$6(t,e,c.path,r,i,s):o=L6(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===Mr.LISTEN_COMPLETE)o=F6(t,e,n.path,r,s);else throw rc("Unknown operation type: "+n.type);const l=s.getChanges();return D6(e,o,l),{viewCache:o,changes:l}}function D6(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Gf(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(kP(Gf(e)))}}function MP(t,e,n,r,i,s){const o=e.eventCache;if(Yf(r,n)!=null)return e;{let a,l;if(ke(n))if(q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=zo(e),u=c instanceof ue?c:ue.EMPTY_NODE,d=eb(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=zf(r,zo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ce(n);if(c===".priority"){q(Ls(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=W0(r,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Je(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=W0(r,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(c).updateChild(u,h):d=o.getNode().getImmediateChild(c)}else d=tb(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,i,s):a=o.getNode()}}return au(e,a,o.isFullyInitialized()||ke(n),t.filter.filtersNodes())}}function Qf(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(ke(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Ce(n);if(!l.isCompleteForPath(n)&&Ls(n)>1)return e;const p=Je(n),m=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?c=u.updatePriority(l.getNode(),m):c=u.updateChild(l.getNode(),f,m,p,DP,null)}const d=AP(e,c,l.isFullyInitialized()||ke(n),u.filtersNodes()),h=new nb(i,d,s);return MP(t,d,n,i,h,a)}function Cy(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new nb(i,e,s);if(ke(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=au(e,c,!0,t.filter.filtersNodes());else{const d=Ce(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=au(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Je(n),f=a.getNode().getImmediateChild(d);let p;if(ke(h))p=r;else{const g=u.getCompleteChild(d);g!=null?Ww(h)===".priority"&&g.getChild(yP(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=ue.EMPTY_NODE}if(f.equals(p))l=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);l=au(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function H0(t,e){return t.eventCache.isCompleteForChild(e)}function M6(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=ft(n,l);H0(e,Ce(u))&&(a=Cy(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=ft(n,l);H0(e,Ce(u))||(a=Cy(t,a,u,c,i,s,o))}),a}function K0(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ky(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ke(n)?c=r:c=new nt(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=K0(t,f,h);l=Qf(t,l,new We(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===void 0;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=K0(t,p,h);l=Qf(t,l,new We(d),g,i,s,o,a)}}),l}function L6(t,e,n,r,i,s,o){if(Yf(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ke(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Qf(t,e,n,l.getNode().getChild(n),i,s,a,o);if(ke(n)){let c=new nt(null);return l.getNode().forEachChild(ai,(u,d)=>{c=c.set(new We(u),d)}),ky(t,e,n,c,i,s,a,o)}else return e}else{let c=new nt(null);return r.foreach((u,d)=>{const h=ft(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),ky(t,e,n,c,i,s,a,o)}}function F6(t,e,n,r,i){const s=e.serverCache,o=AP(e,s.getNode(),s.isFullyInitialized()||ke(n),s.isFiltered());return MP(t,o,n,r,DP,i)}function $6(t,e,n,r,i,s){let o;if(Yf(r,n)!=null)return e;{const a=new nb(r,e,i),l=e.eventCache.getNode();let c;if(ke(n)||Ce(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=zf(r,zo(e));else{const d=e.serverCache.getNode();q(d instanceof ue,"serverChildren would be complete if leaf node"),u=eb(r,d)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Ce(n);let d=tb(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,Je(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,ue.EMPTY_NODE,Je(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=zf(r,zo(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Yf(r,je())!=null,au(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Qw(r.getIndex()),s=Z4(r);this.processor_=x6(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(ue.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(ue.EMPTY_NODE,a.getNode(),null),u=new Fs(l,o.isFullyInitialized(),i.filtersNodes()),d=new Fs(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=wg(d,u),this.eventGenerator_=new u6(this.query_)}get query(){return this.query_}}function U6(t){return t.viewCache_.serverCache.getNode()}function B6(t){return Gf(t.viewCache_)}function j6(t,e){const n=zo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ke(e)&&!n.getImmediateChild(Ce(e)).isEmpty())?n.getChild(e):null}function G0(t){return t.eventRegistrations_.length===0}function q6(t,e){t.eventRegistrations_.push(e)}function z0(t,e,n){const r=[];if(n){q(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Y0(t,e,n,r){e.type===Mr.MERGE&&e.source.queryId!==null&&(q(zo(t.viewCache_),"We should always have a full cache before handling merges"),q(Gf(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=O6(t.processor_,i,e,n,r);return P6(t.processor_,s.viewCache),q(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,LP(t,s.changes,s.viewCache.eventCache.getNode(),null)}function W6(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(rt,(s,o)=>{r.push(Dl(s,o))}),n.isFullyInitialized()&&r.push(kP(n.getNode())),LP(t,r,n.getNode(),e)}function LP(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return d6(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xf;class FP{constructor(){this.views=new Map}}function H6(t){q(!Xf,"__referenceConstructor has already been defined"),Xf=t}function K6(){return q(Xf,"Reference.ts has not been loaded"),Xf}function G6(t){return t.views.size===0}function rb(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return q(s!=null,"SyncTree gave us an op for an invalid query."),Y0(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Y0(o,e,n,r));return s}}function $P(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=zf(n,i?r:null),l=!1;a?l=!0:r instanceof ue?(a=eb(n,r),l=!1):(a=ue.EMPTY_NODE,l=!1);const c=wg(new Fs(a,l,!1),new Fs(r,i,!1));return new V6(e,c)}return o}function z6(t,e,n,r,i,s){const o=$P(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),q6(o,n),W6(o,n)}function Y6(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=$s(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(z0(c,n,r)),G0(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(z0(l,n,r)),G0(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!$s(t)&&s.push(new(K6())(e._repo,e._path)),{removed:s,events:o}}function VP(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ts(t,e){let n=null;for(const r of t.views.values())n=n||j6(r,e);return n}function UP(t,e){if(e._queryParams.loadsAllData())return Ig(t);{const r=e._queryIdentifier;return t.views.get(r)}}function BP(t,e){return UP(t,e)!=null}function $s(t){return Ig(t)!=null}function Ig(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf;function Q6(t){q(!Jf,"__referenceConstructor has already been defined"),Jf=t}function X6(){return q(Jf,"Reference.ts has not been loaded"),Jf}let J6=1;class Q0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new nt(null),this.pendingWriteTree_=k6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ib(t,e,n,r,i){return g6(t.pendingWriteTree_,e,n,r,i),i?dc(t,new Go(Xw(),e,n)):[]}function Z6(t,e,n,r){m6(t.pendingWriteTree_,e,n,r);const i=nt.fromObject(n);return dc(t,new Ml(Xw(),e,i))}function ws(t,e,n=!1){const r=v6(t.pendingWriteTree_,e);if(y6(t.pendingWriteTree_,e)){let s=new nt(null);return r.snap!=null?s=s.set(je(),!0):en(r.children,o=>{s=s.set(new We(o),!0)}),dc(t,new Kf(r.path,s,n))}else return[]}function Ud(t,e,n){return dc(t,new Go(Jw(),e,n))}function e3(t,e,n){const r=nt.fromObject(n);return dc(t,new Ml(Jw(),e,r))}function t3(t,e){return dc(t,new Ju(Jw(),e))}function n3(t,e,n){const r=sb(t,n);if(r){const i=ob(r),s=i.path,o=i.queryId,a=Ln(s,e),l=new Ju(Zw(o),a);return ab(t,s,l)}else return[]}function Ay(t,e,n,r){const i=e._path,s=t.syncPointTree_.get(i);let o=[];if(s&&(e._queryIdentifier==="default"||BP(s,e))){const a=Y6(s,e,n,r);G6(s)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=a.removed;o=a.events;const c=l.findIndex(d=>d._queryParams.loadsAllData())!==-1,u=t.syncPointTree_.findOnPath(i,(d,h)=>$s(h));if(c&&!u){const d=t.syncPointTree_.subtree(i);if(!d.isEmpty()){const h=o3(d);for(let f=0;f<h.length;++f){const p=h[f],g=p.query,m=WP(t,p);t.listenProvider_.startListening(cu(g),Zf(t,g),m.hashFn,m.onComplete)}}}!u&&l.length>0&&!r&&(c?t.listenProvider_.stopListening(cu(e),null):l.forEach(d=>{const h=t.queryToTagMap.get(Tg(d));t.listenProvider_.stopListening(cu(d),h)})),a3(t,l)}return o}function r3(t,e,n,r){const i=sb(t,r);if(i!=null){const s=ob(i),o=s.path,a=s.queryId,l=Ln(o,e),c=new Go(Zw(a),l,n);return ab(t,o,c)}else return[]}function i3(t,e,n,r){const i=sb(t,r);if(i){const s=ob(i),o=s.path,a=s.queryId,l=Ln(o,e),c=nt.fromObject(n),u=new Ml(Zw(a),l,c);return ab(t,o,u)}else return[]}function X0(t,e,n){const r=e._path;let i=null,s=!1;t.syncPointTree_.foreachOnPath(r,(d,h)=>{const f=Ln(d,r);i=i||Ts(h,f),s=s||$s(h)});let o=t.syncPointTree_.get(r);o?(s=s||$s(o),i=i||Ts(o,je())):(o=new FP,t.syncPointTree_=t.syncPointTree_.set(r,o));let a;i!=null?a=!0:(a=!1,i=ue.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((h,f)=>{const p=Ts(f,je());p&&(i=i.updateImmediateChild(h,p))}));const l=BP(o,e);if(!l&&!e._queryParams.loadsAllData()){const d=Tg(e);q(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const h=l3();t.queryToTagMap.set(d,h),t.tagToQueryMap.set(h,d)}const c=bg(t.pendingWriteTree_,r);let u=z6(o,e,n,c,i,a);if(!l&&!s){const d=UP(o,e);u=u.concat(c3(t,e,d))}return u}function Eg(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Ln(o,e),c=Ts(a,l);if(c)return c});return xP(i,e,s,n,!0)}function s3(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{const d=Ln(c,n);r=r||Ts(u,d)});let i=t.syncPointTree_.get(n);i?r=r||Ts(i,je()):(i=new FP,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Fs(r,!0,!1):null,a=bg(t.pendingWriteTree_,e._path),l=$P(i,e,a,s?o.getNode():ue.EMPTY_NODE,s);return B6(l)}function dc(t,e){return jP(e,t.syncPointTree_,null,bg(t.pendingWriteTree_,je()))}function jP(t,e,n,r){if(ke(t.path))return qP(t,e,n,r);{const i=e.get(je());n==null&&i!=null&&(n=Ts(i,je()));let s=[];const o=Ce(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=PP(r,o);s=s.concat(jP(a,l,c,u))}return i&&(s=s.concat(rb(i,t,r,n))),s}}function qP(t,e,n,r){const i=e.get(je());n==null&&i!=null&&(n=Ts(i,je()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=PP(r,o),u=t.operationForChild(o);u&&(s=s.concat(qP(u,a,l,c)))}),i&&(s=s.concat(rb(i,t,r,n))),s}function WP(t,e){const n=e.query,r=Zf(t,n);return{hashFn:()=>(U6(e)||ue.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?n3(t,n._path,r):t3(t,n._path);{const s=Zz(i,n);return Ay(t,n,null,s)}}}}function Zf(t,e){const n=Tg(e);return t.queryToTagMap.get(n)}function Tg(t){return t._path.toString()+"$"+t._queryIdentifier}function sb(t,e){return t.tagToQueryMap.get(e)}function ob(t){const e=t.indexOf("$");return q(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new We(t.substr(0,e))}}function ab(t,e,n){const r=t.syncPointTree_.get(e);q(r,"Missing sync point for query tag that we're tracking");const i=bg(t.pendingWriteTree_,e);return rb(r,n,i,null)}function o3(t){return t.fold((e,n,r)=>{if(n&&$s(n))return[Ig(n)];{let i=[];return n&&(i=VP(n)),en(r,(s,o)=>{i=i.concat(o)}),i}})}function cu(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(X6())(t._repo,t._path):t}function a3(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Tg(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function l3(){return J6++}function c3(t,e,n){const r=e._path,i=Zf(t,e),s=WP(t,n),o=t.listenProvider_.startListening(cu(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)q(!$s(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!ke(c)&&u&&$s(u))return[Ig(u).query];{let h=[];return u&&(h=h.concat(VP(u).map(f=>f.query))),en(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(cu(u),Zf(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new lb(n)}node(){return this.node_}}class cb{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ft(this.path_,e);return new cb(this.syncTree_,n)}node(){return Eg(this.syncTree_,this.path_)}}const u3=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},J0=function(t,e,n){if(!t||typeof t!="object")return t;if(q(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return d3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return h3(t[".sv"],e);q(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},d3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:q(!1,"Unexpected server value: "+t)}},h3=function(t,e,n){t.hasOwnProperty("increment")||q(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&q(!1,"Unexpected increment value: "+r);const i=e.node();if(q(i!==null&&typeof i!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},HP=function(t,e,n,r){return db(e,new cb(n,t),r)},ub=function(t,e,n){return db(t,new lb(e),n)};function db(t,e,n){const r=t.getPriority().val(),i=J0(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=J0(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Vt(a,gt(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Vt(i))),o.forEachChild(rt,(a,l)=>{const c=db(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Sg(t,e){let n=e instanceof We?e:new We(e),r=t,i=Ce(n);for(;i!==null;){const s=jo(r.node.children,i)||{children:{},childCount:0};r=new hb(i,r,s),n=Je(n),i=Ce(n)}return r}function Aa(t){return t.node.value}function fb(t,e){t.node.value=e,Ry(t)}function KP(t){return t.node.childCount>0}function f3(t){return Aa(t)===void 0&&!KP(t)}function Cg(t,e){en(t.node.children,(n,r)=>{e(new hb(n,t,r))})}function GP(t,e,n,r){n&&!r&&e(t),Cg(t,i=>{GP(i,e,!0,r)}),n&&r&&e(t)}function p3(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Bd(t){return new We(t.parent===null?t.name:Bd(t.parent)+"/"+t.name)}function Ry(t){t.parent!==null&&g3(t.parent,t.name,t)}function g3(t,e,n){const r=f3(n),i=lr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ry(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Ry(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=/[\[\].#$\/\u0000-\u001F\u007F]/,v3=/[\[\].#$\u0000-\u001F\u007F]/,Km=10*1024*1024,kg=function(t){return typeof t=="string"&&t.length!==0&&!m3.test(t)},zP=function(t){return typeof t=="string"&&t.length!==0&&!v3.test(t)},y3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),zP(t)},Zu=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!mg(t)||t&&typeof t=="object"&&lr(t,".sv")},mi=function(t,e,n,r){r&&e===void 0||jd(Gn(t,"value"),e,n)},jd=function(t,e,n){const r=n instanceof We?new x4(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+po(r));if(typeof e=="function")throw new Error(t+"contains a function "+po(r)+" with contents = "+e.toString());if(mg(e))throw new Error(t+"contains "+e.toString()+" "+po(r));if(typeof e=="string"&&e.length>Km/3&&Jp(e)>Km)throw new Error(t+"contains a string greater than "+Km+" utf8 bytes "+po(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(en(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!kg(o)))throw new Error(t+" contains an invalid key ("+o+") "+po(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);P4(r,o),jd(t,a,r),O4(r)}),i&&s)throw new Error(t+' contains ".value" child '+po(r)+" in addition to actual children.")}},_3=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=zu(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!kg(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(N4);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&gr(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},YP=function(t,e,n,r){if(r&&e===void 0)return;const i=Gn(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];en(e,(o,a)=>{const l=new We(o);if(jd(i,a,ft(n,l)),Ww(l)===".priority"&&!Zu(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),_3(i,s)},pb=function(t,e,n){if(!(n&&e===void 0)){if(mg(e))throw new Error(Gn(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Zu(e))throw new Error(Gn(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},qd=function(t,e,n,r){if(!(r&&n===void 0)&&!kg(n))throw new Error(Gn(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},ed=function(t,e,n,r){if(!(r&&n===void 0)&&!zP(n))throw new Error(Gn(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},w3=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ed(t,e,n,r)},mr=function(t,e){if(Ce(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},QP=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kg(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!y3(n))throw new Error(Gn(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ag(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Hw(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function gb(t,e,n){Ag(t,n),XP(t,r=>Hw(r,e))}function Cr(t,e,n){Ag(t,n),XP(t,r=>gr(r,e)||gr(e,r))}function XP(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(I3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function I3(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();$o&&qt("event: "+n.toString()),cc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="repo_interrupt",E3=25;class T3{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new b3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hf(),this.transactionQueueTree_=new hb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function S3(t,e,n){if(t.stats_=jw(t.repoInfo_),t.forceRestClient_||t4())t.server_=new Wf(t.repoInfo_,(r,i,s,o)=>{Z0(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>eS(t,!0),0);else{if(typeof n!="undefined"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Dt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Bi(t.repoInfo_,e,(r,i,s,o)=>{Z0(t,r,i,s,o)},r=>{eS(t,r)},r=>{C3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=o4(t.repoInfo_,()=>new c6(t.stats_,t.server_)),t.infoData_=new i6,t.infoSyncTree_=new Q0({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Ud(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),mb(t,"connected",!1),t.serverSyncTree_=new Q0({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Cr(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function ZP(t){const n=t.infoData_.getNode(new We(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Wd(t){return u3({timestamp:ZP(t)})}function Z0(t,e,n,r,i){t.dataUpdateCount++;const s=new We(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=kf(n,c=>gt(c));o=i3(t.serverSyncTree_,s,l,i)}else{const l=gt(n);o=r3(t.serverSyncTree_,s,l,i)}else if(r){const l=kf(n,c=>gt(c));o=e3(t.serverSyncTree_,s,l)}else{const l=gt(n);o=Ud(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Fl(t,s)),Cr(t.eventQueue_,a,o)}function eS(t,e){mb(t,"connected",e),e===!1&&R3(t)}function C3(t,e){en(e,(n,r)=>{mb(t,n,r)})}function mb(t,e,n){const r=new We("/.info/"+e),i=gt(n);t.infoData_.updateSnapshot(r,i);const s=Ud(t.infoSyncTree_,r,i);Cr(t.eventQueue_,r,s)}function Rg(t){return t.nextWriteId_++}function k3(t,e){const n=s3(t.serverSyncTree_,e);return n!=null?Promise.resolve(n):t.server_.get(e).then(r=>{const i=gt(r).withIndex(e._queryParams.getIndex()),s=Ud(t.serverSyncTree_,e._path,i);return gb(t.eventQueue_,e._path,s),Promise.resolve(i)},r=>(hc(t,"get for query "+Dt(e)+" failed: "+r),Promise.reject(new Error(r))))}function vb(t,e,n,r,i){hc(t,"set",{path:e.toString(),value:n,priority:r});const s=Wd(t),o=gt(n,r),a=Eg(t.serverSyncTree_,e),l=ub(o,a,s),c=Rg(t),u=ib(t.serverSyncTree_,e,l,c,!0);Ag(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||Tn("set at "+e+" failed: "+h);const g=ws(t.serverSyncTree_,c,!p);Cr(t.eventQueue_,e,g),Vs(t,i,h,f)});const d=_b(t,e);Fl(t,d),Cr(t.eventQueue_,d,[])}function A3(t,e,n,r){hc(t,"update",{path:e.toString(),value:n});let i=!0;const s=Wd(t),o={};if(en(n,(a,l)=>{i=!1,o[a]=HP(ft(e,a),gt(l),t.serverSyncTree_,s)}),i)qt("update() called with empty data.  Don't do anything."),Vs(t,r,"ok",void 0);else{const a=Rg(t),l=Z6(t.serverSyncTree_,e,o,a);Ag(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,u)=>{const d=c==="ok";d||Tn("update at "+e+" failed: "+c);const h=ws(t.serverSyncTree_,a,!d),f=h.length>0?Fl(t,e):e;Cr(t.eventQueue_,f,h),Vs(t,r,c,u)}),en(n,c=>{const u=_b(t,ft(e,c));Fl(t,u)}),Cr(t.eventQueue_,e,[])}}function R3(t){hc(t,"onDisconnectEvents");const e=Wd(t),n=Hf();Iy(t.onDisconnect_,je(),(i,s)=>{const o=HP(i,s,t.serverSyncTree_,e);uc(n,i,o)});let r=[];Iy(n,je(),(i,s)=>{r=r.concat(Ud(t.serverSyncTree_,i,s));const o=_b(t,i);Fl(t,o)}),t.onDisconnect_=Hf(),Cr(t.eventQueue_,je(),r)}function N3(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&by(t.onDisconnect_,e),Vs(t,n,r,i)})}function tS(t,e,n,r){const i=gt(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&uc(t.onDisconnect_,e,i),Vs(t,r,s,o)})}function x3(t,e,n,r,i){const s=gt(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&uc(t.onDisconnect_,e,s),Vs(t,i,o,a)})}function P3(t,e,n,r){if(Cf(n)){qt("onDisconnect().update() called with empty data.  Don't do anything."),Vs(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&en(n,(o,a)=>{const l=gt(a);uc(t.onDisconnect_,ft(e,o),l)}),Vs(t,r,i,s)})}function O3(t,e,n){let r;Ce(e._path)===".info"?r=X0(t.infoSyncTree_,e,n):r=X0(t.serverSyncTree_,e,n),gb(t.eventQueue_,e._path,r)}function Ny(t,e,n){let r;Ce(e._path)===".info"?r=Ay(t.infoSyncTree_,e,n):r=Ay(t.serverSyncTree_,e,n),gb(t.eventQueue_,e._path,r)}function eO(t){t.persistentConnection_&&t.persistentConnection_.interrupt(JP)}function D3(t){t.persistentConnection_&&t.persistentConnection_.resume(JP)}function hc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),qt(n,...e)}function Vs(t,e,n,r){e&&cc(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function M3(t,e,n,r,i,s){hc(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:zx(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=yb(t,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{jd("transaction failed: Data returned ",l,o.path),o.status=0;const c=Sg(t.transactionQueueTree_,e),u=Aa(c)||[];u.push(o),fb(c,u);let d;typeof l=="object"&&l!==null&&lr(l,".priority")?(d=jo(l,".priority"),q(Zu(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(Eg(t.serverSyncTree_,e)||ue.EMPTY_NODE).getPriority().val();const h=Wd(t),f=gt(l,d),p=ub(f,a,h);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=p,o.currentWriteId=Rg(t);const g=ib(t.serverSyncTree_,e,p,o.currentWriteId,o.applyLocally);Cr(t.eventQueue_,e,g),Ng(t,t.transactionQueueTree_)}}function yb(t,e,n){return Eg(t.serverSyncTree_,e,n)||ue.EMPTY_NODE}function Ng(t,e=t.transactionQueueTree_){if(e||xg(t,e),Aa(e)){const n=nO(t,e);q(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&L3(t,Bd(e),n)}else KP(e)&&Cg(e,n=>{Ng(t,n)})}function L3(t,e,n){const r=n.map(c=>c.currentWriteId),i=yb(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];q(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Ln(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{hc(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(ws(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();xg(t,Sg(t.transactionQueueTree_,e)),Ng(t,t.transactionQueueTree_),Cr(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)cc(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Tn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Fl(t,e)}},o)}function Fl(t,e){const n=tO(t,e),r=Bd(n),i=nO(t,n);return F3(t,i,r),r}function F3(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Ln(n,l.path);let u=!1,d;if(q(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(ws(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=E3)u=!0,d="maxretry",i=i.concat(ws(t.serverSyncTree_,l.currentWriteId,!0));else{const h=yb(t,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){jd("transaction failed: Data returned ",f,l.path);let p=gt(f);typeof f=="object"&&f!=null&&lr(f,".priority")||(p=p.updatePriority(h.getPriority()));const m=l.currentWriteId,v=Wd(t),b=ub(p,h,v);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=b,l.currentWriteId=Rg(t),o.splice(o.indexOf(m),1),i=i.concat(ib(t.serverSyncTree_,l.path,b,l.currentWriteId,l.applyLocally)),i=i.concat(ws(t.serverSyncTree_,m,!0))}else u=!0,d="nodata",i=i.concat(ws(t.serverSyncTree_,l.currentWriteId,!0))}Cr(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}xg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)cc(r[a]);Ng(t,t.transactionQueueTree_)}function tO(t,e){let n,r=t.transactionQueueTree_;for(n=Ce(e);n!==null&&Aa(r)===void 0;)r=Sg(r,n),e=Je(e),n=Ce(e);return r}function nO(t,e){const n=[];return rO(t,e,n),n.sort((r,i)=>r.order-i.order),n}function rO(t,e,n){const r=Aa(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Cg(e,i=>{rO(t,i,n)})}function xg(t,e){const n=Aa(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,fb(e,n.length>0?n:void 0)}Cg(e,r=>{xg(t,r)})}function _b(t,e){const n=Bd(tO(t,e)),r=Sg(t.transactionQueueTree_,e);return p3(r,i=>{Gm(t,i)}),Gm(t,r),GP(r,i=>{Gm(t,i)}),n}function Gm(t,e){const n=Aa(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(q(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(q(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ws(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?fb(e,void 0):n.length=s+1,Cr(t.eventQueue_,Bd(e),i);for(let o=0;o<r.length;o++)cc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function V3(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Tn(`Invalid query segment '${n}' in query '${t}'`)}return e}const xy=function(t,e){const n=U3(t),r=n.namespace;n.domain==="firebase.com"&&pi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&pi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||zz();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new cP(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new We(n.pathString)}},U3=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=$3(t.substring(u,d)));const h=V3(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Dt(this.snapshot.exportVal())}}class sO{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Ot;return N3(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){mr("OnDisconnect.remove",this._path);const e=new Ot;return tS(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){mr("OnDisconnect.set",this._path),mi("OnDisconnect.set",e,this._path,!1);const n=new Ot;return tS(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){mr("OnDisconnect.setWithPriority",this._path),mi("OnDisconnect.setWithPriority",e,this._path,!1),pb("OnDisconnect.setWithPriority",n,!1);const r=new Ot;return x3(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){mr("OnDisconnect.update",this._path),YP("OnDisconnect.update",e,this._path,!1);const n=new Ot;return P3(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ke(this._path)?null:Ww(this._path)}get ref(){return new Nr(this._repo,this._path)}get _queryIdentifier(){const e=U0(this._queryParams),n=Vw(e);return n==="{}"?"default":n}get _queryObject(){return U0(this._queryParams)}isEqual(e){if(e=$(e),!(e instanceof Xn))return!1;const n=this._repo===e._repo,r=Hw(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+R4(this._path)}}function Pg(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Js(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ai){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Ki)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==gi)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===rt){if(e!=null&&!Zu(e)||n!=null&&!Zu(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(q(t.getIndex()instanceof zw||t.getIndex()===Yw,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Og(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Nr extends Xn{constructor(e,n){super(e,n,new yg,!1)}get parent(){const e=yP(this._path);return e===null?null:new Nr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Yo{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new We(e),r=Qo(this.ref,e);return new Yo(this._node.getChild(n),r,rt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Yo(i,Qo(this.ref,r),rt)))}hasChild(e){const n=new We(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function aO(t,e){return t=$(t),t._checkNotDeleted("ref"),e!==void 0?Qo(t._root,e):t._root}function nS(t,e){t=$(t),t._checkNotDeleted("refFromURL");const n=xy(e,t._repo.repoInfo_.nodeAdmin);QP("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&pi("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),aO(t,n.path.toString())}function Qo(t,e){return t=$(t),Ce(t._path)===null?w3("child","path",e,!1):ed("child","path",e,!1),new Nr(t._repo,ft(t._path,e))}function j3(t,e){t=$(t),mr("push",t._path),mi("push",e,t._path,!0);const n=ZP(t._repo),r=Q4(n),i=Qo(t,r),s=Qo(t,r);let o;return e!=null?o=wb(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function q3(t){return mr("remove",t._path),wb(t,null)}function wb(t,e){t=$(t),mr("set",t._path),mi("set",e,t._path,!1);const n=new Ot;return vb(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function W3(t,e){t=$(t),mr("setPriority",t._path),pb("setPriority",e,!1);const n=new Ot;return vb(t._repo,ft(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function H3(t,e,n){if(mr("setWithPriority",t._path),mi("setWithPriority",e,t._path,!1),pb("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new Ot;return vb(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function K3(t,e){YP("update",e,t._path,!1);const n=new Ot;return A3(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function G3(t){return t=$(t),k3(t._repo,t).then(e=>new Yo(e,new Nr(t._repo,t._path),t._queryParams.getIndex()))}class Dg{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new iO("value",this,new Yo(e.snapshotNode,new Nr(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new sO(this,e,n):null}matches(e){return e instanceof Dg?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Mg{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new sO(this,e,n):null}createEvent(e,n){q(e.childName!=null,"Child events should have a childName.");const r=Qo(new Nr(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new iO(e.type,this,new Yo(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Mg?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Hd(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,c=(u,d)=>{Ny(t._repo,t,a),l(u,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new oO(n,s||void 0),a=e==="value"?new Dg(o):new Mg(e,o);return O3(t._repo,t,a),()=>Ny(t._repo,t,a)}function Py(t,e,n,r){return Hd(t,"value",e,n,r)}function rS(t,e,n,r){return Hd(t,"child_added",e,n,r)}function iS(t,e,n,r){return Hd(t,"child_changed",e,n,r)}function sS(t,e,n,r){return Hd(t,"child_moved",e,n,r)}function oS(t,e,n,r){return Hd(t,"child_removed",e,n,r)}function aS(t,e,n){let r=null;const i=n?new oO(n):null;e==="value"?r=new Dg(i):e&&(r=new Mg(e,i)),Ny(t._repo,t,r)}class Gr{}class lO extends Gr{constructor(e,n){super();this._value=e,this._key=n}_apply(e){mi("endAt",this._value,e._path,!0);const n=wy(e._queryParams,this._value,this._key);if(Og(n),Js(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xn(e._repo,e._path,n,e._orderByCalled)}}function z3(t,e){return qd("endAt","key",e,!0),new lO(t,e)}class Y3 extends Gr{constructor(e,n){super();this._value=e,this._key=n}_apply(e){mi("endBefore",this._value,e._path,!1);const n=r6(e._queryParams,this._value,this._key);if(Og(n),Js(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xn(e._repo,e._path,n,e._orderByCalled)}}function Q3(t,e){return qd("endBefore","key",e,!0),new Y3(t,e)}class cO extends Gr{constructor(e,n){super();this._value=e,this._key=n}_apply(e){mi("startAt",this._value,e._path,!0);const n=_y(e._queryParams,this._value,this._key);if(Og(n),Js(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Xn(e._repo,e._path,n,e._orderByCalled)}}function X3(t=null,e){return qd("startAt","key",e,!0),new cO(t,e)}class J3 extends Gr{constructor(e,n){super();this._value=e,this._key=n}_apply(e){mi("startAfter",this._value,e._path,!1);const n=n6(e._queryParams,this._value,this._key);if(Og(n),Js(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Xn(e._repo,e._path,n,e._orderByCalled)}}function Z3(t,e){return qd("startAfter","key",e,!0),new J3(t,e)}class eY extends Gr{constructor(e){super();this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xn(e._repo,e._path,e6(e._queryParams,this._limit),e._orderByCalled)}}function tY(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new eY(t)}class nY extends Gr{constructor(e){super();this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xn(e._repo,e._path,t6(e._queryParams,this._limit),e._orderByCalled)}}function rY(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new nY(t)}class iY extends Gr{constructor(e){super();this._path=e}_apply(e){Pg(e,"orderByChild");const n=new We(this._path);if(ke(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new zw(n),i=_g(e._queryParams,r);return Js(i),new Xn(e._repo,e._path,i,!0)}}function sY(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ed("orderByChild","path",t,!1),new iY(t)}class oY extends Gr{_apply(e){Pg(e,"orderByKey");const n=_g(e._queryParams,ai);return Js(n),new Xn(e._repo,e._path,n,!0)}}function aY(){return new oY}class lY extends Gr{_apply(e){Pg(e,"orderByPriority");const n=_g(e._queryParams,rt);return Js(n),new Xn(e._repo,e._path,n,!0)}}function cY(){return new lY}class uY extends Gr{_apply(e){Pg(e,"orderByValue");const n=_g(e._queryParams,Yw);return Js(n),new Xn(e._repo,e._path,n,!0)}}function dY(){return new uY}class hY extends Gr{constructor(e,n){super();this._value=e,this._key=n}_apply(e){if(mi("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new lO(this._value,this._key)._apply(new cO(this._value,this._key)._apply(e))}}function fY(t,e){return qd("equalTo","key",e,!0),new hY(t,e)}function Pr(t,...e){let n=$(t);for(const r of e)n=r._apply(n);return n}H6(Nr);Q6(Nr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pY="FIREBASE_DATABASE_EMULATOR_HOST",Oy={};let gY=!1;function mY(t,e,n,r){t.repoInfo_=new cP(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}function uO(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||pi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=xy(s,i),a=o.repoInfo,l,c;typeof process!="undefined"&&{}&&(c={}[pY]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=xy(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new yl(yl.OWNER):new r4(t.name,t.options,e);QP("Invalid Firebase Database URL",o),ke(o.path)||pi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=yY(a,t,u,new n4(t.name,n));return new _Y(d,t)}function vY(t,e){const n=Oy[e];(!n||n[t.key]!==t)&&pi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),eO(t),delete n[t.key]}function yY(t,e,n,r){let i=Oy[e.name];i||(i={},Oy[e.name]=i);let s=i[t.toURLString()];return s&&pi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new T3(t,gY,n,r),i[t.toURLString()]=s,s}class _Y{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(S3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Nr(this._repo,je())),this._rootInternal}_delete(){return this._rootInternal!==null&&(vY(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&pi("Cannot call "+e+" on a deleted database.")}}function dO(){Pl.IS_TRANSPORT_INITIALIZED&&Tn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function wY(){dO(),_s.forceDisallow()}function bY(){dO(),fr.forceDisallow(),_s.forceAllow()}function Soe(t=Zp(),e){return Ii(t,"database").getImmediate({identifier:e})}function IY(t,e,n,r={}){t=$(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&pi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new yl(yl.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:ow(r.mockUserToken,t.app.options.projectId);s=new yl(o)}mY(i,e,n,s)}function EY(t){t=$(t),t._checkNotDeleted("goOffline"),eO(t._repo)}function TY(t){t=$(t),t._checkNotDeleted("goOnline"),D3(t._repo)}function SY(t,e){Qx(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CY(t){Kx(Ei),yt(new Be("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return uO(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Ze(I0,E0,t),Ze(I0,E0,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kY={".sv":"timestamp"};function AY(){return kY}function RY(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function xY(t,e,n){var r;if(t=$(t),mr("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new Ot,o=(l,c,u)=>{let d=null;l?s.reject(l):(d=new Yo(u,new Nr(t._repo,t._path),rt),s.resolve(new NY(c,d)))},a=Py(t,()=>{});return M3(t._repo,t._path,e,o,a,i),s.promise}Bi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Bi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};CY();const PY="@firebase/database-compat",OY="0.2.0";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DY=new bi("@firebase/database-compat"),hO=function(t){const e="FIREBASE WARNING: "+t;DY.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MY=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Gn(t,e)+"must be a boolean.")},LY=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Gn(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FY{constructor(e){this._delegate=e}cancel(e){he("OnDisconnect.cancel",0,1,arguments.length),Bt("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){he("OnDisconnect.remove",0,1,arguments.length),Bt("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){he("OnDisconnect.set",1,2,arguments.length),Bt("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){he("OnDisconnect.setWithPriority",2,3,arguments.length),Bt("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if(he("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,hO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Bt("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Y{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return he("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){this._database=e,this._delegate=n}val(){return he("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return he("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return he("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return he("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return he("DataSnapshot.child",0,1,arguments.length),e=String(e),ed("DataSnapshot.child","path",e,!1),new Ss(this._database,this._delegate.child(e))}hasChild(e){return he("DataSnapshot.hasChild",1,1,arguments.length),ed("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return he("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return he("DataSnapshot.forEach",1,1,arguments.length),Bt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new Ss(this._database,n)))}hasChildren(){return he("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return he("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return he("DataSnapshot.ref",0,0,arguments.length),new rr(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class un{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;he("Query.on",2,4,arguments.length),Bt("Query.on","callback",n,!1);const o=un.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{n.call(o.context,new Ss(this.database,c),u)};a.userCallback=n,a.context=o.context;const l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return Py(this._delegate,a,l),n;case"child_added":return rS(this._delegate,a,l),n;case"child_removed":return oS(this._delegate,a,l),n;case"child_changed":return iS(this._delegate,a,l),n;case"child_moved":return sS(this._delegate,a,l),n;default:throw new Error(Gn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(he("Query.off",0,3,arguments.length),LY("Query.off",e,!0),Bt("Query.off","callback",n,!0),FT("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,aS(this._delegate,e,i)}else aS(this._delegate,e)}get(){return G3(this._delegate).then(e=>new Ss(this.database,e))}once(e,n,r,i){he("Query.once",1,4,arguments.length),Bt("Query.once","callback",n,!0);const s=un.getCancelAndContextArgs_("Query.once",r,i),o=new Ot,a=(c,u)=>{const d=new Ss(this.database,c);n&&n.call(s.context,d,u),o.resolve(d)};a.userCallback=n,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":Py(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":rS(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":oS(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":iS(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":sS(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Gn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return he("Query.limitToFirst",1,1,arguments.length),new un(this.database,Pr(this._delegate,tY(e)))}limitToLast(e){return he("Query.limitToLast",1,1,arguments.length),new un(this.database,Pr(this._delegate,rY(e)))}orderByChild(e){return he("Query.orderByChild",1,1,arguments.length),new un(this.database,Pr(this._delegate,sY(e)))}orderByKey(){return he("Query.orderByKey",0,0,arguments.length),new un(this.database,Pr(this._delegate,aY()))}orderByPriority(){return he("Query.orderByPriority",0,0,arguments.length),new un(this.database,Pr(this._delegate,cY()))}orderByValue(){return he("Query.orderByValue",0,0,arguments.length),new un(this.database,Pr(this._delegate,dY()))}startAt(e=null,n){return he("Query.startAt",0,2,arguments.length),new un(this.database,Pr(this._delegate,X3(e,n)))}startAfter(e=null,n){return he("Query.startAfter",0,2,arguments.length),new un(this.database,Pr(this._delegate,Z3(e,n)))}endAt(e=null,n){return he("Query.endAt",0,2,arguments.length),new un(this.database,Pr(this._delegate,z3(e,n)))}endBefore(e=null,n){return he("Query.endBefore",0,2,arguments.length),new un(this.database,Pr(this._delegate,Q3(e,n)))}equalTo(e,n){return he("Query.equalTo",1,2,arguments.length),new un(this.database,Pr(this._delegate,fY(e,n)))}toString(){return he("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return he("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(he("Query.isEqual",1,1,arguments.length),!(e instanceof un)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,Bt(e,"cancel",i.cancel,!0),i.context=r,FT(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Gn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new rr(this.database,new Nr(this._delegate._repo,this._delegate._path))}}class rr extends un{constructor(e,n){super(e,new Xn(n._repo,n._path,new yg,!1));this.database=e,this._delegate=n}getKey(){return he("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return he("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new rr(this.database,Qo(this._delegate,e))}getParent(){he("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new rr(this.database,e):null}getRoot(){return he("Reference.root",0,0,arguments.length),new rr(this.database,this._delegate.root)}set(e,n){he("Reference.set",1,2,arguments.length),Bt("Reference.set","onComplete",n,!0);const r=wb(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(he("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,hO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}mr("Reference.update",this._delegate._path),Bt("Reference.update","onComplete",n,!0);const r=K3(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){he("Reference.setWithPriority",2,3,arguments.length),Bt("Reference.setWithPriority","onComplete",r,!0);const i=H3(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){he("Reference.remove",0,1,arguments.length),Bt("Reference.remove","onComplete",e,!0);const n=q3(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){he("Reference.transaction",1,3,arguments.length),Bt("Reference.transaction","transactionUpdate",e,!1),Bt("Reference.transaction","onComplete",n,!0),MY("Reference.transaction","applyLocally",r,!0);const i=xY(this._delegate,e,{applyLocally:r}).then(s=>new $Y(s.committed,new Ss(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){he("Reference.setPriority",1,2,arguments.length),Bt("Reference.setPriority","onComplete",n,!0);const r=W3(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){he("Reference.push",0,2,arguments.length),Bt("Reference.push","onComplete",n,!0);const r=j3(this._delegate,e),i=r.then(o=>new rr(this.database,o));n&&i.then(()=>n(null),o=>n(o));const s=new rr(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return mr("Reference.onDisconnect",this._delegate._path),new FY(new B3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:wY,forceLongPolling:bY}}useEmulator(e,n,r={}){IY(this._delegate,e,n,r)}ref(e){if(he("database.ref",0,1,arguments.length),e instanceof rr){const n=nS(this._delegate,e.toString());return new rr(this,n)}else{const n=aO(this._delegate,e);return new rr(this,n)}}refFromURL(e){he("database.refFromURL",1,1,arguments.length);const r=nS(this._delegate,e);return new rr(this,r)}goOffline(){return he("database.goOffline",0,0,arguments.length),EY(this._delegate)}goOnline(){return he("database.goOnline",0,0,arguments.length),TY(this._delegate)}}td.ServerValue={TIMESTAMP:AY(),increment:t=>RY(t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VY({app:t,url:e,version:n,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){Kx(n);const o=new zR("auth-internal",new YR("database-standalone"));return o.setComponent(new Be("auth-internal",()=>r,"PRIVATE")),{instance:new td(uO(t,o,void 0,e,s),t),namespace:i}}var UY=Object.freeze({__proto__:null,initStandalone:VY});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BY=td.ServerValue;function jY(t){t.INTERNAL.registerComponent(new Be("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new td(i,r)},"PUBLIC").setServiceProps({Reference:rr,Query:un,Database:td,DataSnapshot:Ss,enableLogging:SY,INTERNAL:UY,ServerValue:BY}).setMultipleInstances(!0)),t.registerVersion(PY,OY)}jY(et);var qY=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ee,bb=bb||{},pe=qY||self;function ep(){}function Dy(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Kd(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function WY(t){return Object.prototype.hasOwnProperty.call(t,zm)&&t[zm]||(t[zm]=++HY)}var zm="closure_uid_"+(1e9*Math.random()>>>0),HY=0;function KY(t,e,n){return t.call.apply(t.bind,arguments)}function GY(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function mn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?mn=KY:mn=GY,mn.apply(null,arguments)}function Ph(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function _n(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Zs(){this.s=this.s,this.o=this.o}var zY=0,YY={};Zs.prototype.s=!1;Zs.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),zY!=0)){var t=WY(this);delete YY[t]}};Zs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fO=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},pO=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i=typeof t=="string"?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function QY(t){e:{var e=B5;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function lS(t){return Array.prototype.concat.apply([],arguments)}function Ib(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function tp(t){return/^[\s\xa0]*$/.test(t)}var cS=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function On(t,e){return t.indexOf(e)!=-1}function Ym(t,e){return t<e?-1:t>e?1:0}var Dn;e:{var uS=pe.navigator;if(uS){var dS=uS.userAgent;if(dS){Dn=dS;break e}}Dn=""}function Eb(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function gO(t){const e={};for(const n in t)e[n]=t[n];return e}var hS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mO(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<hS.length;s++)n=hS[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Tb(t){return Tb[" "](t),t}Tb[" "]=ep;function XY(t){var e=e5;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var JY=On(Dn,"Opera"),$l=On(Dn,"Trident")||On(Dn,"MSIE"),vO=On(Dn,"Edge"),My=vO||$l,yO=On(Dn,"Gecko")&&!(On(Dn.toLowerCase(),"webkit")&&!On(Dn,"Edge"))&&!(On(Dn,"Trident")||On(Dn,"MSIE"))&&!On(Dn,"Edge"),ZY=On(Dn.toLowerCase(),"webkit")&&!On(Dn,"Edge");function _O(){var t=pe.document;return t?t.documentMode:void 0}var np;e:{var Qm="",Xm=function(){var t=Dn;if(yO)return/rv:([^\);]+)(\)|;)/.exec(t);if(vO)return/Edge\/([\d\.]+)/.exec(t);if($l)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(ZY)return/WebKit\/(\S+)/.exec(t);if(JY)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Xm&&(Qm=Xm?Xm[1]:""),$l){var Jm=_O();if(Jm!=null&&Jm>parseFloat(Qm)){np=String(Jm);break e}}np=Qm}var e5={};function t5(){return XY(function(){let t=0;const e=cS(String(np)).split("."),n=cS("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=Ym(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||Ym(i[2].length==0,s[2].length==0)||Ym(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var Ly;if(pe.document&&$l){var fS=_O();Ly=fS||parseInt(np,10)||void 0}else Ly=void 0;var n5=Ly,r5=function(){if(!pe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{pe.addEventListener("test",ep,e),pe.removeEventListener("test",ep,e)}catch{}return t}();function Sn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Sn.prototype.h=function(){this.defaultPrevented=!0};function nd(t,e){if(Sn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(yO){e:{try{Tb(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:i5[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&nd.Z.h.call(this)}}_n(nd,Sn);var i5={2:"touch",3:"pen",4:"mouse"};nd.prototype.h=function(){nd.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Gd="closure_listenable_"+(1e6*Math.random()|0),s5=0;function o5(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++s5,this.ca=this.fa=!1}function Lg(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Fg(t){this.src=t,this.g={},this.h=0}Fg.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=$y(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new o5(e,this.src,s,!!r,i),e.fa=n,t.push(e)),e};function Fy(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=fO(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Lg(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function $y(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}var Sb="closure_lm_"+(1e6*Math.random()|0),Zm={};function wO(t,e,n,r,i){if(r&&r.once)return IO(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)wO(t,e[s],n,r,i);return null}return n=Ab(n),t&&t[Gd]?t.N(e,n,Kd(r)?!!r.capture:!!r,i):bO(t,e,n,!1,r,i)}function bO(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Kd(i)?!!i.capture:!!i,a=kb(t);if(a||(t[Sb]=a=new Fg(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=a5(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)r5||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(TO(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function a5(){function t(n){return e.call(t.src,t.listener,n)}var e=l5;return t}function IO(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)IO(t,e[s],n,r,i);return null}return n=Ab(n),t&&t[Gd]?t.O(e,n,Kd(r)?!!r.capture:!!r,i):bO(t,e,n,!0,r,i)}function EO(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)EO(t,e[s],n,r,i);else r=Kd(r)?!!r.capture:!!r,n=Ab(n),t&&t[Gd]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=$y(s,n,r,i),-1<n&&(Lg(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=kb(t))&&(e=t.g[e.toString()],t=-1,e&&(t=$y(e,n,r,i)),(n=-1<t?e[t]:null)&&Cb(n))}function Cb(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[Gd])Fy(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(TO(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=kb(e))?(Fy(n,t),n.h==0&&(n.src=null,e[Sb]=null)):Lg(t)}}}function TO(t){return t in Zm?Zm[t]:Zm[t]="on"+t}function l5(t,e){if(t.ca)t=!0;else{e=new nd(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Cb(t),t=n.call(r,e)}return t}function kb(t){return t=t[Sb],t instanceof Fg?t:null}var ev="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ab(t){return typeof t=="function"?t:(t[ev]||(t[ev]=function(e){return t.handleEvent(e)}),t[ev])}function tn(){Zs.call(this),this.i=new Fg(this),this.P=this,this.I=null}_n(tn,Zs);tn.prototype[Gd]=!0;tn.prototype.removeEventListener=function(t,e,n,r){EO(this,t,e,n,r)};function vn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Sn(e,t);else if(e instanceof Sn)e.target=e.target||t;else{var i=e;e=new Sn(r,t),mO(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Oh(o,r,!0,e)&&i}if(o=e.g=t,i=Oh(o,r,!0,e)&&i,i=Oh(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Oh(o,r,!1,e)&&i}tn.prototype.M=function(){if(tn.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Lg(n[r]);delete t.g[e],t.h--}}this.I=null};tn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};tn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Oh(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Fy(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Rb=pe.JSON.stringify;function c5(){var t=CO;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class u5{constructor(){this.h=this.g=null}add(e,n){const r=SO.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var SO=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new d5,t=>t.reset());class d5{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function h5(t){pe.setTimeout(()=>{throw t},0)}function Nb(t,e){Vy||f5(),Uy||(Vy(),Uy=!0),CO.add(t,e)}var Vy;function f5(){var t=pe.Promise.resolve(void 0);Vy=function(){t.then(p5)}}var Uy=!1,CO=new u5;function p5(){for(var t;t=c5();){try{t.h.call(t.g)}catch(n){h5(n)}var e=SO;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Uy=!1}function $g(t,e){tn.call(this),this.h=t||1,this.g=e||pe,this.j=mn(this.kb,this),this.l=Date.now()}_n($g,tn);ee=$g.prototype;ee.da=!1;ee.S=null;ee.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vn(this,"tick"),this.da&&(xb(this),this.start()))}};ee.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function xb(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}ee.M=function(){$g.Z.M.call(this),xb(this),delete this.g};function Pb(t,e,n){if(typeof t=="function")n&&(t=mn(t,n));else if(t&&typeof t.handleEvent=="function")t=mn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:pe.setTimeout(t,e||0)}function kO(t){t.g=Pb(()=>{t.g=null,t.i&&(t.i=!1,kO(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class g5 extends Zs{constructor(e,n){super();this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kO(this)}M(){super.M(),this.g&&(pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rd(t){Zs.call(this),this.h=t,this.g={}}_n(rd,Zs);var pS=[];function AO(t,e,n,r){Array.isArray(n)||(n&&(pS[0]=n.toString()),n=pS);for(var i=0;i<n.length;i++){var s=wO(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function RO(t){Eb(t.g,function(e,n){this.g.hasOwnProperty(n)&&Cb(e)},t),t.g={}}rd.prototype.M=function(){rd.Z.M.call(this),RO(this)};rd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Vg(){this.g=!0}Vg.prototype.Aa=function(){this.g=!1};function m5(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function v5(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function al(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+_5(t,n)+(r?" "+r:"")})}function y5(t,e){t.info(function(){return"TIMEOUT: "+e})}Vg.prototype.info=function(){};function _5(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Rb(n)}catch{return e}}var Ra={},gS=null;function Ug(){return gS=gS||new tn}Ra.Ma="serverreachability";function NO(t){Sn.call(this,Ra.Ma,t)}_n(NO,Sn);function id(t){const e=Ug();vn(e,new NO(e,t))}Ra.STAT_EVENT="statevent";function xO(t,e){Sn.call(this,Ra.STAT_EVENT,t),this.stat=e}_n(xO,Sn);function Fn(t){const e=Ug();vn(e,new xO(e,t))}Ra.Na="timingevent";function PO(t,e){Sn.call(this,Ra.Na,t),this.size=e}_n(PO,Sn);function zd(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return pe.setTimeout(function(){t()},e)}var Bg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},OO={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ob(){}Ob.prototype.h=null;function mS(t){return t.h||(t.h=t.i())}function DO(){}var Yd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Db(){Sn.call(this,"d")}_n(Db,Sn);function Mb(){Sn.call(this,"c")}_n(Mb,Sn);var By;function jg(){}_n(jg,Ob);jg.prototype.g=function(){return new XMLHttpRequest};jg.prototype.i=function(){return{}};By=new jg;function Qd(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new rd(this),this.P=w5,t=My?125:void 0,this.W=new $g(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new MO}function MO(){this.i=null,this.g="",this.h=!1}var w5=45e3,jy={},rp={};ee=Qd.prototype;ee.setTimeout=function(t){this.P=t};function qy(t,e,n){t.K=1,t.v=Wg(Gi(e)),t.s=n,t.U=!0,LO(t,null)}function LO(t,e){t.F=Date.now(),Xd(t),t.A=Gi(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),qO(n.h,"t",r),t.C=0,n=t.l.H,t.h=new MO,t.g=cD(t.l,n?e:null,!t.s),0<t.O&&(t.L=new g5(mn(t.Ia,t,t.g),t.O)),AO(t.V,t.g,"readystatechange",t.gb),e=t.H?gO(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),id(1),m5(t.j,t.u,t.A,t.m,t.X,t.s)}ee.gb=function(t){t=t.target;const e=this.L;e&&Mi(t)==3?e.l():this.Ia(t)};ee.Ia=function(t){try{if(t==this.g)e:{const u=Mi(this.g);var e=this.g.Da();const d=this.g.ba();if(!(3>u)&&(u!=3||My||this.g&&(this.h.h||this.g.ga()||wS(this.g)))){this.I||u!=4||e==7||(e==8||0>=d?id(3):id(2)),qg(this);var n=this.g.ba();this.N=n;t:if(FO(this)){var r=wS(this.g);t="";var i=r.length,s=Mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Ao(this),uu(this);var o="";break t}this.h.i=new pe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,v5(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tp(a)){var c=a;break t}}c=null}if(n=c)al(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wy(this,n);else{this.i=!1,this.o=3,Fn(12),Ao(this),uu(this);break e}}this.U?($O(this,u,o),My&&this.i&&u==3&&(AO(this.V,this.W,"tick",this.fb),this.W.start())):(al(this.j,this.m,o,null),Wy(this,o)),u==4&&Ao(this),this.i&&!this.I&&(u==4?sD(this.l,this):(this.i=!1,Xd(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Fn(12)):(this.o=0,Fn(13)),Ao(this),uu(this)}}}catch{}finally{}};function FO(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function $O(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=b5(t,n),i==rp){e==4&&(t.o=4,Fn(14),r=!1),al(t.j,t.m,null,"[Incomplete Response]");break}else if(i==jy){t.o=4,Fn(15),al(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else al(t.j,t.m,i,null),Wy(t,i);FO(t)&&i!=rp&&i!=jy&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Fn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wb(e),e.L=!0,Fn(11))):(al(t.j,t.m,n,"[Invalid Chunked Response]"),Ao(t),uu(t))}ee.fb=function(){if(this.g){var t=Mi(this.g),e=this.g.ga();this.C<e.length&&(qg(this),$O(this,t,e),this.i&&t!=4&&Xd(this))}};function b5(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?rp:(n=Number(e.substring(n,r)),isNaN(n)?jy:(r+=1,r+n>e.length?rp:(e=e.substr(r,n),t.C=r+n,e)))}ee.cancel=function(){this.I=!0,Ao(this)};function Xd(t){t.Y=Date.now()+t.P,VO(t,t.P)}function VO(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=zd(mn(t.eb,t),e)}function qg(t){t.B&&(pe.clearTimeout(t.B),t.B=null)}ee.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(y5(this.j,this.A),this.K!=2&&(id(3),Fn(17)),Ao(this),this.o=2,uu(this)):VO(this,this.Y-t)};function uu(t){t.l.G==0||t.I||sD(t.l,t)}function Ao(t){qg(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,xb(t.W),RO(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Wy(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Hy(n.i,t))){if(n.I=t.N,!t.J&&Hy(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)ap(n),Gg(n);else break e;qb(n),Fn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=zd(mn(n.ab,n),6e3));if(1>=KO(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Ro(n,11)}else if((t.J||n.g==t)&&ap(n),!tp(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.U=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.J=c[1],n.la=c[2];const u=c[3];u!=null&&(n.ma=u,n.h.info("VER="+n.ma));const d=c[4];d!=null&&(n.za=d,n.h.info("SVER="+n.za));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;!s.g&&(On(p,"spdy")||On(p,"quic")||On(p,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&($b(s,s.h),s.h=null))}if(r.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.sa=g,ht(r.F,r.D,g))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var o=t;if(r.oa=lD(r,r.H?r.la:null,r.W),o.J){GO(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(qg(a),Xd(a)),r.g=o}else rD(r);0<n.l.length&&zg(n)}else c[0]!="stop"&&c[0]!="close"||Ro(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ro(n,7):jb(n):c[0]!="noop"&&n.j&&n.j.wa(c),n.A=0)}}id(4)}catch{}}function I5(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Dy(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Lb(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Dy(t)||typeof t=="string")pO(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(Dy(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=I5(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function fc(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof fc)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}ee=fc.prototype;ee.R=function(){Fb(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};ee.T=function(){return Fb(this),this.g.concat()};function Fb(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Xo(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)r=t.g[e],Xo(i,r)||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}ee.get=function(t,e){return Xo(this.h,t)?this.h[t]:e};ee.set=function(t,e){Xo(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};ee.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};function Xo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var UO=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function E5(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Jo(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Jo){this.g=e!==void 0?e:t.g,ip(this,t.j),this.s=t.s,sp(this,t.i),op(this,t.m),this.l=t.l,e=t.h;var n=new sd;n.i=e.i,e.g&&(n.g=new fc(e.g),n.h=e.h),vS(this,n),this.o=t.o}else t&&(n=String(t).match(UO))?(this.g=!!e,ip(this,n[1]||"",!0),this.s=du(n[2]||""),sp(this,n[3]||"",!0),op(this,n[4]),this.l=du(n[5]||"",!0),vS(this,n[6]||"",!0),this.o=du(n[7]||"")):(this.g=!!e,this.h=new sd(null,this.g))}Jo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(zc(e,yS,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(zc(e,yS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(zc(n,n.charAt(0)=="/"?A5:k5,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",zc(n,N5)),t.join("")};function Gi(t){return new Jo(t)}function ip(t,e,n){t.j=n?du(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function sp(t,e,n){t.i=n?du(e,!0):e}function op(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function vS(t,e,n){e instanceof sd?(t.h=e,x5(t.h,t.g)):(n||(e=zc(e,R5)),t.h=new sd(e,t.g))}function ht(t,e,n){t.h.set(e,n)}function Wg(t){return ht(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function T5(t){return t instanceof Jo?Gi(t):new Jo(t,void 0)}function S5(t,e,n,r){var i=new Jo(null,void 0);return t&&ip(i,t),e&&sp(i,e),n&&op(i,n),r&&(i.l=r),i}function du(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function zc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,C5),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function C5(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var yS=/[#\/\?@]/g,k5=/[#\?:]/g,A5=/[#\?]/g,R5=/[#\?@]/g,N5=/#/g;function sd(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function eo(t){t.g||(t.g=new fc,t.h=0,t.i&&E5(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ee=sd.prototype;ee.add=function(t,e){eo(this),this.i=null,t=pc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function BO(t,e){eo(t),e=pc(t,e),Xo(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Xo(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Fb(t)))}function jO(t,e){return eo(t),e=pc(t,e),Xo(t.g.h,e)}ee.forEach=function(t,e){eo(this),this.g.forEach(function(n,r){pO(n,function(i){t.call(e,i,r,this)},this)},this)};ee.T=function(){eo(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n};ee.R=function(t){eo(this);var e=[];if(typeof t=="string")jO(this,t)&&(e=lS(e,this.g.get(pc(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=lS(e,t[n])}return e};ee.set=function(t,e){return eo(this),this.i=null,t=pc(this,t),jO(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ee.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function qO(t,e,n){BO(t,e),0<n.length&&(t.i=null,t.g.set(pc(t,e),Ib(n)),t.h+=n.length)}ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;r[s]!==""&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};function pc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function x5(t,e){e&&!t.j&&(eo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(BO(this,r),qO(this,i,n))},t)),t.j=e}var P5=class{constructor(t,e){this.h=t,this.g=e}};function WO(t){this.l=t||O5,pe.PerformanceNavigationTiming?(t=pe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(pe.g&&pe.g.Ea&&pe.g.Ea()&&pe.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var O5=10;function HO(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function KO(t){return t.h?1:t.g?t.g.size:0}function Hy(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function $b(t,e){t.g?t.g.add(e):t.h=e}function GO(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}WO.prototype.cancel=function(){if(this.i=zO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function zO(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Ib(t.i)}function Vb(){}Vb.prototype.stringify=function(t){return pe.JSON.stringify(t,void 0)};Vb.prototype.parse=function(t){return pe.JSON.parse(t,void 0)};function D5(){this.g=new Vb}function M5(t,e,n){const r=n||"";try{Lb(t,function(i,s){let o=i;Kd(i)&&(o=Rb(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function L5(t,e){const n=new Vg;if(pe.Image){const r=new Image;r.onload=Ph(Dh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ph(Dh,n,r,"TestLoadImage: error",!1,e),r.onabort=Ph(Dh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ph(Dh,n,r,"TestLoadImage: timeout",!1,e),pe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Dh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Jd(t){this.l=t.$b||null,this.j=t.ib||!1}_n(Jd,Ob);Jd.prototype.g=function(){return new Hg(this.l,this.j)};Jd.prototype.i=function(t){return function(){return t}}({});function Hg(t,e){tn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Ub,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_n(Hg,tn);var Ub=0;ee=Hg.prototype;ee.open=function(t,e){if(this.readyState!=Ub)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,od(this)};ee.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||pe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zd(this)),this.readyState=Ub};ee.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,od(this)),this.g&&(this.readyState=3,od(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof pe.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;YO(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function YO(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}ee.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Zd(this):od(this),this.readyState==3&&YO(this)}};ee.Ua=function(t){this.g&&(this.response=this.responseText=t,Zd(this))};ee.Ta=function(t){this.g&&(this.response=t,Zd(this))};ee.ha=function(){this.g&&Zd(this)};function Zd(t){t.readyState=4,t.l=null,t.j=null,t.A=null,od(t)}ee.setRequestHeader=function(t,e){this.v.append(t,e)};ee.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ee.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function od(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Hg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var F5=pe.JSON.parse;function xt(t){tn.call(this),this.headers=new fc,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=QO,this.K=this.L=!1}_n(xt,tn);var QO="",$5=/^https?$/i,V5=["POST","PUT"];ee=xt.prototype;ee.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():By.g(),this.C=this.u?mS(this.u):mS(By),this.g.onreadystatechange=mn(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){_S(this,s);return}t=n||"";const i=new fc(this.headers);r&&Lb(r,function(s,o){i.set(o,s)}),r=QY(i.T()),n=pe.FormData&&t instanceof pe.FormData,!(0<=fO(V5,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ZO(this),0<this.B&&((this.K=U5(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mn(this.pa,this)):this.A=Pb(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){_S(this,s)}};function U5(t){return $l&&t5()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function B5(t){return t.toLowerCase()=="content-type"}ee.pa=function(){typeof bb!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vn(this,"timeout"),this.abort(8))};function _S(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,XO(t),Kg(t)}function XO(t){t.D||(t.D=!0,vn(t,"complete"),vn(t,"error"))}ee.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,vn(this,"complete"),vn(this,"abort"),Kg(this))};ee.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Kg(this,!0)),xt.Z.M.call(this)};ee.Fa=function(){this.s||(this.F||this.v||this.l?JO(this):this.cb())};ee.cb=function(){JO(this)};function JO(t){if(t.h&&typeof bb!="undefined"&&(!t.C[1]||Mi(t)!=4||t.ba()!=2)){if(t.v&&Mi(t)==4)Pb(t.Fa,0,t);else if(vn(t,"readystatechange"),Mi(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(UO)[1]||null;if(!i&&pe.self&&pe.self.location){var s=pe.self.location.protocol;i=s.substr(0,s.length-1)}r=!$5.test(i?i.toLowerCase():"")}n=r}if(n)vn(t,"complete"),vn(t,"success");else{t.m=6;try{var o=2<Mi(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",XO(t)}}finally{Kg(t)}}}}function Kg(t,e){if(t.g){ZO(t);const n=t.g,r=t.C[0]?ep:null;t.g=null,t.C=null,e||vn(t,"ready");try{n.onreadystatechange=r}catch{}}}function ZO(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(pe.clearTimeout(t.A),t.A=null)}function Mi(t){return t.g?t.g.readyState:0}ee.ba=function(){try{return 2<Mi(this)?this.g.status:-1}catch{return-1}};ee.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};ee.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),F5(e)}};function wS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case QO:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}ee.Da=function(){return this.m};ee.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function j5(t){let e="";return Eb(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Bb(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=j5(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ht(t,e,n))}function Lc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function eD(t){this.za=0,this.l=[],this.h=new Vg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Lc("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Lc("baseRetryDelayMs",5e3,t),this.$a=Lc("retryDelaySeedMs",1e4,t),this.Ya=Lc("forwardChannelMaxRetries",2,t),this.ra=Lc("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new WO(t&&t.concurrentRequestLimit),this.Ca=new D5,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}ee=eD.prototype;ee.ma=8;ee.G=1;function jb(t){if(tD(t),t.G==3){var e=t.V++,n=Gi(t.F);ht(n,"SID",t.J),ht(n,"RID",e),ht(n,"TYPE","terminate"),eh(t,n),e=new Qd(t,t.h,e,void 0),e.K=2,e.v=Wg(Gi(n)),n=!1,pe.navigator&&pe.navigator.sendBeacon&&(n=pe.navigator.sendBeacon(e.v.toString(),"")),!n&&pe.Image&&(new Image().src=e.v,n=!0),n||(e.g=cD(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Xd(e)}aD(t)}ee.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Gg(t){t.g&&(Wb(t),t.g.cancel(),t.g=null)}function tD(t){Gg(t),t.u&&(pe.clearTimeout(t.u),t.u=null),ap(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&pe.clearTimeout(t.m),t.m=null)}function tv(t,e){t.l.push(new P5(t.Za++,e)),t.G==3&&zg(t)}function zg(t){HO(t.i)||t.m||(t.m=!0,Nb(t.Ha,t),t.C=0)}function q5(t,e){return KO(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=zd(mn(t.Ha,t,e),oD(t,t.C)),t.C++,!0)}ee.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new Qd(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=gO(s),mO(s,this.P)):s=this.P),this.o===null&&(i.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=nD(this,i,e),n=Gi(this.F),ht(n,"RID",t),ht(n,"CVER",22),this.D&&ht(n,"X-HTTP-Session-Id",this.D),eh(this,n),this.o&&s&&Bb(n,this.o,s),$b(this.i,i),this.Ra&&ht(n,"TYPE","init"),this.ja?(ht(n,"$req",e),ht(n,"SID","null"),i.$=!0,qy(i,n,null)):qy(i,n,e),this.G=2}}else this.G==3&&(t?bS(this,t):this.l.length==0||HO(this.i)||bS(this))};function bS(t,e){var n;e?n=e.m:n=t.V++;const r=Gi(t.F);ht(r,"SID",t.J),ht(r,"RID",n),ht(r,"AID",t.U),eh(t,r),t.o&&t.s&&Bb(r,t.o,t.s),n=new Qd(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=nD(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),$b(t.i,n),qy(n,r,e)}function eh(t,e){t.j&&Lb({},function(n,r){ht(e,r,n)})}function nD(t,e,n){n=Math.min(t.l.length,n);var r=t.j?mn(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].h;const u=i[l].g;if(c-=s,0>c)s=Math.max(0,i[l].h-100),a=!1;else try{M5(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function rD(t){t.g||t.u||(t.Y=1,Nb(t.Ga,t),t.A=0)}function qb(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=zd(mn(t.Ga,t),oD(t,t.A)),t.A++,!0)}ee.Ga=function(){if(this.u=null,iD(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=zd(mn(this.bb,this),t)}};ee.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Fn(10),Gg(this),iD(this))};function Wb(t){t.B!=null&&(pe.clearTimeout(t.B),t.B=null)}function iD(t){t.g=new Qd(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Gi(t.oa);ht(e,"RID","rpc"),ht(e,"SID",t.J),ht(e,"CI",t.N?"0":"1"),ht(e,"AID",t.U),eh(t,e),ht(e,"TYPE","xmlhttp"),t.o&&t.s&&Bb(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Wg(Gi(e)),n.s=null,n.U=!0,LO(n,t)}ee.ab=function(){this.v!=null&&(this.v=null,Gg(this),qb(this),Fn(19))};function ap(t){t.v!=null&&(pe.clearTimeout(t.v),t.v=null)}function sD(t,e){var n=null;if(t.g==e){ap(t),Wb(t),t.g=null;var r=2}else if(Hy(t.i,e))n=e.D,GO(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=Ug(),vn(r,new PO(r,n,e,i)),zg(t)}else rD(t);else if(i=e.o,i==3||i==0&&0<t.I||!(r==1&&q5(t,e)||r==2&&qb(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ro(t,5);break;case 4:Ro(t,10);break;case 3:Ro(t,6);break;default:Ro(t,2)}}}function oD(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ro(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=mn(t.jb,t);n||(n=new Jo("//www.google.com/images/cleardot.gif"),pe.location&&pe.location.protocol=="http"||ip(n,"https"),Wg(n)),L5(n.toString(),r)}else Fn(2);t.G=0,t.j&&t.j.va(e),aD(t),tD(t)}ee.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Fn(2)):(this.h.info("Failed to ping google.com"),Fn(1))};function aD(t){t.G=0,t.I=-1,t.j&&((zO(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,Ib(t.l),t.l.length=0),t.j.ua())}function lD(t,e,n){let r=T5(n);if(r.i!="")e&&sp(r,e+"."+r.i),op(r,r.m);else{const i=pe.location;r=S5(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Eb(t.aa,function(i,s){ht(r,s,i)}),e=t.D,n=t.sa,e&&n&&ht(r,e,n),ht(r,"VER",t.ma),eh(t,r),r}function cD(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new xt(new Jd({ib:!0})):new xt(t.qa),e.L=t.H,e}function uD(){}ee=uD.prototype;ee.xa=function(){};ee.wa=function(){};ee.va=function(){};ee.ua=function(){};ee.Oa=function(){};function lp(){if($l&&!(10<=Number(n5)))throw Error("Environmental error: no available transport.")}lp.prototype.g=function(t,e){return new cr(t,e)};function cr(t,e){tn.call(this),this.g=new eD(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!tp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!tp(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new gc(this)}_n(cr,tn);cr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Nb(mn(t.hb,t,e))),Fn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=lD(t,null,t.W),zg(t)};cr.prototype.close=function(){jb(this.g)};cr.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,tv(this.g,e)}else this.v?(e={},e.__data__=Rb(t),tv(this.g,e)):tv(this.g,t)};cr.prototype.M=function(){this.g.j=null,delete this.j,jb(this.g),delete this.g,cr.Z.M.call(this)};function dD(t){Db.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}_n(dD,Db);function hD(){Mb.call(this),this.status=1}_n(hD,Mb);function gc(t){this.g=t}_n(gc,uD);gc.prototype.xa=function(){vn(this.g,"a")};gc.prototype.wa=function(t){vn(this.g,new dD(t))};gc.prototype.va=function(t){vn(this.g,new hD(t))};gc.prototype.ua=function(){vn(this.g,"b")};lp.prototype.createWebChannel=lp.prototype.g;cr.prototype.send=cr.prototype.u;cr.prototype.open=cr.prototype.m;cr.prototype.close=cr.prototype.close;Bg.NO_ERROR=0;Bg.TIMEOUT=8;Bg.HTTP_ERROR=6;OO.COMPLETE="complete";DO.EventType=Yd;Yd.OPEN="a";Yd.CLOSE="b";Yd.ERROR="c";Yd.MESSAGE="d";tn.prototype.listen=tn.prototype.N;xt.prototype.listenOnce=xt.prototype.O;xt.prototype.getLastError=xt.prototype.La;xt.prototype.getLastErrorCode=xt.prototype.Da;xt.prototype.getStatus=xt.prototype.ba;xt.prototype.getResponseJson=xt.prototype.Qa;xt.prototype.getResponseText=xt.prototype.ga;xt.prototype.send=xt.prototype.ea;var W5=function(){return new lp},H5=function(){return Ug()},nv=Bg,K5=OO,G5=Ra,IS={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},z5=Jd,Mh=DO,Y5=xt;const ES="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc="9.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new bi("@firebase/firestore");function Ky(){return Us.logLevel}function Q5(t){Us.setLogLevel(t)}function U(t,...e){if(Us.logLevel<=Te.DEBUG){const n=e.map(Hb);Us.debug(`Firestore (${mc}): ${t}`,...n)}}function Rt(t,...e){if(Us.logLevel<=Te.ERROR){const n=e.map(Hb);Us.error(`Firestore (${mc}): ${t}`,...n)}}function ad(t,...e){if(Us.logLevel<=Te.WARN){const n=e.map(Hb);Us.warn(`Firestore (${mc}): ${t}`,...n)}}function Hb(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${mc}) INTERNAL ASSERTION FAILED: `+t;throw Rt(e),new Error(e)}function fe(t,e){t||te()}function X5(t,e){t||te()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends Et{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dn.UNAUTHENTICATED))}shutdown(){}}class Z5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eQ{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Gt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new fD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new dn(e)}}class tQ{constructor(e,n,r){this.type="FirstParty",this.user=dn.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class nQ{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new tQ(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rQ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iQ{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.p=n.token,new rQ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.I(r),this.T=r=>n.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sQ(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr.A=-1;class pD{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sQ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function Vl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function gD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.timestamp=e}static fromTimestamp(e){return new de(e)}static min(){return new de(new Tt(0,0))}static max(){return new de(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Na(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ld.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ld?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends ld{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const oQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends ld{construct(e,n,r){return new Mt(e,n,r)}static isValidIdentifier(e){return oQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this.fields=e,e.sort(Mt.comparator)}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aQ(){return typeof atob!="undefined"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Lt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const lQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(t){if(fe(!!t),typeof t=="string"){let e=0;const n=lQ.exec(t);if(fe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zo(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function vD(t){const e=t.mapValue.fields.__previous_value__;return Kb(e)?vD(e):e}function cd(t){const e=Bs(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cQ{constructor(e,n,r,i,s,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class zi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new zi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t){return t==null}function ud(t){return t===0&&1/t==-1/0}function yD(t){return typeof t=="number"&&Number.isInteger(t)&&!ud(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.path=e}static fromPath(e){return new z(Fe.fromString(e))}static fromName(e){return new z(Fe.fromString(e).popFirst(5))}static empty(){return new z(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new z(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},of={nullValue:"NULL_VALUE"};function ea(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kb(t)?4:_D(t)?9007199254740991:10:te()}function vi(t,e){if(t===e)return!0;const n=ea(t);if(n!==ea(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cd(t).isEqual(cd(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Bs(r.timestampValue),o=Bs(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Zo(r.bytesValue).isEqual(Zo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return mt(r.geoPointValue.latitude)===mt(i.geoPointValue.latitude)&&mt(r.geoPointValue.longitude)===mt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return mt(r.integerValue)===mt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=mt(r.doubleValue),o=mt(i.doubleValue);return s===o?ud(s)===ud(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Vl(t.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(TS(s)!==TS(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!vi(s[a],o[a])))return!1;return!0}(t,e);default:return te()}}function dd(t,e){return(t.values||[]).find(n=>vi(n,e))!==void 0}function js(t,e){if(t===e)return 0;const n=ea(t),r=ea(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=mt(i.integerValue||i.doubleValue),a=mt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return SS(t.timestampValue,e.timestampValue);case 4:return SS(cd(t),cd(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Zo(i),a=Zo(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=ve(o[l],a[l]);if(c!==0)return c}return ve(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ve(mt(i.latitude),mt(s.latitude));return o!==0?o:ve(mt(i.longitude),mt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=js(o[l],a[l]);if(c)return c}return ve(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===bs.mapValue&&s===bs.mapValue)return 0;if(i===bs.mapValue)return 1;if(s===bs.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const d=ve(a[u],c[u]);if(d!==0)return d;const h=js(o[a[u]],l[c[u]]);if(h!==0)return h}return ve(a.length,c.length)}(t.mapValue,e.mapValue);default:throw te()}}function SS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=Bs(t),r=Bs(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function _l(t){return Gy(t)}function Gy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Bs(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Zo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,z.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=Gy(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${Gy(r.fields[a])}`;return s+"}"}(t.mapValue):te();var e,n}function ta(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zy(t){return!!t&&"integerValue"in t}function hd(t){return!!t&&"arrayValue"in t}function CS(t){return!!t&&"nullValue"in t}function kS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function af(t){return!!t&&"mapValue"in t}function hu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Na(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=hu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _D(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function uQ(t){return"nullValue"in t?of:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ta(zi.empty(),z.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:te()}function dQ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ta(zi.empty(),z.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?bs:te()}function AS(t,e){const n=js(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function RS(t,e){const n=js(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!af(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(n)}setAll(e){let n=Mt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=hu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());af(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];af(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Na(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new In(hu(this.value))}}function wD(t){const e=[];return Na(t.fields,(n,r)=>{const i=new Mt([n]);if(af(r)){const s=wD(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ul(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n,r,i,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new lt(e,0,de.min(),de.min(),In.empty(),0)}static newFoundDocument(e,n,r){return new lt(e,1,n,de.min(),r,0)}static newNoDocument(e,n){return new lt(e,2,n,de.min(),In.empty(),0)}static newUnknownDocument(e,n){return new lt(e,3,n,de.min(),In.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lt(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bD{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Yy(t){return t.fields.find(e=>e.kind===2)}function go(t){return t.fields.filter(e=>e.kind!==2)}bD.UNKNOWN_ID=-1;class hQ{constructor(e,n){this.fieldPath=e,this.kind=n}}class cp{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new cp(0,qr.min())}}function ID(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new qr(i,z.empty(),e)}function fQ(t){return new qr(t.readTime,t.key,-1)}class qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qr(de.min(),z.empty(),-1)}static max(){return new qr(de.max(),z.empty(),-1)}}function ED(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lh(this.root,e,this.comparator,!0)}}class Lh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:hn.RED,this.left=i!=null?i:hn.EMPTY,this.right=s!=null?s:hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new hn(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return hn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(t,e,n,r,i){return this}insert(t,e,n){return new hn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new NS(this.data.getIterator())}getIteratorFrom(e){return new NS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class NS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ga(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.P=null}}function xS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new pQ(t,e,n,r,i,s,o)}function na(t){const e=J(t);if(e.P===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+_l(i.value);var i}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),th(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_l(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_l(r)).join(",")),e.P=n}return e.P}function gQ(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${_l(r.value)}`;var r}).join(", ")}]`),th(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>_l(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>_l(n)).join(",")),`Target(${e})`}function nh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!EQ(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!vi(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!MS(t.startAt,e.startAt)&&MS(t.endAt,e.endAt)}function up(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function dp(t,e){return t.filters.filter(n=>n instanceof fn&&n.field.isEqual(e))}function PS(t,e,n){let r=of,i=!0;for(const s of dp(t,e)){let o=of,a=!0;switch(s.op){case"<":case"<=":o=uQ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=of}AS({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];AS({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function OS(t,e,n){let r=bs,i=!0;for(const s of dp(t,e)){let o=bs,a=!0;switch(s.op){case">=":case">":o=dQ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=bs}RS({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];RS({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}class fn extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.V(e,n,r):new mQ(e,n,r):n==="array-contains"?new _Q(e,r):n==="in"?new wQ(e,r):n==="not-in"?new bQ(e,r):n==="array-contains-any"?new IQ(e,r):new fn(e,n,r)}static V(e,n,r){return n==="in"?new vQ(e,r):new yQ(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.v(js(n,this.value)):n!==null&&ea(this.value)===ea(n)&&this.v(js(n,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class mQ extends fn{constructor(e,n,r){super(e,n,r),this.key=z.fromName(r.referenceValue)}matches(e){const n=z.comparator(e.key,this.key);return this.v(n)}}class vQ extends fn{constructor(e,n){super(e,"in",n),this.keys=TD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class yQ extends fn{constructor(e,n){super(e,"not-in",n),this.keys=TD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function TD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>z.fromName(r.referenceValue))}class _Q extends fn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hd(n)&&dd(n.arrayValue,this.value)}}class wQ extends fn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&dd(this.value.arrayValue,n)}}class bQ extends fn{constructor(e,n){super(e,"not-in",n)}matches(e){if(dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!dd(this.value.arrayValue,n)}}class IQ extends fn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>dd(this.value.arrayValue,r))}}class qs{constructor(e,n){this.position=e,this.inclusive=n}}class wl{constructor(e,n="asc"){this.field=e,this.dir=n}}function EQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function DS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=z.comparator(z.fromName(o.referenceValue),n.key):r=js(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function MS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.D=null,this.C=null,this.startAt,this.endAt}}function SD(t,e,n,r,i,s,o,a){return new ns(t,e,n,r,i,s,o,a)}function vc(t){return new ns(t)}function TQ(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Gb(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function zb(t){for(const e of t.filters)if(e.S())return e.field;return null}function Yb(t){return t.collectionGroup!==null}function Bl(t){const e=J(t);if(e.D===null){e.D=[];const n=zb(e),r=Gb(e);if(n!==null&&r===null)n.isKeyField()||e.D.push(new wl(n)),e.D.push(new wl(Mt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new wl(Mt.keyField(),s))}}}return e.D}function kr(t){const e=J(t);if(!e.C)if(e.limitType==="F")e.C=xS(e.path,e.collectionGroup,Bl(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Bl(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new wl(s.field,o))}const r=e.endAt?new qs(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new qs(e.startAt.position,e.startAt.inclusive):null;e.C=xS(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.C}function CD(t,e,n){return new ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rh(t,e){return nh(kr(t),kr(e))&&t.limitType===e.limitType}function kD(t){return`${na(kr(t))}|lt:${t.limitType}`}function Qy(t){return`Query(target=${gQ(kr(t))}; limitType=${t.limitType})`}function Qb(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):z.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of n.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=DS(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Bl(n),r)||n.endAt&&!function(i,s,o){const a=DS(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Bl(n),r))}(t,e)}function AD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RD(t){return(e,n)=>{let r=!1;for(const i of Bl(t)){const s=SQ(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function SQ(t,e,n){const r=t.field.isKeyField()?z.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?js(a,l):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t,e){if(t.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ud(e)?"-0":e}}function xD(t){return{integerValue:""+t}}function PD(t,e){return yD(e)?xD(e):ND(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(){this._=void 0}}function CQ(t,e,n){return t instanceof jl?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof ra?DD(t,e):t instanceof ia?MD(t,e):function(r,i){const s=OD(r,i),o=LS(s)+LS(r.k);return zy(s)&&zy(r.k)?xD(o):ND(r.M,o)}(t,e)}function kQ(t,e,n){return t instanceof ra?DD(t,e):t instanceof ia?MD(t,e):n}function OD(t,e){return t instanceof ql?zy(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class jl extends Yg{}class ra extends Yg{constructor(e){super(),this.elements=e}}function DD(t,e){const n=LD(e);for(const r of t.elements)n.some(i=>vi(i,r))||n.push(r);return{arrayValue:{values:n}}}class ia extends Yg{constructor(e){super(),this.elements=e}}function MD(t,e){let n=LD(e);for(const r of t.elements)n=n.filter(i=>!vi(i,r));return{arrayValue:{values:n}}}class ql extends Yg{constructor(e,n){super(),this.M=e,this.k=n}}function LS(t){return mt(t.integerValue||t.doubleValue)}function LD(t){return hd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n){this.field=e,this.transform=n}}function AQ(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof ra&&r instanceof ra||n instanceof ia&&r instanceof ia?Vl(n.elements,r.elements,vi):n instanceof ql&&r instanceof ql?vi(n.k,r.k):n instanceof jl&&r instanceof jl}(t.transform,e.transform)}class RQ{constructor(e,n){this.version=e,this.transformResults=n}}class Nt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nt}static exists(e){return new Nt(void 0,e)}static updateTime(e){return new Nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qg{}function NQ(t,e,n){t instanceof sh?function(r,i,s){const o=r.value.clone(),a=VS(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof xa?function(r,i,s){if(!lf(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=VS(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(FD(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Xy(t,e,n){t instanceof sh?function(r,i,s){if(!lf(r.precondition,i))return;const o=r.value.clone(),a=US(r.fieldTransforms,s,i);o.setAll(a),i.convertToFoundDocument($S(i),o).setHasLocalMutations()}(t,e,n):t instanceof xa?function(r,i,s){if(!lf(r.precondition,i))return;const o=US(r.fieldTransforms,s,i),a=i.data;a.setAll(FD(r)),a.setAll(o),i.convertToFoundDocument($S(i),a).setHasLocalMutations()}(t,e,n):function(r,i){lf(r.precondition,i)&&i.convertToNoDocument(de.min())}(t,e)}function xQ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=OD(r.transform,i||null);s!=null&&(n==null&&(n=In.empty()),n.set(r.field,s))}return n||null}function FS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Vl(n,r,(i,s)=>AQ(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function $S(t){return t.isFoundDocument()?t.version:de.min()}class sh extends Qg{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}}class xa extends Qg{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}}function FD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function VS(t,e,n){const r=new Map;fe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,kQ(o,a,n[i]))}return r}function US(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,CQ(s,o,e))}return r}class oh extends Qg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class Xb extends Qg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PQ{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,Me;function $D(t){switch(t){default:return te();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function VD(t){if(t===void 0)return Rt("GRPC error has no .code"),N.UNKNOWN;switch(t){case At.OK:return N.OK;case At.CANCELLED:return N.CANCELLED;case At.UNKNOWN:return N.UNKNOWN;case At.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case At.INTERNAL:return N.INTERNAL;case At.UNAVAILABLE:return N.UNAVAILABLE;case At.UNAUTHENTICATED:return N.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case At.NOT_FOUND:return N.NOT_FOUND;case At.ALREADY_EXISTS:return N.ALREADY_EXISTS;case At.PERMISSION_DENIED:return N.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case At.ABORTED:return N.ABORTED;case At.OUT_OF_RANGE:return N.OUT_OF_RANGE;case At.UNIMPLEMENTED:return N.UNIMPLEMENTED;case At.DATA_LOSS:return N.DATA_LOSS;default:return te()}}(Me=At||(At={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Na(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return mD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OQ=new Ct(z.comparator);function vr(){return OQ}const DQ=new Ct(z.comparator);function Jy(...t){let e=DQ;for(const n of t)e=e.insert(n.key,n);return e}function fu(){return new to(t=>t.toString(),(t,e)=>t.isEqual(e))}const MQ=new Ct(z.comparator),LQ=new it(z.comparator);function qe(...t){let e=LQ;for(const n of t)e=e.add(n);return e}const FQ=new it(ve);function Xg(){return FQ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,lh.createSynthesizedTargetChangeForCurrentChange(e,n)),new ah(de.min(),r,Xg(),vr(),qe())}}class lh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new lh(Lt.EMPTY_BYTE_STRING,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,r,i){this.O=e,this.removedTargetIds=n,this.key=r,this.F=i}}class UD{constructor(e,n){this.targetId=e,this.$=n}}class BD{constructor(e,n,r=Lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class BS{constructor(){this.B=0,this.L=qS(),this.U=Lt.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return this.B!==0}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=qe(),n=qe(),r=qe();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te()}}),new lh(this.U,this.q,e,n,r)}J(){this.K=!1,this.L=qS()}Y(e,n){this.K=!0,this.L=this.L.insert(e,n)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class $Q{constructor(e){this.nt=e,this.st=new Map,this.it=vr(),this.rt=jS(),this.ot=new it(ve)}ut(e){for(const n of e.O)e.F&&e.F.isFoundDocument()?this.at(n,e.F):this.ct(n,e.key,e.F);for(const n of e.removedTargetIds)this.ct(n,e.key,e.F)}ht(e){this.forEachTarget(e,n=>{const r=this.lt(n);switch(e.state){case 0:this.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(n);break;case 3:this.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(n)&&(this.dt(n),r.W(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.st.forEach((r,i)=>{this.ft(i)&&n(i)})}_t(e){const n=e.targetId,r=e.$.count,i=this.wt(n);if(i){const s=i.target;if(up(s))if(r===0){const o=new z(s.path);this.ct(n,o,lt.newNoDocument(o,de.min()))}else fe(r===1);else this.gt(n)!==r&&(this.dt(n),this.ot=this.ot.add(n))}}yt(e){const n=new Map;this.st.forEach((s,o)=>{const a=this.wt(o);if(a){if(s.current&&up(a.target)){const l=new z(a.target.path);this.it.get(l)!==null||this.It(o,l)||this.ct(o,l,lt.newNoDocument(l,e))}s.j&&(n.set(o,s.H()),s.J())}});let r=qe();this.rt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.wt(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.it.forEach((s,o)=>o.setReadTime(e));const i=new ah(e,n,this.ot,this.it,r);return this.it=vr(),this.rt=jS(),this.ot=new it(ve),i}at(e,n){if(!this.ft(e))return;const r=this.It(e,n.key)?2:0;this.lt(e).Y(n.key,r),this.it=this.it.insert(n.key,n),this.rt=this.rt.insert(n.key,this.Tt(n.key).add(e))}ct(e,n,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,n)?i.Y(n,1):i.X(n),this.rt=this.rt.insert(n,this.Tt(n).delete(e)),r&&(this.it=this.it.insert(n,r))}removeTarget(e){this.st.delete(e)}gt(e){const n=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let n=this.st.get(e);return n||(n=new BS,this.st.set(e,n)),n}Tt(e){let n=this.rt.get(e);return n||(n=new it(ve),this.rt=this.rt.insert(e,n)),n}ft(e){const n=this.wt(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}wt(e){const n=this.st.get(e);return n&&n.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new BS),this.nt.getRemoteKeysForTarget(e).forEach(n=>{this.ct(e,n,null)})}It(e,n){return this.nt.getRemoteKeysForTarget(e).has(n)}}function jS(){return new Ct(z.comparator)}function qS(){return new Ct(z.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VQ=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),UQ=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class BQ{constructor(e,n){this.databaseId=e,this.N=n}}function fd(t,e){return t.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jD(t,e){return t.N?e.toBase64():e.toUint8Array()}function jQ(t,e){return fd(t,e.toTimestamp())}function zt(t){return fe(!!t),de.fromTimestamp(function(e){const n=Bs(e);return new Tt(n.seconds,n.nanos)}(t))}function Jb(t,e){return function(n){return new Fe(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function qD(t){const e=Fe.fromString(t);return fe(XD(e)),e}function pd(t,e){return Jb(t.databaseId,e.path)}function li(t,e){const n=qD(e);if(n.get(1)!==t.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(HD(n))}function Zy(t,e){return Jb(t.databaseId,e)}function WD(t){const e=qD(t);return e.length===4?Fe.emptyPath():HD(e)}function gd(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HD(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function WS(t,e,n){return{name:pd(t,e),fields:n.value.mapValue.fields}}function KD(t,e,n){const r=li(t,e.name),i=zt(e.updateTime),s=new In({mapValue:{fields:e.fields}}),o=lt.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function qQ(t,e){return"found"in e?function(n,r){fe(!!r.found),r.found.name,r.found.updateTime;const i=li(n,r.found.name),s=zt(r.found.updateTime),o=new In({mapValue:{fields:r.found.fields}});return lt.newFoundDocument(i,s,o)}(t,e):"missing"in e?function(n,r){fe(!!r.missing),fe(!!r.readTime);const i=li(n,r.missing),s=zt(r.readTime);return lt.newNoDocument(i,s)}(t,e):te()}function WQ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,c){return l.N?(fe(c===void 0||typeof c=="string"),Lt.fromBase64String(c||"")):(fe(c===void 0||c instanceof Uint8Array),Lt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?N.UNKNOWN:VD(l.code);return new L(c,l.message||"")}(o);n=new BD(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=li(t,r.document.name),s=zt(r.document.updateTime),o=new In({mapValue:{fields:r.document.fields}}),a=lt.newFoundDocument(i,s,o),l=r.targetIds||[],c=r.removedTargetIds||[];n=new cf(l,c,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=li(t,r.document),s=r.readTime?zt(r.readTime):de.min(),o=lt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=li(t,r.document),s=r.removedTargetIds||[];n=new cf([],s,i,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new PQ(i),o=r.targetId;n=new UD(o,s)}}return n}function md(t,e){let n;if(e instanceof sh)n={update:WS(t,e.key,e.value)};else if(e instanceof oh)n={delete:pd(t,e.key)};else if(e instanceof xa)n={update:WS(t,e.key,e.data),updateMask:XQ(e.fieldMask)};else{if(!(e instanceof Xb))return te();n={verify:pd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof jl)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ra)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ia)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ql)return{fieldPath:s.field.canonicalString(),increment:o.k};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:jQ(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te()}(t,e.precondition)),n}function e_(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Nt.updateTime(zt(i.updateTime)):i.exists!==void 0?Nt.exists(i.exists):Nt.none()}(e.currentDocument):Nt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)fe(o.setToServerValue==="REQUEST_TIME"),a=new jl;else if("appendMissingElements"in o){const c=o.appendMissingElements.values||[];a=new ra(c)}else if("removeAllFromArray"in o){const c=o.removeAllFromArray.values||[];a=new ia(c)}else"increment"in o?a=new ql(s,o.increment):te();const l=Mt.fromServerFormat(o.fieldPath);return new ih(l,a)}(t,i)):[];if(e.update){e.update.name;const i=li(t,e.update.name),s=new In({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new Ul(l.map(c=>Mt.fromServerFormat(c)))}(e.updateMask);return new xa(i,s,o,n,r)}return new sh(i,s,n,r)}if(e.delete){const i=li(t,e.delete);return new oh(i,n)}if(e.verify){const i=li(t,e.verify);return new Xb(i,n)}return te()}function HQ(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?zt(r.updateTime):zt(i);return s.isEqual(de.min())&&(s=zt(i)),new RQ(s,r.transformResults||[])}(n,e))):[]}function GD(t,e){return{documents:[Zy(t,e.path)]}}function zD(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Zy(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Zy(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length===0)return;const c=l.map(u=>function(d){if(d.op==="=="){if(kS(d.value))return{unaryFilter:{field:za(d.field),op:"IS_NAN"}};if(CS(d.value))return{unaryFilter:{field:za(d.field),op:"IS_NULL"}}}else if(d.op==="!="){if(kS(d.value))return{unaryFilter:{field:za(d.field),op:"IS_NOT_NAN"}};if(CS(d.value))return{unaryFilter:{field:za(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(d.field),op:zQ(d.op),value:d.value}}}(u));return c.length===1?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:za(u.field),direction:GQ(u.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(l,c){return l.N||th(c)?c:{value:c}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function YD(t){let e=WD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){fe(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=QD(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(d){return new wl(ll(d.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(u)));let a=null;n.limit&&(a=function(u){let d;return d=typeof u=="object"?u.value:u,th(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(u){const d=!!u.before,h=u.values||[];return new qs(h,d)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const d=!u.before,h=u.values||[];return new qs(h,d)}(n.endAt)),SD(e,i,o,s,a,"F",l,c)}function KQ(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return te()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function QD(t){return t?t.unaryFilter!==void 0?[QQ(t)]:t.fieldFilter!==void 0?[YQ(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>QD(e)).reduce((e,n)=>e.concat(n)):te():[]}function GQ(t){return VQ[t]}function zQ(t){return UQ[t]}function za(t){return{fieldPath:t.canonicalString()}}function ll(t){return Mt.fromServerFormat(t.fieldPath)}function YQ(t){return fn.create(ll(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(t.fieldFilter.op),t.fieldFilter.value)}function QQ(t){switch(t.unaryFilter.op){case"IS_NAN":const e=ll(t.unaryFilter.field);return fn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=ll(t.unaryFilter.field);return fn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ll(t.unaryFilter.field);return fn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ll(t.unaryFilter.field);return fn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return te()}}function XQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=HS(e)),e=JQ(t.get(n),e);return HS(e)}function JQ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function HS(t){return t+""}function si(t){const e=t.length;if(fe(e>=2),e===2)return fe(t.charAt(0)===""&&t.charAt(1)===""),Fe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&te(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:te()}s=o+2}return new Fe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t,e){return[t,$n(e)]}function JD(t,e,n){return[t,$n(e),n]}const ZQ={},e8=["prefixPath","collectionGroup","readTime","documentId"],t8=["prefixPath","collectionGroup","documentId"],n8=["collectionGroup","readTime","prefixPath","documentId"],r8=["canonicalId","targetId"],i8=["targetId","path"],s8=["path","targetId"],o8=["collectionId","parent"],a8=["indexId","uid"],l8=["uid","sequenceNumber"],c8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],u8=["indexId","uid","orderedDocumentKey"],d8=["userId","collectionPath","documentId"],h8=["userId","collectionPath","largestBatchId"],f8=["userId","collectionGroup","largestBatchId"],ZD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],p8=[...ZD,"documentOverlays"],e1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],g8=[...e1,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class n1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new R((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof R?n:R.resolve(n)}catch(n){return R.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):R.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):R.reject(n)}static resolve(e){return new R((n,r)=>{n(e)})}static reject(e){return new R((n,r)=>{r(e)})}static waitFor(e){return new R((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=R.resolve(!1);for(const r of e)n=n.next(i=>i?R.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.At=new Gt,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{n.error?this.At.reject(new pu(e,n.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Zb(r.target.error);this.At.reject(new pu(e,i))}}static open(e,n,r,i){try{return new Jg(n,e.transaction(i,r))}catch(s){throw new pu(n,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(U("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new v8(n)}}class Lr{constructor(e,n,r){this.name=e,this.version=n,this.Pt=r,Lr.Vt(dt())===12.2&&Rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return U("SimpleDb","Removing database:",e),_o(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!zn())return!1;if(Lr.St())return!0;const e=dt(),n=Lr.Vt(e),r=0<n&&n<10,i=Lr.Dt(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static St(){var e;return typeof process!="undefined"&&((e={})===null||e===void 0?void 0:e.Ct)==="YES"}static xt(e,n){return e.store(n)}static Vt(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async Nt(e){return this.db||(U("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new pu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new L(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new L(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new pu(e,o))},i.onupgradeneeded=s=>{U("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.Pt.kt(o,i.transaction,s.oldVersion,this.version).next(()=>{U("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.Mt&&(this.db.onversionchange=n=>this.Mt(n)),this.db}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.Nt(e);const a=Jg.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.bt(),c)).catch(c=>(a.abort(c),R.reject(c))).toPromise();return l.catch(()=>{}),await a.Rt,l}catch(a){const l=a.name!=="FirebaseError"&&o<3;if(U("SimpleDb","Transaction failed with error:",a.message,"Retrying:",l),this.close(),!l)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}class m8{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return _o(this.Ft.delete())}}class pu extends L{constructor(e,n){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Pa(t){return t.name==="IndexedDbTransactionError"}class v8{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(U("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(U("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_o(r)}add(e){return U("SimpleDb","ADD",this.store.name,e,e),_o(this.store.add(e))}get(e){return _o(this.store.get(e)).next(n=>(n===void 0&&(n=null),U("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return U("SimpleDb","DELETE",this.store.name,e),_o(this.store.delete(e))}count(){return U("SimpleDb","COUNT",this.store.name),_o(this.store.count())}qt(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.Kt(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new R((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}Gt(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new R((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Qt(e,n){U("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(s,o,a)=>a.delete())}Wt(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.Kt(i,n)}zt(e){const n=this.cursor({});return new R((r,i)=>{n.onerror=s=>{const o=Zb(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}Kt(e,n){const r=[];return new R((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new m8(a),c=n(a.primaryKey,a.value,l);if(c instanceof R){const u=c.catch(d=>(l.done(),R.reject(d)));r.push(u)}l.isDone?i():l.Lt===null?a.continue():a.continue(l.Lt)}}).next(()=>R.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function _o(t){return new R((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Zb(r.target.error);n(i)}})}let GS=!1;function Zb(t){const e=Lr.Vt(dt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new L("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GS||(GS=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS extends n1{constructor(e,n){super(),this.Ht=e,this.currentSequenceNumber=n}}function on(t,e){const n=J(t);return Lr.xt(n.Ht,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&NQ(s,e,r[i])}}applyToLocalView(e){for(const n of this.baseMutations)n.key.isEqual(e.key)&&Xy(n,e,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(e.key)&&Xy(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{const r=e.get(n.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(de.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qe())}isEqual(e){return this.batchId===e.batchId&&Vl(this.mutations,e.mutations,(n,r)=>FS(n,r))&&Vl(this.baseMutations,e.baseMutations,(n,r)=>FS(n,r))}}class tI{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){fe(e.mutations.length===r.length);let i=MQ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new tI(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n,r,i,s=de.min(),o=de.min(),a=Lt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.Jt=e}}function y8(t,e){let n;if(e.document)n=KD(t.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=z.fromSegments(e.noDocument.path),i=oa(e.noDocument.readTime);n=lt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te();{const r=z.fromSegments(e.unknownDocument.path),i=oa(e.unknownDocument.version);n=lt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new Tt(r[0],r[1]);return de.fromTimestamp(i)}(e.readTime)),n}function YS(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:hp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:pd(i,s.key),fields:s.data.value.mapValue.fields,updateTime:fd(i,s.version.toTimestamp())}}(t.Jt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:sa(e.version)};else{if(!e.isUnknownDocument())return te();r.unknownDocument={path:n.path.toArray(),version:sa(e.version)}}return r}function hp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function sa(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function oa(t){const e=new Tt(t.seconds,t.nanoseconds);return de.fromTimestamp(e)}function nl(t,e){const n=(e.baseMutations||[]).map(s=>e_(t.Jt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>e_(t.Jt,s)),i=Tt.fromMillis(e.localWriteTimeMs);return new eI(e.batchId,i,n,r)}function Yc(t){const e=oa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?oa(t.lastLimboFreeSnapshotVersion):de.min();let r;var i;return t.query.documents!==void 0?(fe((i=t.query).documents.length===1),r=kr(vc(WD(i.documents[0])))):r=function(s){return kr(YD(s))}(t.query),new Cs(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Lt.fromBase64String(t.resumeToken))}function i1(t,e){const n=sa(e.snapshotVersion),r=sa(e.lastLimboFreeSnapshotVersion);let i;i=up(e.target)?GD(t.Jt,e.target):zD(t.Jt,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:na(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function rI(t){const e=YD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?CD(e,e.limit,"L"):e}function rv(t,e){return new nI(e.largestBatchId,e_(t.Jt,e.overlayMutation))}function QS(t,e){const n=e.path.lastSegment();return[t,$n(e.path.popLast()),n]}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{getBundleMetadata(e,n){return XS(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:oa(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return XS(e).put({bundleId:(r=n).id,createTime:sa(zt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return JS(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:rI(i.bundledQuery),readTime:oa(i.readTime)};var i})}saveNamedQuery(e,n){return JS(e).put(function(r){return{name:r.name,readTime:sa(zt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function XS(t){return on(t,"bundles")}function JS(t){return on(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.M=e,this.userId=n}static Yt(e,n){const r=n.uid||"";return new iI(e,r)}getOverlay(e,n){return Fc(e).get(QS(this.userId,n)).next(r=>r?rv(this.M,r):null)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new nI(n,o);i.push(this.Xt(e,a))}),R.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add($n(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Fc(e).Qt("collectionPathOverlayIndex",a))}),R.waitFor(s)}getOverlaysForCollection(e,n,r){const i=fu(),s=$n(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Fc(e).qt("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=rv(this.M,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=fu();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fc(e).Wt({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=rv(this.M,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}Xt(e,n){return Fc(e).put(function(r,i,s){const[o,a,l]=QS(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:md(r.Jt,s.mutation)}}(this.M,this.userId,n))}}function Fc(t){return on(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){}Zt(e,n){this.te(e,n),n.ee()}te(e,n){if("nullValue"in e)this.ne(n,5);else if("booleanValue"in e)this.ne(n,10),n.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(n,15),n.se(mt(e.integerValue));else if("doubleValue"in e){const r=mt(e.doubleValue);isNaN(r)?this.ne(n,13):(this.ne(n,15),ud(r)?n.se(0):n.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(n,20),typeof r=="string"?n.ie(r):(n.ie(`${r.seconds||""}`),n.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,n),this.oe(n);else if("bytesValue"in e)this.ne(n,30),n.ue(Zo(e.bytesValue)),this.oe(n);else if("referenceValue"in e)this.ae(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(n,45),n.se(r.latitude||0),n.se(r.longitude||0)}else"mapValue"in e?_D(e)?this.ne(n,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,n),this.oe(n)):"arrayValue"in e?(this.he(e.arrayValue,n),this.oe(n)):te()}re(e,n){this.ne(n,25),this.le(e,n)}le(e,n){n.ie(e)}ce(e,n){const r=e.fields||{};this.ne(n,55);for(const i of Object.keys(r))this.re(i,n),this.te(r[i],n)}he(e,n){const r=e.values||[];this.ne(n,50);for(const i of r)this.te(i,n)}ae(e,n){this.ne(n,37),z.fromName(e).path.forEach(r=>{this.ne(n,60),this.le(r,n)})}ne(e,n){e.se(n)}oe(e){e.se(2)}}wo.fe=new wo;function w8(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function ZS(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=w8(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class b8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this._e(r.value),r=n.next();this.we()}me(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.ge(r.value),r=n.next();this.ye()}pe(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=n.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=n.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const n=this.Ee(e),r=ZS(n);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Re(e){const n=this.Ee(e),r=ZS(n);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}_e(e){const n=255&e;n===0?(this.Pe(0),this.Pe(255)):n===255?(this.Pe(255),this.Pe(0)):this.Pe(n)}ge(e){const n=255&e;n===0?(this.ve(0),this.ve(255)):n===255?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class I8{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class E8{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class $c{constructor(){this.De=new b8,this.Ce=new I8(this.De),this.xe=new E8(this.De)}seed(e){this.De.seed(e)}Ne(e){return e===0?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new bo(this.indexId,this.documentKey,this.arrayValue,r)}}function lo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=eC(t.arrayValue,e.arrayValue),n!==0?n:(n=eC(t.directionalValue,e.directionalValue),n!==0?n:z.comparator(t.documentKey,e.documentKey)))}function eC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const n of e.filters){const r=n;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const n=Yy(e);if(n!==void 0&&!this.Be(n))return!1;const r=go(e);let i=0,s=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(this.Fe!==void 0){const o=r[i];if(!this.Le(this.Fe,o)||!this.Ue(this.Me[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Me.length||!this.Ue(this.Me[s++],o))return!1}return!0}Be(e){for(const n of this.Oe)if(this.Le(n,e))return!0;return!1}Le(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Ue(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(){this.qe=new sI}addToCollectionParentIndex(e,n){return this.qe.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.qe.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(qr.min())}updateCollectionGroup(e,n,r){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}}class sI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new it(Fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new it(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new Uint8Array(0);class C8{constructor(e,n){this.user=e,this.databaseId=n,this.Ke=new sI,this.Ge=new to(r=>na(r),(r,i)=>nh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Ke.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.Ke.add(n)});const s={collectionId:r,parent:$n(i)};return tC(e).put(s)}return R.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[gD(n),""],!1,!0);return tC(e).qt(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(si(o.parent))}return r})}addFieldIndex(e,n){const r=$h(e),i=function(s){return{indexId:s.indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])}}(n);return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,n){const r=$h(e),i=Vh(e),s=Vc(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Vc(e);let i=!0;const s=new Map;return R.forEach(this.Qe(n),o=>this.je(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=qe();const a=[];return R.forEach(s,(l,c)=>{var u;U("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(T=>`${T.fieldPath}:${T.kind}`).join(",")}`} to execute ${na(n)}`);const d=function(T,C){const S=Yy(C);if(S===void 0)return null;for(const A of dp(T,S.fieldPath))switch(A.op){case"array-contains-any":return A.value.arrayValue.values||[];case"array-contains":return[A.value]}return null}(c,l),h=function(T,C){const S=new Map;for(const A of go(C))for(const k of dp(T,A.fieldPath))switch(k.op){case"==":case"in":S.set(A.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return S.set(A.fieldPath.canonicalString(),k.value),Array.from(S.values())}return null}(c,l),f=function(T,C){const S=[];let A=!0;for(const k of go(C)){const P=k.kind===0?PS(T,k.fieldPath,T.startAt):OS(T,k.fieldPath,T.startAt);S.push(P.value),A&&(A=P.inclusive)}return new qs(S,A)}(c,l),p=function(T,C){const S=[];let A=!0;for(const k of go(C)){const P=k.kind===0?OS(T,k.fieldPath,T.endAt):PS(T,k.fieldPath,T.endAt);S.push(P.value),A&&(A=P.inclusive)}return new qs(S,A)}(c,l),g=this.We(l,c,f),m=this.We(l,c,p),v=this.ze(l,c,h),b=this.He(l.indexId,d,g,f.inclusive,m,p.inclusive,v);return R.forEach(b,T=>r.Gt(T,n.limit).next(C=>{C.forEach(S=>{const A=z.fromSegments(S.documentKey);o.has(A)||(o=o.add(A),a.push(A))})}))}).next(()=>a)}return R.resolve(null)})}Qe(e){let n=this.Ge.get(e);return n||(n=[e],this.Ge.set(e,n),n)}He(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let d=0;d<l;++d){const h=n?this.Je(n[d/c]):Fh,f=this.Ye(e,h,r[d%c],i),p=this.Xe(e,h,s[d%c],o),g=a.map(m=>this.Ye(e,h,m,!0));u.push(...this.createRange(f,p,g))}return u}Ye(e,n,r,i){const s=new bo(e,z.empty(),n,r);return i?s:s.ke()}Xe(e,n,r,i){const s=new bo(e,z.empty(),n,r);return i?s.ke():s}je(e,n){const r=new T8(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.$e(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;return R.forEach(this.Qe(n),i=>this.je(e,i).next(s=>{s?r!==0&&s.fields.length<function(o){let a=new it(Mt.comparator),l=!1;for(const c of o.filters){const u=c;u.field.isKeyField()||(u.op==="array-contains"||u.op==="array-contains-any"?l=!0:a=a.add(u.field))}for(const c of o.orderBy)c.field.isKeyField()||(a=a.add(c.field));return a.size+(l?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,n){const r=new $c;for(const i of go(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ne(i.kind);wo.fe.Zt(s,o)}return r.Se()}Je(e){const n=new $c;return wo.fe.Zt(e,n.Ne(0)),n.Se()}tn(e,n){const r=new $c;return wo.fe.Zt(ta(this.databaseId,n),r.Ne(function(i){const s=go(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Se()}ze(e,n,r){if(r===null)return[];let i=[];i.push(new $c);let s=0;for(const o of go(e)){const a=r[s++];for(const l of i)if(this.en(n,o.fieldPath)&&hd(a))i=this.nn(i,o,a);else{const c=l.Ne(o.kind);wo.fe.Zt(a,c)}}return this.sn(i)}We(e,n,r){return this.ze(e,n,r.position)}sn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Se();return n}nn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new $c;l.seed(a.Se()),wo.fe.Zt(o,l.Ne(n.kind)),s.push(l)}return s}en(e,n){return!!e.filters.find(r=>r instanceof fn&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=$h(e),i=Vh(e);return(n?r.qt("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.qt()).next(s=>{const o=[];return R.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,u){const d=u?new cp(u.sequenceNumber,new qr(oa(u.readTime),new z(si(u.documentKey)),u.largestBatchId)):cp.empty(),h=c.fields.map(([f,p])=>new hQ(Mt.fromServerFormat(f),p));return new bD(c.indexId,c.collectionGroup,h,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ve(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=$h(e),s=Vh(e);return this.rn(e).next(o=>i.qt("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>R.forEach(a,l=>s.put(function(c,u,d,h){return{indexId:c,uid:u.uid||"",sequenceNumber:d,readTime:sa(h.readTime),documentKey:$n(h.documentKey.path),largestBatchId:h.largestBatchId}}(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return R.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?R.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),R.forEach(a,l=>this.on(e,i,l).next(c=>{const u=this.un(s,l);return c.isEqual(u)?R.resolve():this.an(e,s,l,c,u)}))))})}cn(e,n,r,i){return Vc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,n.key),documentKey:n.key.path.toArray()})}hn(e,n,r,i){return Vc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,n.key),n.key.path.toArray()])}on(e,n,r){const i=Vc(e);let s=new it(lo);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,n)])},(o,a)=>{s=s.add(new bo(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}un(e,n){let r=new it(lo);const i=this.Ze(n,e);if(i==null)return r;const s=Yy(n);if(s!=null){const o=e.data.field(s.fieldPath);if(hd(o))for(const a of o.arrayValue.values||[])r=r.add(new bo(n.indexId,e.key,this.Je(a),i))}else r=r.add(new bo(n.indexId,e.key,Fh,i));return r}an(e,n,r,i,s){U("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,c,u,d){const h=a.getIterator(),f=l.getIterator();let p=Ga(h),g=Ga(f);for(;p||g;){let m=!1,v=!1;if(p&&g){const b=c(p,g);b<0?v=!0:b>0&&(m=!0)}else p!=null?v=!0:m=!0;m?(u(g),g=Ga(f)):v?(d(p),p=Ga(h)):(p=Ga(h),g=Ga(f))}}(i,s,lo,a=>{o.push(this.cn(e,n,r,a))},a=>{o.push(this.hn(e,n,r,a))}),R.waitFor(o)}rn(e){let n=1;return Vh(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>lo(o,a)).filter((o,a,l)=>!a||lo(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=lo(o,e),l=lo(o,n);if(a===0)i[0]=e.ke();else if(a>0&&l<0)i.push(o),i.push(o.ke());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2)s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Fh,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Fh,[]]));return s}getMinOffset(e,n){let r;return R.forEach(this.Qe(n),i=>this.je(e,i).next(s=>{s?(!r||ED(s.indexState.offset,r)<0)&&(r=s.indexState.offset):r=qr.min()})).next(()=>r)}}function tC(t){return on(t,"collectionParents")}function Vc(t){return on(t,"indexEntries")}function $h(t){return on(t,"indexConfiguration")}function Vh(t){return on(t,"indexState")}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new qn(e,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Wt({range:o},(u,d,h)=>(a++,h.delete()));s.push(l.next(()=>{fe(a===1)}));const c=[];for(const u of n.mutations){const d=JD(e,u.key.path,n.batchId);s.push(i.delete(d)),c.push(u.key)}return R.waitFor(s).next(()=>c)}function fp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn.DEFAULT_COLLECTION_PERCENTILE=10,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qn.DEFAULT=new qn(41943040,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qn.DISABLED=new qn(-1,0,0);class oI{constructor(e,n,r,i){this.userId=e,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,n,r,i){fe(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new oI(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ls(e).Wt({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=rl(e),o=ls(e);return o.add({}).next(a=>{fe(typeof a=="number");const l=new eI(a,n,r,i),c=function(h,f,p){const g=p.baseMutations.map(v=>md(h.Jt,v)),m=p.mutations.map(v=>md(h.Jt,v));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:m}}(this.M,this.userId,l),u=[];let d=new it((h,f)=>ve(h.canonicalString(),f.canonicalString()));for(const h of i){const f=JD(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,ZQ))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.ln[a]=l.keys()}),R.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return ls(e).get(n).next(r=>r?(fe(r.userId===this.userId),nl(this.M,r)):null)}fn(e,n){return this.ln[n]?R.resolve(this.ln[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.ln[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ls(e).Wt({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(fe(a.batchId>=r),s=nl(this.M,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ls(e).Wt({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ls(e).qt("userMutationsIndex",n).next(r=>r.map(i=>nl(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=uf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return rl(e).Wt({range:i},(o,a,l)=>{const[c,u,d]=o,h=si(u);if(c===this.userId&&n.path.isEqual(h))return ls(e).get(d).next(f=>{if(!f)throw te();fe(f.userId===this.userId),s.push(nl(this.M,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(ve);const i=[];return n.forEach(s=>{const o=uf(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=rl(e).Wt({range:a},(c,u,d)=>{const[h,f,p]=c,g=si(f);h===this.userId&&s.path.isEqual(g)?r=r.add(p):d.done()});i.push(l)}),R.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=uf(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new it(ve);return rl(e).Wt({range:o},(l,c,u)=>{const[d,h,f]=l,p=si(h);d===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):u.done()}).next(()=>this.dn(e,a))}dn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ls(e).get(s).next(o=>{if(o===null)throw te();fe(o.userId===this.userId),r.push(nl(this.M,o))}))}),R.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return s1(e.Ht,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this._n(n.batchId)}),R.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return R.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return rl(e).Wt({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=si(s[1]);i.push(l)}else a.done()}).next(()=>{fe(i.length===0)})})}containsKey(e,n){return o1(e,this.userId,n)}wn(e){return a1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function o1(t,e,n){const r=uf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return rl(t).Wt({range:s,jt:!0},(a,l,c)=>{const[u,d,h]=a;u===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function ls(t){return on(t,"mutations")}function rl(t){return on(t,"documentMutations")}function a1(t){return on(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new aa(0)}static yn(){return new aa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(e,n){this.referenceDelegate=e,this.M=n}allocateTargetId(e){return this.pn(e).next(n=>{const r=new aa(n.highestTargetId);return n.highestTargetId=r.next(),this.In(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(n=>de.fromTimestamp(new Tt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.In(e,i)))}addTargetData(e,n){return this.Tn(e,n).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(n,r),this.In(e,r))))}updateTargetData(e,n){return this.Tn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ya(e).delete(n.targetId)).next(()=>this.pn(e)).next(r=>(fe(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ya(e).Wt((o,a)=>{const l=Yc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>R.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ya(e).Wt((r,i)=>{const s=Yc(i);n(s)})}pn(e){return rC(e).get("targetGlobalKey").next(n=>(fe(n!==null),n))}In(e,n){return rC(e).put("targetGlobalKey",n)}Tn(e,n){return Ya(e).put(i1(this.M,n))}En(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=na(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ya(e).Wt({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Yc(a);nh(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=ms(e);return n.forEach(o=>{const a=$n(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),R.waitFor(i)}removeMatchingKeys(e,n,r){const i=ms(e);return R.forEach(n,s=>{const o=$n(s.path);return R.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=ms(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ms(e);let s=qe();return i.Wt({range:r,jt:!0},(o,a,l)=>{const c=si(o[1]),u=new z(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){const r=$n(n.path),i=IDBKeyRange.bound([r],[gD(r)],!1,!0);let s=0;return ms(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}Et(e,n){return Ya(e).get(n).next(r=>r?Yc(r):null)}}function Ya(t){return on(t,"targets")}function rC(t){return on(t,"targetGlobal")}function ms(t){return on(t,"targetDocuments")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==t1)throw t;U("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC([t,e],[n,r]){const i=ve(t,n);return i===0?ve(e,r):i}class A8{constructor(e){this.An=e,this.buffer=new it(iC),this.Rn=0}bn(){return++this.Rn}Pn(e){const n=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();iC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class R8{constructor(e,n){this.garbageCollector=e,this.asyncQueue=n,this.Vn=!1,this.vn=null}start(e){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return this.vn!==null}Sn(e){const n=this.Vn?3e5:6e4;U("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,async()=>{this.vn=null,this.Vn=!0;try{await e.collectGarbage(this.garbageCollector)}catch(r){Pa(r)?U("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Oa(r)}await this.Sn(e)})}}class N8{constructor(e,n){this.Dn=e,this.params=n}calculateTargetCount(e,n){return this.Dn.Cn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return R.resolve(sr.A);const r=new A8(n);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Dn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Dn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(nC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nC):this.Nn(e,n))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Ky()<=Te.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new N8(r,i)}(this,n)}Cn(e){const n=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}kn(e){let n=0;return this.xn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}xn(e,n){return this.Mn(e,(r,i)=>n(i))}addReference(e,n,r){return Uh(e,r)}removeReference(e,n,r){return Uh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Uh(e,n)}On(e,n){return function(r,i){let s=!1;return a1(r).zt(o=>o1(r,o,i).next(a=>(a&&(s=!0),R.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Mn(e,(o,a)=>{if(a<=n){const l=this.On(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,de.min()),ms(e).delete([0,$n(o.path)])))});i.push(l)}}).next(()=>R.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Uh(e,n)}Mn(e,n){const r=ms(e);let i,s=sr.A;return r.Wt({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==sr.A&&n(new z(si(i)),s),s=c,i=l):s=sr.A}).next(()=>{s!==sr.A&&n(new z(si(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Uh(t,e){return ms(t).put(function(n,r){return{targetId:0,path:$n(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.changes=new to(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return co(e).put(r)}removeEntry(e,n,r){return co(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],hp(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Fn(e,r)))}getEntry(e,n){let r=lt.newInvalidDocument(n);return co(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Uc(n))},(i,s)=>{r=this.$n(n,s)}).next(()=>r)}Bn(e,n){let r={size:0,document:lt.newInvalidDocument(n)};return co(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Uc(n))},(i,s)=>{r={document:this.$n(n,s),size:fp(s)}}).next(()=>r)}getEntries(e,n){let r=vr();return this.Ln(e,n,(i,s)=>{const o=this.$n(i,s);r=r.insert(i,o)}).next(()=>r)}Un(e,n){let r=vr(),i=new Ct(z.comparator);return this.Ln(e,n,(s,o)=>{const a=this.$n(s,o);r=r.insert(s,a),i=i.insert(s,fp(o))}).next(()=>({documents:r,qn:i}))}Ln(e,n,r){if(n.isEmpty())return R.resolve();let i=new it(aC);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Uc(i.first()),Uc(i.last())),o=i.getIterator();let a=o.getNext();return co(e).Wt({index:"documentKeyIndex",range:s},(l,c,u)=>{const d=z.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&aC(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.Ut(Uc(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,n,r){const i=[n.popLast().toArray(),n.lastSegment(),hp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return co(e).qt(IDBKeyRange.bound(i,s,!0)).next(o=>{let a=vr();for(const l of o){const c=this.$n(z.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(c.key,c)}return a})}getAllFromCollectionGroup(e,n,r,i){let s=vr();const o=oC(n,r),a=oC(n,qr.max());return co(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.$n(z.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new O8(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return sC(e).get("remoteDocumentGlobalKey").next(n=>(fe(!!n),n))}Fn(e,n){return sC(e).put("remoteDocumentGlobalKey",n)}$n(e,n){if(n){const r=y8(this.M,n);if(!(r.isNoDocument()&&r.version.isEqual(de.min())))return r}return lt.newInvalidDocument(e)}}class O8 extends l1{constructor(e,n){super(),this.Kn=e,this.trackRemovals=n,this.Gn=new to(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new it((s,o)=>ve(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Gn.get(s);if(n.push(this.Kn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=YS(this.Kn.M,o);i=i.add(s.path.popLast()),r+=fp(l)-a.size,n.push(this.Kn.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=YS(this.Kn.M,o.convertToNoDocument(de.min()));n.push(this.Kn.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Kn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Kn.updateMetadata(e,r)),R.waitFor(n)}getFromCache(e,n){return this.Kn.Bn(e,n).next(r=>(this.Gn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Kn.Un(e,n).next(({documents:r,qn:i})=>(i.forEach((s,o)=>{this.Gn.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function sC(t){return on(t,"remoteDocumentGlobal")}function co(t){return on(t,"remoteDocumentsV14")}function Uc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oC(t,e){const n=e.documentKey.path.toArray();return[t,hp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function aC(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ve(n[s],r[s]),i)return i;return i=ve(n.length,r.length),i||(i=ve(n[n.length-2],r[r.length-2]),i||ve(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e){this.M=e}kt(e,n,r,i){const s=new Jg("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KS,{unique:!0}),a.createObjectStore("documentMutations")}(e),lC(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=R.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),lC(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:de.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").qt().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KS,{unique:!0});const u=l.store("mutations"),d=c.map(h=>u.put(h));return R.waitFor(d)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Qn(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.jn(s)))),r<7&&i>=7&&(o=o.next(()=>this.Wn(s))),r<8&&i>=8&&(o=o.next(()=>this.zn(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Hn(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:d8});l.createIndex("collectionPathOverlayIndex",h8,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",f8,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:e8});l.createIndex("documentKeyIndex",t8),l.createIndex("collectionGroupIndex",n8)}(e)).next(()=>this.Jn(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>{(function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:a8}).createIndex("sequenceNumberIndex",l8,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:c8}).createIndex("documentKeyIndex",u8,{unique:!1})})(e)})),o}jn(e){let n=0;return e.store("remoteDocuments").Wt((r,i)=>{n+=fp(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next(i=>R.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",o).next(a=>R.forEach(a,l=>{fe(l.userId===s.userId);const c=nl(this.M,l);return s1(e,s.userId,c).next(()=>{})}))}))}Wn(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Wt((o,a)=>{const l=new Fe(o),c=function(u){return[0,$n(u)]}(l);s.push(n.get(c).next(u=>u?R.resolve():(d=>n.put({targetId:0,path:$n(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>R.waitFor(s))})}zn(e,n){e.createObjectStore("collectionParents",{keyPath:o8});const r=n.store("collectionParents"),i=new sI,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:$n(l)})}};return n.store("remoteDocuments").Wt({jt:!0},(o,a)=>{const l=new Fe(o);return s(l.popLast())}).next(()=>n.store("documentMutations").Wt({jt:!0},([o,a,l],c)=>{const u=si(a);return s(u.popLast())}))}Hn(e){const n=e.store("targets");return n.Wt((r,i)=>{const s=Yc(i),o=i1(this.M,s);return n.put(o)})}Jn(e,n){const r=n.store("remoteDocuments"),i=[];return r.Wt((s,o)=>{const a=n.store("remoteDocumentsV14"),l=(c=o,c.document?new z(Fe.fromString(c.document.name).popFirst(5)):c.noDocument?z.fromSegments(c.noDocument.path):c.unknownDocument?z.fromSegments(c.unknownDocument.path):te()).path.toArray();var c;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>R.waitFor(i))}}function lC(t){t.createObjectStore("targetDocuments",{keyPath:i8}).createIndex("documentTargetsIndex",s8,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",r8,{unique:!0}),t.createObjectStore("targetGlobal")}const iv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class aI{constructor(e,n,r,i,s,o,a,l,c,u,d=13){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Yn=s,this.window=o,this.document=a,this.Xn=c,this.Zn=u,this.ts=d,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=h=>Promise.resolve(),!aI.vt())throw new L(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new x8(this,i),this.hs=n+"main",this.M=new r1(l),this.ls=new Lr(this.hs,this.ts,new D8(this.M)),this.fs=new k8(this.referenceDelegate,this.M),this.ds=function(h){return new P8(h)}(this.M),this._s=new _8,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,u===!1&&Rt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new L(N.FAILED_PRECONDITION,iv);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new sr(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){return this.cs=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(async()=>{this.started&&await this.gs()}))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(n=>{n||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(n=>this.isPrimary&&!n?this.Rs(e).next(()=>!1):!!n&&this.bs(e).next(()=>!0))).catch(e=>{if(Pa(e))return U("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return U("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Bc(e).get("owner").next(n=>R.resolve(this.Ps(n)))}Vs(e){return Bh(e).delete(this.clientId)}async vs(){if(this.isPrimary&&!this.Ss(this.us,18e5)){this.us=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=on(n,"clientMetadata");return r.qt().next(i=>{const s=this.Ds(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return R.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.ws)for(const n of e)this.ws.removeItem(this.Cs(n.clientId))}}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?R.resolve(!0):Bc(e).get("owner").next(n=>{if(n!==null&&this.Ss(n.leaseTimestampMs,5e3)&&!this.xs(n.ownerId)){if(this.Ps(n)&&this.networkEnabled)return!0;if(!this.Ps(n)){if(!n.allowTabSynchronization)throw new L(N.FAILED_PRECONDITION,iv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bh(e).qt().next(r=>this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&U("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),await this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new zS(e,sr.A);return this.Rs(n).next(()=>this.Vs(n))}),this.ls.close(),this.Os()}Ds(e,n){return e.filter(r=>this.Ss(r.updateTimeMs,n)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Bh(e).qt().next(n=>this.Ds(n,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,n){return oI.Yt(e,this.M,n,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new C8(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return iI.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,n,r){U("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.ts)===14?g8:o===13?e1:o===12?p8:o===11?ZD:void te();var o;let a;return this.ls.runTransaction(e,i,s,l=>(a=new zS(l,this.es?this.es.next():sr.A),n==="readwrite-primary"?this.Es(a).next(c=>!!c||this.As(a)).next(c=>{if(!c)throw Rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new L(N.FAILED_PRECONDITION,t1);return r(a)}).next(c=>this.bs(a).next(()=>c)):this.$s(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}$s(e){return Bc(e).get("owner").next(n=>{if(n!==null&&this.Ss(n.leaseTimestampMs,5e3)&&!this.xs(n.ownerId)&&!this.Ps(n)&&!(this.Zn||this.allowTabSynchronization&&n.allowTabSynchronization))throw new L(N.FAILED_PRECONDITION,iv)})}bs(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bc(e).put("owner",n)}static vt(){return Lr.vt()}Rs(e){const n=Bc(e);return n.get("owner").next(r=>this.Ps(r)?(U("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):R.resolve())}Ss(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Rt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ys(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground=this.document.visibilityState==="visible")}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ss=()=>{this.Ns(),rj()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var n;try{const r=((n=this.ws)===null||n===void 0?void 0:n.getItem(this.Cs(e)))!==null;return U("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Rt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Rt("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch{}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bc(t){return on(t,"owner")}function Bh(t){return on(t,"clientMetadata")}function lI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,n,r){this.ds=e,this.Bs=n,this.indexManager=r}Ls(e,n){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,n).next(r=>this.Us(e,n,r))}Us(e,n,r){return this.ds.getEntry(e,n).next(i=>{for(const s of r)s.applyToLocalView(i);return i})}qs(e,n){e.forEach((r,i)=>{for(const s of n)s.applyToLocalView(i)})}Ks(e,n){return this.ds.getEntries(e,n).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,n){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>this.qs(n,r))}Qs(e,n,r){return function(i){return z.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.js(e,n.path):Yb(n)?this.Ws(e,n,r):this.zs(e,n,r)}js(e,n){return this.Ls(e,new z(n)).next(r=>{let i=Jy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,n,r){const i=n.collectionGroup;let s=Jy();return this.indexManager.getCollectionParents(e,i).next(o=>R.forEach(o,a=>{const l=function(c,u){return new ns(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(i));return this.zs(e,l,r).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}zs(e,n,r){let i;return this.ds.getAllFromCollection(e,n.path,r).next(s=>(i=s,this.Bs.getAllMutationBatchesAffectingQuery(e,n))).next(s=>{for(const o of s)for(const a of o.mutations){const l=a.key;let c=i.get(l);c==null&&(c=lt.newInvalidDocument(l),i=i.insert(l,c)),Xy(a,c,o.localWriteTime),c.isFoundDocument()||(i=i.remove(l))}}).next(()=>(i.forEach((s,o)=>{Qb(n,o)||(i=i.remove(s))}),i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Hs=r,this.Js=i}static Ys(e,n){let r=qe(),i=qe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cI(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.Xs=!1}initialize(e,n){this.Zs=e,this.indexManager=n,this.Xs=!0}Qs(e,n,r,i){return this.ti(e,n).next(s=>s||this.ei(e,n,i,r)).next(s=>s||this.ni(e,n))}ti(e,n){return R.resolve(null)}ei(e,n,r,i){return TQ(n)||i.isEqual(de.min())?this.ni(e,n):this.Zs.Ks(e,r).next(s=>{const o=this.si(n,s);return this.ii(n,o,r,i)?this.ni(e,n):(Ky()<=Te.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qy(n)),this.ri(e,o,n,ID(i,-1)))})}si(e,n){let r=new it(RD(e));return n.forEach((i,s)=>{Qb(e,s)&&(r=r.add(s))}),r}ii(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ni(e,n){return Ky()<=Te.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Qy(n)),this.Zs.Qs(e,n,qr.min())}ri(e,n,r,i){return this.Zs.Qs(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,n,r,i){this.persistence=e,this.oi=n,this.M=i,this.ui=new Ct(ve),this.ai=new to(s=>na(s),nh),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new M8(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ui))}}function u1(t,e,n,r){return new L8(t,e,n,r)}async function d1(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.Bs.getAllMutationBatches(r).next(s=>(i=s,n.li(e),n.Bs.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=qe();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.fi.Ks(r,l).next(c=>({di:c,removedBatchIds:o,addedBatchIds:a}))})})}function F8(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,d=u.keys();let h=R.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const g=l.docVersions.get(f);fe(g!==null),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>o.Bs.removeMutationBatch(a,u))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.Bs.performConsistencyCheck(r)).next(()=>n.fi.Ks(r,i))})}function h1(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.fs.getLastRemoteSnapshotVersion(n))}function $8(t,e){const n=J(t),r=e.snapshotVersion;let i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;const a=[];e.targetChanges.forEach((c,u)=>{const d=i.get(u);if(!d)return;a.push(n.fs.removeMatchingKeys(s,c.removedDocuments,u).next(()=>n.fs.addMatchingKeys(s,c.addedDocuments,u)));let h=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(u)?h=h.withResumeToken(Lt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(u,h),function(f,p,g){return f.resumeToken.approximateByteSize()===0||p.snapshotVersion.toMicroseconds()-f.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(d,h,c)&&a.push(n.fs.updateTargetData(s,h))});let l=vr();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(f1(s,o,e.documentUpdates).next(c=>{l=c})),!r.isEqual(de.min())){const c=n.fs.getLastRemoteSnapshotVersion(s).next(u=>n.fs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return R.waitFor(a).next(()=>o.apply(s)).next(()=>n.fi.Gs(s,l)).next(()=>l)}).then(s=>(n.ui=i,s))}function f1(t,e,n){let r=qe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let s=vr();return n.forEach((o,a)=>{const l=i.get(o);a.isNoDocument()&&a.version.isEqual(de.min())?(e.removeEntry(o,a.readTime),s=s.insert(o,a)):!l.isValidDocument()||a.version.compareTo(l.version)>0||a.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(a),s=s.insert(o,a)):U("LocalStore","Ignoring outdated watch update for ",o,". Current version:",l.version," Watch version:",a.version)}),s})}function V8(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Wl(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.fs.getTargetData(r,e).next(s=>s?(i=s,R.resolve(i)):n.fs.allocateTargetId(r).next(o=>(i=new Cs(e,o,0,r.currentSequenceNumber),n.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ui.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ui=n.ui.insert(r.targetId,r),n.ai.set(e,r.targetId)),r})}async function Hl(t,e,n){const r=J(t),i=r.ui.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Pa(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}function pp(t,e,n){const r=J(t);let i=de.min(),s=qe();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=J(a),d=u.ai.get(c);return d!==void 0?R.resolve(u.ui.get(d)):u.fs.getTargetData(l,c)}(r,o,kr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.oi.Qs(o,e,n?i:de.min(),n?s:qe())).next(a=>(m1(r,AD(e),a),{documents:a,_i:s})))}function p1(t,e){const n=J(t),r=J(n.fs),i=n.ui.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.Et(s,e).next(o=>o?o.target:null))}function g1(t,e){const n=J(t),r=n.ci.get(e)||de.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.hi.getAllFromCollectionGroup(i,e,ID(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(m1(n,e,i),i))}function m1(t,e,n){let r=de.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ci.set(e,r)}async function U8(t,e,n,r){const i=J(t);let s=qe(),o=vr();for(const c of n){const u=e.wi(c.metadata.name);c.document&&(s=s.add(u));const d=e.mi(c);d.setReadTime(e.gi(c.metadata.readTime)),o=o.insert(u,d)}const a=i.hi.newChangeBuffer({trackRemovals:!0}),l=await Wl(i,function(c){return kr(vc(Fe.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>f1(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.fs.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.fs.addMatchingKeys(c,s,l.targetId)).next(()=>i.fi.Gs(c,u)).next(()=>u)))}async function B8(t,e,n=qe()){const r=await Wl(t,kr(rI(e.bundledQuery))),i=J(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=zt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i._s.saveNamedQuery(s,e);const a=r.withResumeToken(Lt.EMPTY_BYTE_STRING,o);return i.ui=i.ui.insert(a.targetId,a),i.fs.updateTargetData(s,a).next(()=>i.fs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.fs.addMatchingKeys(s,n,r.targetId)).next(()=>i._s.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,n){return R.resolve(this.yi.get(n))}saveBundleMetadata(e,n){var r;return this.yi.set(n.id,{id:(r=n).id,version:r.version,createTime:zt(r.createTime)}),R.resolve()}getNamedQuery(e,n){return R.resolve(this.pi.get(n))}saveNamedQuery(e,n){return this.pi.set(n.name,function(r){return{name:r.name,query:rI(r.bundledQuery),readTime:zt(r.readTime)}}(n)),R.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(){this.overlays=new Ct(z.comparator),this.Ii=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Xt(e,n,s)}),R.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ii.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(r)),R.resolve()}getOverlaysForCollection(e,n,r){const i=fu(),s=n.length+1,o=new z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return R.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ct((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=fu(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=fu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return R.resolve(a)}Xt(e,n,r){if(r===null)return;const i=this.overlays.get(r.key);if(i!==null){const o=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nI(n,r));let s=this.Ii.get(n);s===void 0&&(s=qe(),this.Ii.set(n,s)),this.Ii.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.Ti=new it(Ut.Ei),this.Ai=new it(Ut.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,n){const r=new Ut(e,n);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Pi(new Ut(e,n))}Vi(e,n){e.forEach(r=>this.removeReference(r,n))}vi(e){const n=new z(new Fe([])),r=new Ut(n,e),i=new Ut(n,e+1),s=[];return this.Ai.forEachInRange([r,i],o=>{this.Pi(o),s.push(o.key)}),s}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const n=new z(new Fe([])),r=new Ut(n,e),i=new Ut(n,e+1);let s=qe();return this.Ai.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ut(e,0),r=this.Ti.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ut{constructor(e,n){this.key=e,this.Ci=n}static Ei(e,n){return z.comparator(e.key,n.key)||ve(e.Ci,n.Ci)}static Ri(e,n){return ve(e.Ci,n.Ci)||z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new it(Ut.Ei)}checkEmpty(e){return R.resolve(this.Bs.length===0)}addMutationBatch(e,n,r,i){const s=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];const o=new eI(s,n,r,i);this.Bs.push(o);for(const a of i)this.Ni=this.Ni.add(new Ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(e,n){return R.resolve(this.ki(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Mi(r),s=i<0?0:i;return R.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.Bs.length===0?-1:this.xi-1)}getAllMutationBatches(e){return R.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ut(n,0),i=new Ut(n,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([r,i],o=>{const a=this.ki(o.Ci);s.push(a)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(ve);return n.forEach(i=>{const s=new Ut(i,0),o=new Ut(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,o],a=>{r=r.add(a.Ci)})}),R.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;z.isDocumentKey(s)||(s=s.child(""));const o=new Ut(new z(s),0);let a=new it(ve);return this.Ni.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Ci)),!0)},o),R.resolve(this.Oi(a))}Oi(e){const n=[];return e.forEach(r=>{const i=this.ki(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){fe(this.Fi(n.batchId,"removed")===0),this.Bs.shift();let r=this.Ni;return R.forEach(n.mutations,i=>{const s=new Ut(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,n){const r=new Ut(n,0),i=this.Ni.firstAfterOrEqual(r);return R.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.Bs.length,R.resolve()}Fi(e,n){return this.Mi(e)}Mi(e){return this.Bs.length===0?0:e-this.Bs[0].batchId}ki(e){const n=this.Mi(e);return n<0||n>=this.Bs.length?null:this.Bs[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e){this.$i=e,this.docs=new Ct(z.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.$i(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():lt.newInvalidDocument(n))}getEntries(e,n){let r=vr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():lt.newInvalidDocument(i))}),R.resolve(r)}getAllFromCollection(e,n,r){let i=vr();const s=new z(n.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||ED(fQ(l),r)<=0||(i=i.insert(l.key,l.mutableCopy()))}return R.resolve(i)}getAllFromCollectionGroup(e,n,r,i){te()}Bi(e,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new K8(this)}getSize(e){return R.resolve(this.size)}}class K8 extends l1{constructor(e){super(),this.Kn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),R.waitFor(n)}getFromCache(e,n){return this.Kn.getEntry(e,n)}getAllFromCache(e,n){return this.Kn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e){this.persistence=e,this.Li=new to(n=>na(n),nh),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Ui=0,this.qi=new uI,this.targetCount=0,this.Ki=aa.gn()}forEachTarget(e,n){return this.Li.forEach((r,i)=>n(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ui&&(this.Ui=n),R.resolve()}Tn(e){this.Li.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ki=new aa(n),this.highestTargetId=n),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,n){return this.Tn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.Tn(n),R.resolve()}removeTargetData(e,n){return this.Li.delete(n.target),this.qi.vi(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Li.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Li.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),R.waitFor(s).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){const r=this.Li.get(n)||null;return R.resolve(r)}addMatchingKeys(e,n,r){return this.qi.bi(n,r),R.resolve()}removeMatchingKeys(e,n,r){this.qi.Vi(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qi.vi(n),R.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qi.Di(n);return R.resolve(r)}containsKey(e,n){return R.resolve(this.qi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e,n){this.Gi={},this.overlays={},this.es=new sr(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new G8(this),this.indexManager=new S8,this.ds=function(r){return new H8(r)}(r=>this.referenceDelegate.Qi(r)),this.M=new r1(n),this._s=new j8(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new q8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Gi[e.toKey()];return r||(r=new W8(n,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);const i=new Y8(this.es.next());return this.referenceDelegate.ji(),r(i).next(s=>this.referenceDelegate.Wi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zi(e,n){return R.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,n)))}}class Y8 extends n1{constructor(e){super(),this.currentSequenceNumber=e}}class dI{constructor(e){this.persistence=e,this.Hi=new uI,this.Ji=null}static Yi(e){return new dI(e)}get Xi(){if(this.Ji)return this.Ji;throw te()}addReference(e,n,r){return this.Hi.addReference(r,n),this.Xi.delete(r.toString()),R.resolve()}removeReference(e,n,r){return this.Hi.removeReference(r,n),this.Xi.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Xi.add(n.toString()),R.resolve()}removeTarget(e,n){this.Hi.vi(n.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}ji(){this.Ji=new Set}Wi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xi,r=>{const i=z.fromPath(r);return this.Zi(e,i).next(s=>{s||n.removeEntry(i,de.min())})}).next(()=>(this.Ji=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zi(e,n).next(r=>{r?this.Xi.delete(n.toString()):this.Xi.add(n.toString())})}Qi(e){return 0}Zi(e,n){return R.or([()=>R.resolve(this.Hi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zi(e,n)])}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t,e){return`firestore_clients_${t}_${e}`}function uC(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function sv(t,e){return`firestore_targets_${t}_${e}`}class gp{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static tr(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new L(i.error.code,i.error.message))),o?new gp(e,n,i.state,s):(Rt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static tr(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new L(r.error.code,r.error.message))),s?new gu(e,r.state,i):(Rt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static tr(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Xg();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=yD(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new mp(e,s):(Rt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class hI{constructor(e,n){this.clientId=e,this.onlineState=n}static tr(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new hI(n.clientId,n.onlineState):(Rt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class t_{constructor(){this.activeTargetIds=Xg()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ov{constructor(e,n,r,i,s){this.window=e,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Ct(ve),this.started=!1,this.cr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=cC(this.persistenceKey,this.ir),this.lr=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new t_),this.dr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.mr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.gr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Fs();for(const r of e){if(r===this.ir)continue;const i=this.getItem(cC(this.persistenceKey,r));if(i){const s=mp.tr(r,i);s&&(this.ar=this.ar.insert(s.clientId,s))}}this.yr();const n=this.storage.getItem(this.mr);if(n){const r=this.pr(n);r&&this.Ir(r)}for(const r of this.cr)this.ur(r);this.cr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let n=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,n,r){this.Er(e,n,r),this.Ar(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(sv(this.persistenceKey,e));if(r){const i=gu.tr(e,r);i&&(n=i.state)}}return this.Rr.nr(e),this.yr(),n}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sv(this.persistenceKey,e))}updateQueryState(e,n,r){this.br(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return U("SharedClientState","READ",e,n),n}setItem(e,n){U("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){U("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){const n=e;if(n.storageArea===this.storage){if(U("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void Rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.dr.test(n.key)){if(n.newValue==null){const r=this.vr(n.key);return this.Sr(r,null)}{const r=this.Dr(n.key,n.newValue);if(r)return this.Sr(r.clientId,r)}}else if(this._r.test(n.key)){if(n.newValue!==null){const r=this.Cr(n.key,n.newValue);if(r)return this.Nr(r)}}else if(this.wr.test(n.key)){if(n.newValue!==null){const r=this.kr(n.key,n.newValue);if(r)return this.Mr(r)}}else if(n.key===this.mr){if(n.newValue!==null){const r=this.pr(n.newValue);if(r)return this.Ir(r)}}else if(n.key===this.lr){const r=function(i){let s=sr.A;if(i!=null)try{const o=JSON.parse(i);fe(typeof o=="number"),s=o}catch(o){Rt("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==sr.A&&this.sequenceNumberHandler(r)}else if(n.key===this.gr){const r=this.Or(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Fr(i)))}}}else this.cr.push(n)})}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,n,r){const i=new gp(this.currentUser,e,n,r),s=uC(this.persistenceKey,this.currentUser,e);this.setItem(s,i.er())}Ar(e){const n=uC(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Pr(e){const n={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(n))}br(e,n,r){const i=sv(this.persistenceKey,e),s=new gu(e,n,r);this.setItem(i,s.er())}Vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.gr,n)}vr(e){const n=this.dr.exec(e);return n?n[1]:null}Dr(e,n){const r=this.vr(e);return mp.tr(r,n)}Cr(e,n){const r=this._r.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return gp.tr(new dn(s),i,n)}kr(e,n){const r=this.wr.exec(e),i=Number(r[1]);return gu.tr(i,n)}pr(e){return hI.tr(e)}Or(e){return JSON.parse(e)}async Nr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.$r(e.batchId,e.state,e.error);U("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,n){const r=n?this.ar.insert(e,n):this.ar.remove(e),i=this.Tr(this.ar),s=this.Tr(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Lr(o,a).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let n=Xg();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class v1{constructor(){this.Ur=new t_,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,n,r){this.qr[e]=n}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new t_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{Kr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.uo=n+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,n,r,i,s){const o=this.ho(e,n);U("RestConnection","Sending: ",o,r);const a={};return this.lo(a,i,s),this.fo(e,o,a,r).then(l=>(U("RestConnection","Received: ",l),l),l=>{throw ad("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}_o(e,n,r,i,s){return this.co(e,n,r,i,s)}lo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+mc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,n){const r=X8[e];return`${this.uo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,r,i){return new Promise((s,o)=>{const a=new Y5;a.listenOnce(K5.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case nv.NO_ERROR:const c=a.getResponseJson();U("Connection","XHR received:",JSON.stringify(c)),s(c);break;case nv.TIMEOUT:U("Connection",'RPC "'+e+'" timed out'),o(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case nv.HTTP_ERROR:const u=a.getStatus();if(U("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const d=a.getResponseJson().error;if(d&&d.status&&d.message){const h=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(p)>=0?p:N.UNKNOWN}(d.status);o(new L(h,d.message))}else o(new L(N.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new L(N.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{U("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);a.send(n,"POST",l,r,15)})}wo(e,n,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=W5(),o=H5(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new z5({})),this.lo(a.initMessageHeaders,n,r),Qp()||Nd()||tj()||lw()||nj()||Rd()||(a.httpHeadersOverwriteParam="$httpHeaders");const l=i.join("");U("Connection","Creating WebChannel: "+l,a);const c=s.createWebChannel(l,a);let u=!1,d=!1;const h=new J8({Jr:p=>{d?U("Connection","Not sending because WebChannel is closed:",p):(u||(U("Connection","Opening WebChannel transport."),c.open(),u=!0),U("Connection","WebChannel sending:",p),c.send(p))},Yr:()=>c.close()}),f=(p,g,m)=>{p.listen(g,v=>{try{m(v)}catch(b){setTimeout(()=>{throw b},0)}})};return f(c,Mh.EventType.OPEN,()=>{d||U("Connection","WebChannel transport opened.")}),f(c,Mh.EventType.CLOSE,()=>{d||(d=!0,U("Connection","WebChannel transport closed"),h.ro())}),f(c,Mh.EventType.ERROR,p=>{d||(d=!0,ad("Connection","WebChannel transport errored:",p),h.ro(new L(N.UNAVAILABLE,"The operation could not be completed")))}),f(c,Mh.EventType.MESSAGE,p=>{var g;if(!d){const m=p.data[0];fe(!!m);const v=m,b=v.error||((g=v[0])===null||g===void 0?void 0:g.error);if(b){U("Connection","WebChannel received error:",b);const T=b.status;let C=function(A){const k=At[A];if(k!==void 0)return VD(k)}(T),S=b.message;C===void 0&&(C=N.INTERNAL,S="Unknown error status: "+T+" with message "+b.message),d=!0,h.ro(new L(C,S)),c.close()}else U("Connection","WebChannel received:",m),h.oo(m)}}),f(o,G5.STAT_EVENT,p=>{p.stat===IS.PROXY?U("Connection","Detected buffering proxy"):p.stat===IS.NOPROXY&&U("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.io()},0),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(){return typeof window!="undefined"?window:null}function df(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t){return new BQ(t,!0)}class fI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Yn=e,this.timerId=n,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n,r,i,s,o,a,l){this.Yn=e,this.Vo=r,this.vo=i,this.So=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new fI(e,n)}ko(){return this.state===1||this.state===5||this.Mo()}Mo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.ko()&&await this.close(0)}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&this.Co===null&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}async Bo(){if(this.Mo())return this.close(0)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}async close(e,n){this.Uo(),this.qo(),this.No.cancel(),this.Do++,e!==4?this.No.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Rt(n.toString()),Rt("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Ko(),this.stream.close(),this.stream=null),this.state=e,await this.listener.eo(n)}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===n&&this.Qo(r,i)},r=>{e(()=>{const i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,n){const r=this.Go(this.Do);this.stream=this.Wo(e,n),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){this.state=5,this.No.Ro(async()=>{this.state=0,this.start()})}jo(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return n=>{this.Yn.enqueueAndForget(()=>this.Do===e?n():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eX extends _1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.M=s}Wo(e,n){return this.So.wo("Listen",e,n)}onMessage(e){this.No.reset();const n=WQ(this.M,e),r=function(i){if(!("targetChange"in i))return de.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?de.min():s.readTime?zt(s.readTime):de.min()}(e);return this.listener.zo(n,r)}Ho(e){const n={};n.database=gd(this.M),n.addTarget=function(i,s){let o;const a=s.target;return o=up(a)?{documents:GD(i,a)}:{query:zD(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=jD(i,s.resumeToken):s.snapshotVersion.compareTo(de.min())>0&&(o.readTime=fd(i,s.snapshotVersion.toTimestamp())),o}(this.M,e);const r=KQ(this.M,e);r&&(n.labels=r),this.Lo(n)}Jo(e){const n={};n.database=gd(this.M),n.removeTarget=e,this.Lo(n)}}class tX extends _1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,n){return this.So.wo("Write",e,n)}onMessage(e){if(fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const n=HQ(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.tu(r,n)}return fe(!e.writeResults||e.writeResults.length===0),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=gd(this.M),this.Lo(e)}Zo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>md(this.M,r))};this.Lo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nX extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So.co(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new L(N.UNKNOWN,i.toString())})}_o(e,n,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.So._o(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new L(N.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class rX{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){this.ru===0&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){this.state==="Online"?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,e==="Online"&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Rt(n),this.uu=!1):U("OnlineStateTracker",n)}fu(){this.ou!==null&&(this.ou.cancel(),this.ou=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iX{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(o=>{r.enqueueAndForget(async()=>{no(this)&&(U("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=J(a);l.wu.add(4),await yc(l),l.yu.set("Unknown"),l.wu.delete(4),await uh(l)}(this))})}),this.yu=new rX(r,i)}}async function uh(t){if(no(t))for(const e of t.mu)await e(!0)}async function yc(t){for(const e of t.mu)await e(!1)}function Zg(t,e){const n=J(t);n._u.has(e.targetId)||(n._u.set(e.targetId,e),mI(n)?gI(n):wc(n).Mo()&&pI(n,e))}function vd(t,e){const n=J(t),r=wc(n);n._u.delete(e),r.Mo()&&w1(n,e),n._u.size===0&&(r.Mo()?r.$o():no(n)&&n.yu.set("Unknown"))}function pI(t,e){t.pu.Z(e.targetId),wc(t).Ho(e)}function w1(t,e){t.pu.Z(e),wc(t).Jo(e)}function gI(t){t.pu=new $Q({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t._u.get(e)||null}),wc(t).start(),t.yu.au()}function mI(t){return no(t)&&!wc(t).ko()&&t._u.size>0}function no(t){return J(t).wu.size===0}function b1(t){t.pu=void 0}async function sX(t){t._u.forEach((e,n)=>{pI(t,e)})}async function oX(t,e){b1(t),mI(t)?(t.yu.lu(e),gI(t)):t.yu.set("Unknown")}async function aX(t,e,n){if(t.yu.set("Online"),e instanceof BD&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r._u.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r._u.delete(o),r.pu.removeTarget(o))}(t,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vp(t,r)}else if(e instanceof cf?t.pu.ut(e):e instanceof UD?t.pu._t(e):t.pu.ht(e),!n.isEqual(de.min()))try{const r=await h1(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.pu.yt(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=i._u.get(l);c&&i._u.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=i._u.get(a);if(!l)return;i._u.set(a,l.withResumeToken(Lt.EMPTY_BYTE_STRING,l.snapshotVersion)),w1(i,a);const c=new Cs(l.target,a,1,l.sequenceNumber);pI(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){U("RemoteStore","Failed to raise snapshot:",r),await vp(t,r)}}async function vp(t,e,n){if(!Pa(e))throw e;t.wu.add(1),await yc(t),t.yu.set("Offline"),n||(n=()=>h1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{U("RemoteStore","Retrying IndexedDB access"),await n(),t.wu.delete(1),await uh(t)})}function I1(t,e){return e().catch(n=>vp(t,n,e))}async function _c(t){const e=J(t),n=Ws(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;lX(e);)try{const i=await V8(e.localStore,r);if(i===null){e.du.length===0&&n.$o();break}r=i.batchId,cX(e,i)}catch(i){await vp(e,i)}E1(e)&&T1(e)}function lX(t){return no(t)&&t.du.length<10}function cX(t,e){t.du.push(e);const n=Ws(t);n.Mo()&&n.Xo&&n.Zo(e.mutations)}function E1(t){return no(t)&&!Ws(t).ko()&&t.du.length>0}function T1(t){Ws(t).start()}async function uX(t){Ws(t).nu()}async function dX(t){const e=Ws(t);for(const n of t.du)e.Zo(n.mutations)}async function hX(t,e,n){const r=t.du.shift(),i=tI.from(r,e,n);await I1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await _c(t)}async function fX(t,e){e&&Ws(t).Xo&&await async function(n,r){if(i=r.code,$D(i)&&i!==N.ABORTED){const s=n.du.shift();Ws(n).Fo(),await I1(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await _c(n)}var i}(t,e),E1(t)&&T1(t)}async function hC(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");const r=no(n);n.wu.add(3),await yc(n),r&&n.yu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.wu.delete(3),await uh(n)}async function n_(t,e){const n=J(t);e?(n.wu.delete(2),await uh(n)):e||(n.wu.add(2),await yc(n),n.yu.set("Unknown"))}function wc(t){return t.Iu||(t.Iu=function(e,n,r){const i=J(e);return i.iu(),new eX(n,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(t.datastore,t.asyncQueue,{Xr:sX.bind(null,t),eo:oX.bind(null,t),zo:aX.bind(null,t)}),t.mu.push(async e=>{e?(t.Iu.Fo(),mI(t)?gI(t):t.yu.set("Unknown")):(await t.Iu.stop(),b1(t))})),t.Iu}function Ws(t){return t.Tu||(t.Tu=function(e,n,r){const i=J(e);return i.iu(),new tX(n,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(t.datastore,t.asyncQueue,{Xr:uX.bind(null,t),eo:fX.bind(null,t),eu:dX.bind(null,t),tu:hX.bind(null,t)}),t.mu.push(async e=>{e?(t.Tu.Fo(),await _c(t)):(await t.Tu.stop(),t.du.length>0&&(U("RemoteStore",`Stopping write stream with ${t.du.length} pending writes`),t.du=[]))})),t.Tu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new vI(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bc(t,e){if(Rt("AsyncQueue",`${e}: ${t}`),Pa(t))return new L(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||z.comparator(n.key,r.key):(n,r)=>z.comparator(n.key,r.key),this.keyedMap=Jy(),this.sortedSet=new Ct(this.comparator)}static emptySet(e){return new bl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.Eu=new Ct(z.comparator)}track(e){const n=e.doc.key,r=this.Eu.get(n);r?e.type!==0&&r.type===3?this.Eu=this.Eu.insert(n,e):e.type===3&&r.type!==1?this.Eu=this.Eu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Eu=this.Eu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Eu=this.Eu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Eu=this.Eu.remove(n):e.type===1&&r.type===2?this.Eu=this.Eu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Eu=this.Eu.insert(n,{type:2,doc:e.doc}):te():this.Eu=this.Eu.insert(n,e)}Au(){const e=[];return this.Eu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Kl{constructor(e,n,r,i,s,o,a,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,n,r,i){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Kl(e,n,bl.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pX{constructor(){this.Ru=void 0,this.listeners=[]}}class gX{constructor(){this.queries=new to(e=>kD(e),rh),this.onlineState="Unknown",this.bu=new Set}}async function yI(t,e){const n=J(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new pX),i)try{s.Ru=await n.onListen(r)}catch(o){const a=bc(o,`Initialization of query '${Qy(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Pu(n.onlineState),s.Ru&&e.Vu(s.Ru)&&wI(n)}async function _I(t,e){const n=J(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function mX(t,e){const n=J(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Vu(i)&&(r=!0);o.Ru=i}}r&&wI(n)}function vX(t,e,n){const r=J(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function wI(t){t.bu.forEach(e=>{e.next()})}class bI{constructor(e,n,r){this.query=e,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Kl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),n=!0):this.xu(e,this.onlineState)&&(this.Nu(e),n=!0),this.Du=e,n}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let n=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),n=!0),n}xu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.ku||!r)&&(!e.docs.isEmpty()||n==="Offline")}Cu(e){if(e.docChanges.length>0)return!0;const n=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Nu(e){e=Kl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yX{constructor(e,n){this.payload=e,this.byteLength=n}Mu(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.M=e}wi(e){return li(this.M,e)}mi(e){return e.metadata.exists?KD(this.M,e.document,!1):lt.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return zt(e)}}class _X{constructor(e,n,r){this.Ou=e,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=S1(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;const r=Fe.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}$u(e){const n=new Map,r=new pC(this.M);for(const i of e)if(i.metadata.queries){const s=r.wi(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||qe()).add(s);n.set(o,a)}}return n}async complete(){const e=await U8(this.localStore,new pC(this.M),this.documents,this.Ou.id),n=this.$u(this.documents);for(const r of this.queries)await B8(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:e}}}function S1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.key=e}}class k1{constructor(e){this.key=e}}class A1{constructor(e,n){this.query=e,this.Uu=n,this.qu=null,this.current=!1,this.Ku=qe(),this.mutatedKeys=qe(),this.Gu=RD(e),this.Qu=new bl(this.Gu)}get ju(){return this.Uu}Wu(e,n){const r=n?n.zu:new fC,i=n?n.Qu:this.Qu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=Qb(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.Hu(h,f)||(r.track({type:2,doc:f}),m=!0,(l&&this.Gu(f,l)>0||c&&this.Gu(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(l||c)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Qu:o,zu:r,ii:a,mutatedKeys:s}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Au();s.sort((c,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return f(d)-f(h)}(c.type,u.type)||this.Gu(c.doc,u.doc)),this.Ju(r);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,l=a!==this.qu;return this.qu=a,s.length!==0||l?{snapshot:new Kl(this.query,e.Qu,i,s,e.mutatedKeys,a===0,l,!1),Xu:o}:{Xu:o}}Pu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new fC,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.Uu=this.Uu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Uu=this.Uu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=qe(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const n=[];return e.forEach(r=>{this.Ku.has(r)||n.push(new k1(r))}),this.Ku.forEach(r=>{e.has(r)||n.push(new C1(r))}),n}ta(e){this.Uu=e._i,this.Ku=qe();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ea(){return Kl.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.qu===0)}}class wX{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class bX{constructor(e){this.key=e,this.na=!1}}class IX{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new to(a=>kD(a),rh),this.ra=new Map,this.oa=new Set,this.ua=new Ct(z.comparator),this.aa=new Map,this.ca=new uI,this.ha={},this.la=new Map,this.fa=aa.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return this.da===!0}}async function EX(t,e){const n=CI(t);let r,i;const s=n.ia.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.ea();else{const o=await Wl(n.localStore,kr(e));n.isPrimaryClient&&Zg(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await II(n,e,r,a==="current")}return i}async function II(t,e,n,r){t._a=(u,d,h)=>async function(f,p,g,m){let v=p.view.Wu(g);v.ii&&(v=await pp(f.localStore,p.query,!1).then(({documents:C})=>p.view.Wu(C,v)));const b=m&&m.targetChanges.get(p.targetId),T=p.view.applyChanges(v,f.isPrimaryClient,b);return r_(f,p.targetId,T.Xu),T.snapshot}(t,u,d,h);const i=await pp(t.localStore,e,!0),s=new A1(e,i._i),o=s.Wu(i.documents),a=lh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),l=s.applyChanges(o,t.isPrimaryClient,a);r_(t,n,l.Xu);const c=new wX(e,n,s);return t.ia.set(e,c),t.ra.has(n)?t.ra.get(n).push(e):t.ra.set(n,[e]),l.snapshot}async function TX(t,e){const n=J(t),r=n.ia.get(e),i=n.ra.get(r.targetId);if(i.length>1)return n.ra.set(r.targetId,i.filter(s=>!rh(s,e))),void n.ia.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Hl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),vd(n.remoteStore,r.targetId),Gl(n,r.targetId)}).catch(Oa)):(Gl(n,r.targetId),await Hl(n.localStore,r.targetId,!0))}async function SX(t,e,n){const r=kI(t);try{const i=await function(s,o){const a=J(s),l=Tt.now(),c=o.reduce((d,h)=>d.add(h.key),qe());let u;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>a.fi.Ks(d,c).next(h=>{u=h;const f=[];for(const p of o){const g=xQ(p,u.get(p.key));g!=null&&f.push(new xa(p.key,g,wD(g.value.mapValue),Nt.exists(!0)))}return a.Bs.addMutationBatch(d,l,f,o)})).then(d=>(d.applyToLocalDocumentSet(u),{batchId:d.batchId,changes:u}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.ha[s.currentUser.toKey()];l||(l=new Ct(ve)),l=l.insert(o,a),s.ha[s.currentUser.toKey()]=l}(r,i.batchId,n),await rs(r,i.changes),await _c(r.remoteStore)}catch(i){const s=bc(i,"Failed to persist write");n.reject(s)}}async function R1(t,e){const n=J(t);try{const r=await $8(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.aa.get(s);o&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.na=!0:i.modifiedDocuments.size>0?fe(o.na):i.removedDocuments.size>0&&(fe(o.na),o.na=!1))}),await rs(n,r,e)}catch(r){await Oa(r)}}function gC(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ia.forEach((s,o)=>{const a=o.view.Pu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=J(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const d of u.listeners)d.Pu(o)&&(l=!0)}),l&&wI(a)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CX(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.aa.get(e),s=i&&i.key;if(s){let o=new Ct(z.comparator);o=o.insert(s,lt.newNoDocument(s,de.min()));const a=qe().add(s),l=new ah(de.min(),new Map,new it(ve),o,a);await R1(r,l),r.ua=r.ua.remove(s),r.aa.delete(e),SI(r)}else await Hl(r.localStore,e,!1).then(()=>Gl(r,e,n)).catch(Oa)}async function kX(t,e){const n=J(t),r=e.batch.batchId;try{const i=await F8(n.localStore,e);TI(n,r,null),EI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rs(n,i)}catch(i){await Oa(i)}}async function AX(t,e,n){const r=J(t);try{const i=await function(s,o){const a=J(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.Bs.lookupMutationBatch(l,o).next(u=>(fe(u!==null),c=u.keys(),a.Bs.removeMutationBatch(l,u))).next(()=>a.Bs.performConsistencyCheck(l)).next(()=>a.fi.Ks(l,c))})}(r.localStore,e);TI(r,e,n),EI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rs(r,i)}catch(i){await Oa(i)}}async function RX(t,e){const n=J(t);no(n.remoteStore)||U("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=J(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.Bs.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.la.get(r)||[];i.push(e),n.la.set(r,i)}catch(r){const i=bc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function EI(t,e){(t.la.get(e)||[]).forEach(n=>{n.resolve()}),t.la.delete(e)}function TI(t,e,n){const r=J(t);let i=r.ha[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function Gl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ra.get(e))t.ia.delete(r),n&&t.sa.wa(r,n);t.ra.delete(e),t.isPrimaryClient&&t.ca.vi(e).forEach(r=>{t.ca.containsKey(r)||N1(t,r)})}function N1(t,e){t.oa.delete(e.path.canonicalString());const n=t.ua.get(e);n!==null&&(vd(t.remoteStore,n),t.ua=t.ua.remove(e),t.aa.delete(n),SI(t))}function r_(t,e,n){for(const r of n)r instanceof C1?(t.ca.addReference(r.key,e),NX(t,r)):r instanceof k1?(U("SyncEngine","Document no longer in limbo: "+r.key),t.ca.removeReference(r.key,e),t.ca.containsKey(r.key)||N1(t,r.key)):te()}function NX(t,e){const n=e.key,r=n.path.canonicalString();t.ua.get(n)||t.oa.has(r)||(U("SyncEngine","New document in limbo: "+n),t.oa.add(r),SI(t))}function SI(t){for(;t.oa.size>0&&t.ua.size<t.maxConcurrentLimboResolutions;){const e=t.oa.values().next().value;t.oa.delete(e);const n=new z(Fe.fromString(e)),r=t.fa.next();t.aa.set(r,new bX(n)),t.ua=t.ua.insert(n,r),Zg(t.remoteStore,new Cs(kr(vc(n.path)),r,2,sr.A))}}async function rs(t,e,n){const r=J(t),i=[],s=[],o=[];r.ia.isEmpty()||(r.ia.forEach((a,l)=>{o.push(r._a(l,e,n).then(c=>{if(c){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c.fromCache?"not-current":"current"),i.push(c);const u=cI.Ys(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.sa.zo(i),await async function(a,l){const c=J(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>R.forEach(l,d=>R.forEach(d.Hs,h=>c.persistence.referenceDelegate.addReference(u,d.targetId,h)).next(()=>R.forEach(d.Js,h=>c.persistence.referenceDelegate.removeReference(u,d.targetId,h)))))}catch(u){if(!Pa(u))throw u;U("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const d=u.targetId;if(!u.fromCache){const h=c.ui.get(d),f=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(f);c.ui=c.ui.insert(d,p)}}}(r.localStore,s))}async function xX(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());const r=await d1(n.localStore,e);n.currentUser=e,function(i,s){i.la.forEach(o=>{o.forEach(a=>{a.reject(new L(N.CANCELLED,s))})}),i.la.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rs(n,r.di)}}function PX(t,e){const n=J(t),r=n.aa.get(e);if(r&&r.na)return qe().add(r.key);{let i=qe();const s=n.ra.get(e);if(!s)return i;for(const o of s){const a=n.ia.get(o);i=i.unionWith(a.view.ju)}return i}}async function OX(t,e){const n=J(t),r=await pp(n.localStore,e.query,!0),i=e.view.ta(r);return n.isPrimaryClient&&r_(n,e.targetId,i.Xu),i}async function DX(t,e){const n=J(t);return g1(n.localStore,e).then(r=>rs(n,r))}async function MX(t,e,n,r){const i=J(t),s=await function(o,a){const l=J(o),c=J(l.Bs);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>c.fn(u,a).next(d=>d?l.fi.Ks(u,d):R.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await _c(i.remoteStore):n==="acknowledged"||n==="rejected"?(TI(i,e,r||null),EI(i,e),function(o,a){J(J(o).Bs)._n(a)}(i.localStore,e)):te(),await rs(i,s)):U("SyncEngine","Cannot apply mutation batch with id: "+e)}async function LX(t,e){const n=J(t);if(CI(n),kI(n),e===!0&&n.da!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await mC(n,r.toArray());n.da=!0,await n_(n.remoteStore,!0);for(const s of i)Zg(n.remoteStore,s)}else if(e===!1&&n.da!==!1){const r=[];let i=Promise.resolve();n.ra.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Gl(n,o),Hl(n.localStore,o,!0))),vd(n.remoteStore,o)}),await i,await mC(n,r),function(s){const o=J(s);o.aa.forEach((a,l)=>{vd(o.remoteStore,l)}),o.ca.Si(),o.aa=new Map,o.ua=new Ct(z.comparator)}(n),n.da=!1,await n_(n.remoteStore,!1)}}async function mC(t,e,n){const r=J(t),i=[],s=[];for(const o of e){let a;const l=r.ra.get(o);if(l&&l.length!==0){a=await Wl(r.localStore,kr(l[0]));for(const c of l){const u=r.ia.get(c),d=await OX(r,u);d.snapshot&&s.push(d.snapshot)}}else{const c=await p1(r.localStore,o);a=await Wl(r.localStore,c),await II(r,x1(c),o,!1)}i.push(a)}return r.sa.zo(s),i}function x1(t){return SD(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function FX(t){const e=J(t);return J(J(e.localStore).persistence).Fs()}async function $X(t,e,n,r){const i=J(t);if(i.da)return void U("SyncEngine","Ignoring unexpected query state notification.");const s=i.ra.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await g1(i.localStore,AD(s[0])),a=ah.createSynthesizedRemoteEventForCurrentChange(e,n==="current");await rs(i,o,a);break}case"rejected":await Hl(i.localStore,e,!0),Gl(i,e,r);break;default:te()}}async function VX(t,e,n){const r=CI(t);if(r.da){for(const i of e){if(r.ra.has(i)){U("SyncEngine","Adding an already active target "+i);continue}const s=await p1(r.localStore,i),o=await Wl(r.localStore,s);await II(r,x1(s),o.targetId,!1),Zg(r.remoteStore,o)}for(const i of n)r.ra.has(i)&&await Hl(r.localStore,i,!1).then(()=>{vd(r.remoteStore,i),Gl(r,i)}).catch(Oa)}}function CI(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=R1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CX.bind(null,e),e.sa.zo=mX.bind(null,e.eventManager),e.sa.wa=vX.bind(null,e.eventManager),e}function kI(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AX.bind(null,e),e}function UX(t,e,n){const r=J(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(d,h){const f=J(d),p=zt(h.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",g=>f._s.getBundleMetadata(g,h.id)).then(g=>!!g&&g.createTime.compareTo(p)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(d){return{taskState:"Success",documentsLoaded:d.totalDocuments,bytesLoaded:d.totalBytes,totalDocuments:d.totalDocuments,totalBytes:d.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(S1(a));const l=new _X(a,i.localStore,s.M);let c=await s.ma();for(;c;){const d=await l.Fu(c);d&&o._updateProgress(d),c=await s.ma()}const u=await l.complete();return await rs(i,u.Lu,void 0),await function(d,h){const f=J(d);return f.persistence.runTransaction("Save bundle","readwrite",p=>f._s.saveBundleMetadata(p,h))}(i.localStore,a),o._completeWith(u.progress),Promise.resolve(u.Bu)}catch(a){return ad("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class P1{constructor(){this.synchronizeTabs=!1}async initialize(e){this.M=ch(e.databaseInfo.databaseId),this.sharedClientState=this.ga(e),this.persistence=this.ya(e),await this.persistence.start(),this.gcScheduler=this.pa(e),this.localStore=this.Ia(e)}pa(e){return null}Ia(e){return u1(this.persistence,new c1,e.initialUser,this.M)}ya(e){return new z8(dI.Yi,this.M)}ga(e){return new v1}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class O1 extends P1{constructor(e,n,r){super(),this.Ta=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ta.initialize(this,e),await kI(this.Ta.syncEngine),await _c(this.Ta.remoteStore),await this.persistence.Ts(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve()))}Ia(e){return u1(this.persistence,new c1,e.initialUser,this.M)}pa(e){const n=this.persistence.referenceDelegate.garbageCollector;return new R8(n,e.asyncQueue)}ya(e){const n=lI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new aI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,y1(),df(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new v1}}class BX extends O1{constructor(e,n){super(e,n,!1),this.Ta=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ta.syncEngine;this.sharedClientState instanceof ov&&(this.sharedClientState.syncEngine={$r:MX.bind(null,n),Br:$X.bind(null,n),Lr:VX.bind(null,n),Fs:FX.bind(null,n),Fr:DX.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ts(async r=>{await LX(this.Ta.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):r||this.gcScheduler.stop())})}ga(e){const n=y1();if(!ov.vt(n))throw new L(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ov(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class AI{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xX.bind(null,this.syncEngine),await n_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new gX}createDatastore(e){const n=ch(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new Z8(i));var i;return function(s,o,a,l){return new nX(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>gC(this.syncEngine,a,0),o=dC.vt()?new dC:new Q8,new iX(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,c){const u=new IX(r,i,s,o,a,l);return c&&(u.da=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=J(e);U("RemoteStore","RemoteStore shutting down."),n.wu.add(5),await yc(n),n.gu.shutdown(),n.yu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX{constructor(e,n){this.Ra=e,this.M=n,this.metadata=new Gt,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}async getMetadata(){return this.metadata.promise}async ma(){return await this.getMetadata(),this.Pa()}async Pa(){const e=await this.Va();if(e===null)return null;const n=this.ba.decode(e),r=Number(n);isNaN(r)&&this.va(`length string (${n}) is not valid number`);const i=await this.Sa(r);return new yX(JSON.parse(i),e.length+r)}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Va(){for(;this.Da()<0&&!await this.Ca(););if(this.buffer.length===0)return null;const e=this.Da();e<0&&this.va("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Sa(e){for(;this.buffer.length<e;)await this.Ca()&&this.va("Reached the end of bundle when more is expected.");const n=this.ba.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ca(){const e=await this.Ra.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new L(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=J(r),o=gd(s.M)+"/documents",a={documents:i.map(d=>pd(s.M,d))},l=await s._o("BatchGetDocuments",o,a),c=new Map;l.forEach(d=>{const h=qQ(s.M,d);c.set(h.key.toString(),h)});const u=[];return i.forEach(d=>{const h=c.get(d.toString());fe(!!h),u.push(h)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new oh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=z.fromPath(r);this.mutations.push(new Xb(i,this.precondition(i)))}),await async function(n,r){const i=J(n),s=gd(i.M)+"/documents",o={writes:r.map(a=>md(i.M,a))};await i.co("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw te();n=de.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new L(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?Nt.updateTime(n):Nt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(de.min()))throw new L(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nt.updateTime(n)}return Nt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WX{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.xa=r.maxAttempts,this.No=new fI(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){this.No.Ro(async()=>{const e=new qX(this.datastore),n=this.ka(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Ma(i)}))}).catch(r=>{this.Ma(r)})})}ka(e){try{const n=this.updateFunction(e);return!th(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||!$D(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HX{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dn.UNAUTHENTICATED,this.clientId=pD.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{U("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(U("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function D1(t,e){t.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await d1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function M1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RI(t);U("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>hC(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>hC(e.remoteStore,s)),t.onlineComponents=e}async function RI(t){return t.offlineComponents||(U("FirestoreClient","Using default OfflineComponentProvider"),await D1(t,new P1)),t.offlineComponents}async function tm(t){return t.onlineComponents||(U("FirestoreClient","Using default OnlineComponentProvider"),await M1(t,new AI)),t.onlineComponents}function L1(t){return RI(t).then(e=>e.persistence)}function NI(t){return RI(t).then(e=>e.localStore)}function F1(t){return tm(t).then(e=>e.remoteStore)}function xI(t){return tm(t).then(e=>e.syncEngine)}async function zl(t){const e=await tm(t),n=e.eventManager;return n.onListen=EX.bind(null,e.syncEngine),n.onUnlisten=TX.bind(null,e.syncEngine),n}function KX(t){return t.asyncQueue.enqueue(async()=>{const e=await L1(t),n=await F1(t);return e.setNetworkEnabled(!0),function(r){const i=J(r);return i.wu.delete(0),uh(i)}(n)})}function GX(t){return t.asyncQueue.enqueue(async()=>{const e=await L1(t),n=await F1(t);return e.setNetworkEnabled(!1),async function(r){const i=J(r);i.wu.add(0),await yc(i),i.yu.set("Offline")}(n)})}function zX(t,e){const n=new Gt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,l){const c=J(a);return c.persistence.runTransaction("read document","readonly",u=>c.fi.Ls(u,l))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new L(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=bc(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await NI(t),e,n)),n.promise}function $1(t,e,n={}){const r=new Gt;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const c=new em({next:d=>{s.enqueueAndForget(()=>_I(i,u));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new L(N.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&a.source==="server"?l.reject(new L(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new bI(vc(o.path),c,{includeMetadataChanges:!0,ku:!0});return yI(i,u)}(await zl(t),t.asyncQueue,e,n,r)),r.promise}function YX(t,e){const n=new Gt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await pp(r,i,!0),a=new A1(i,o._i),l=a.Wu(o.documents),c=a.applyChanges(l,!1);s.resolve(c.snapshot)}catch(o){const a=bc(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await NI(t),e,n)),n.promise}function V1(t,e,n={}){const r=new Gt;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const c=new em({next:d=>{s.enqueueAndForget(()=>_I(i,u)),d.fromCache&&a.source==="server"?l.reject(new L(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new bI(o,c,{includeMetadataChanges:!0,ku:!0});return yI(i,u)}(await zl(t),t.asyncQueue,e,n,r)),r.promise}function QX(t,e){const n=new em(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){J(r).bu.add(i),i.next()}(await zl(t),n)),()=>{n.Aa(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){J(r).bu.delete(i)}(await zl(t),n))}}function XX(t,e,n){const r=new Gt;return t.asyncQueue.enqueueAndForget(async()=>{const i=await function(s){return tm(s).then(o=>o.datastore)}(t);new WX(t.asyncQueue,i,n,e,r).run()}),r.promise}function JX(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(l,c){return new jX(l,c)}(function(l,c){if(l instanceof Uint8Array)return vC(l,c);if(l instanceof ArrayBuffer)return vC(new Uint8Array(l),c);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,ch(e));t.asyncQueue.enqueueAndForget(async()=>{UX(await xI(t),i,r)})}function ZX(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=J(n);return i.persistence.runTransaction("Get named query","readonly",s=>i._s.getNamedQuery(s,r))}(await NI(t),e))}const yC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t,e,n){if(!n)throw new L(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function U1(t,e,n,r){if(e===!0&&r===!0)throw new L(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _C(t){if(!z.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wC(t){if(z.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function Ue(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nm(t);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function B1(t,e){if(e<=0)throw new L(N.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,U1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bC({}),this._settingsFrozen=!1,e instanceof zi?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zi(i.options.projectId)}(e))}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bC(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new J5;switch(n.type){case"gapi":const r=n.client;return fe(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new nQ(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=yC.get(e);n&&(U("ComponentProvider","Removing Datastore"),yC.delete(e),n.terminate())}(this),Promise.resolve()}}function eJ(t,e,n,r={}){var i;const s=(t=Ue(t,dh))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&ad("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=dn.MOCK_USER;else{o=ow(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new dn(l)}t._authCredentials=new Z5(new fD(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}}class Cn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cn(this.firestore,e,this._query)}}class ci extends Cn{constructor(e,n,r){super(e,n,vc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new z(e))}withConverter(e){return new ci(this.firestore,e,this._path)}}function j1(t,e,...n){if(t=$(t),PI("collection","path",e),t instanceof dh){const r=Fe.fromString(e,...n);return wC(r),new ci(t,null,r)}{if(!(t instanceof ut||t instanceof ci))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return wC(r),new ci(t.firestore,null,r)}}function tJ(t,e){if(t=Ue(t,dh),PI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Cn(t,null,function(n){return new ns(Fe.emptyPath(),n)}(e))}function yp(t,e,...n){if(t=$(t),arguments.length===1&&(e=pD.R()),PI("doc","path",e),t instanceof dh){const r=Fe.fromString(e,...n);return _C(r),new ut(t,null,new z(r))}{if(!(t instanceof ut||t instanceof ci))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return _C(r),new ut(t.firestore,t instanceof ci?t.converter:null,new z(r))}}function q1(t,e){return t=$(t),e=$(e),(t instanceof ut||t instanceof ci)&&(e instanceof ut||e instanceof ci)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function W1(t,e){return t=$(t),e=$(e),t instanceof Cn&&e instanceof Cn&&t.firestore===e.firestore&&rh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nJ{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new fI(this,"async_queue_retry"),this.Qa=()=>{const n=df();n&&U("AsyncQueue","Visibility state changed to "+n.visibilityState),this.No.Po()};const e=df();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const n=df();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const n=new Gt;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}async za(){if(this.$a.length!==0){try{await this.$a[0](),this.$a.shift(),this.No.reset()}catch(e){if(!Pa(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.$a.length>0&&this.No.Ro(()=>this.za())}}Wa(e){const n=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{this.Ua=r,this.qa=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw Rt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.qa=!1,r))));return this.Fa=n,n}enqueueAfterDelay(e,n,r){this.ja(),this.Ga.indexOf(e)>-1&&(n=0);const i=vI.createAndSchedule(this,e,n,r,s=>this.Ha(s));return this.La.push(i),i}ja(){this.Ua&&te()}verifyOperationInProgress(){}async Ja(){let e;do e=this.Fa,await e;while(e!==this.Fa)}Ya(e){for(const n of this.La)if(n.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.La)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const n=this.La.indexOf(e);this.La.splice(n,1)}}function i_(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class rJ{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iJ=-1;class _t extends dh{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new nJ,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||H1(this),this._firestoreClient.terminate()}}function an(t){return t._firestoreClient||H1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function H1(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new cQ(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new HX(t._authCredentials,t._appCheckCredentials,t._queue,r)}function sJ(t,e){G1(t=Ue(t,_t));const n=an(t),r=t._freezeSettings(),i=new AI;return K1(n,i,new O1(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function oJ(t){G1(t=Ue(t,_t));const e=an(t),n=t._freezeSettings(),r=new AI;return K1(e,r,new BX(r,n.cacheSizeBytes))}function K1(t,e,n){const r=new Gt;return t.asyncQueue.enqueue(async()=>{try{await D1(t,n),await M1(t,e),r.resolve()}catch(i){if(!function(s){return s.name==="FirebaseError"?s.code===N.FAILED_PRECONDITION||s.code===N.UNIMPLEMENTED:typeof DOMException!="undefined"&&s instanceof DOMException?s.code===22||s.code===20||s.code===11:!0}(i))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}}).then(()=>r.promise)}function aJ(t){if(t._initialized&&!t._terminated)throw new L(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Lr.vt())return Promise.resolve();const r=n+"main";await Lr.delete(r)}(lI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function lJ(t){return function(e){const n=new Gt;return e.asyncQueue.enqueueAndForget(async()=>RX(await xI(e),n)),n.promise}(an(t=Ue(t,_t)))}function cJ(t){return KX(an(t=Ue(t,_t)))}function uJ(t){return GX(an(t=Ue(t,_t)))}function dJ(t,e){const n=an(t=Ue(t,_t)),r=new rJ;return JX(n,t._databaseId,e,r),r}function hJ(t,e){return ZX(an(t=Ue(t,_t)),e).then(n=>n?new Cn(t,null,n.query):null)}function G1(t){if(t._initialized||t._terminated)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yi(Lt.fromBase64String(e))}catch(n){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yi(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fJ=/^__.*__$/;class pJ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xa(e,this.data,this.fieldMask,n,this.fieldTransforms):new sh(e,this.data,n,this.fieldTransforms)}}class z1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new xa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Y1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class im{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,s===void 0&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new im(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return _p(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(e.length===0)throw this.ac("Document fields must not be empty");if(Y1(this.ec)&&fJ.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class gJ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.M=r||ch(e)}lc(e,n,r,i=!1){return new im({ec:e,methodName:n,hc:r,path:Mt.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Ma(t){const e=t._freezeSettings(),n=ch(t._databaseId);return new gJ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sm(t,e,n,r,i,s={}){const o=t.lc(s.merge||s.mergeFields?2:0,e,n,i);LI("Data must be an object, but it was:",o,r);const a=J1(r,o);let l,c;if(s.merge)l=new Ul(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=s_(e,d,n);if(!o.contains(h))throw new L(N.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);eM(u,h)||u.push(h)}l=new Ul(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new pJ(new In(a),l,c)}class hh extends Da{_toFieldTransform(e){if(e.ec!==2)throw e.ec===1?e.ac(`${this._methodName}() can only appear at the top level of your update data`):e.ac(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hh}}function Q1(t,e,n){return new im({ec:3,hc:e.settings.hc,methodName:t._methodName,ic:n},e.databaseId,e.M,e.ignoreUndefinedProperties)}class OI extends Da{_toFieldTransform(e){return new ih(e.path,new jl)}isEqual(e){return e instanceof OI}}class mJ extends Da{constructor(e,n){super(e),this.fc=n}_toFieldTransform(e){const n=Q1(this,e,!0),r=this.fc.map(s=>La(s,n)),i=new ra(r);return new ih(e.path,i)}isEqual(e){return this===e}}class vJ extends Da{constructor(e,n){super(e),this.fc=n}_toFieldTransform(e){const n=Q1(this,e,!0),r=this.fc.map(s=>La(s,n)),i=new ia(r);return new ih(e.path,i)}isEqual(e){return this===e}}class yJ extends Da{constructor(e,n){super(e),this.dc=n}_toFieldTransform(e){const n=new ql(e.M,PD(e.M,this.dc));return new ih(e.path,n)}isEqual(e){return this===e}}function DI(t,e,n,r){const i=t.lc(1,e,n);LI("Data must be an object, but it was:",i,r);const s=[],o=In.empty();Na(r,(l,c)=>{const u=FI(e,l,n);c=$(c);const d=i.oc(u);if(c instanceof hh)s.push(u);else{const h=La(c,d);h!=null&&(s.push(u),o.set(u,h))}});const a=new Ul(s);return new z1(o,a,i.fieldTransforms)}function MI(t,e,n,r,i,s){const o=t.lc(1,e,n),a=[s_(e,r,n)],l=[i];if(s.length%2!=0)throw new L(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(s_(e,s[h])),l.push(s[h+1]);const c=[],u=In.empty();for(let h=a.length-1;h>=0;--h)if(!eM(c,a[h])){const f=a[h];let p=l[h];p=$(p);const g=o.oc(f);if(p instanceof hh)c.push(f);else{const m=La(p,g);m!=null&&(c.push(f),u.set(f,m))}}const d=new Ul(c);return new z1(u,d,o.fieldTransforms)}function X1(t,e,n,r=!1){return La(n,t.lc(r?4:3,e))}function La(t,e){if(Z1(t=$(t)))return LI("Unsupported field value:",e,t),J1(t,e);if(t instanceof Da)return function(n,r){if(!Y1(r.ec))throw r.ac(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ic&&e.ec!==4)throw e.ac("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=La(o,r.uc(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=$(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return PD(r.M,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Tt.fromDate(n);return{timestampValue:fd(r.M,i)}}if(n instanceof Tt){const i=new Tt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:fd(r.M,i)}}if(n instanceof rm)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof yi)return{bytesValue:jD(r.M,n._byteString)};if(n instanceof ut){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Jb(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.ac(`Unsupported field value: ${nm(n)}`)}(t,e)}function J1(t,e){const n={};return mD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Na(t,(r,i)=>{const s=La(i,e.sc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Z1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof rm||t instanceof yi||t instanceof ut||t instanceof Da)}function LI(t,e,n){if(!Z1(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=nm(n);throw r==="an object"?e.ac(t+" a custom object"):e.ac(t+" "+r)}}function s_(t,e,n){if((e=$(e))instanceof Hs)return e._internalPath;if(typeof e=="string")return FI(t,e);throw _p("Field path arguments must be of type string or ",t,!1,void 0,n)}const _J=new RegExp("[~\\*/\\[\\]]");function FI(t,e,n){if(e.search(_J)>=0)throw _p(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hs(...e.split("."))._internalPath}catch{throw _p(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _p(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new L(N.INVALID_ARGUMENT,a+t+l)}function eM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(om("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wJ extends yd{data(){return super.data()}}function om(t,e){return typeof e=="string"?FI(t,e):e instanceof Hs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yi extends yd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(om("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class mu extends Yi{data(e={}){return super.data(e)}}class Ks{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new No(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new mu(this._firestore,this._userDataWriter,r.key,r,new No(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new mu(r._firestore,r._userDataWriter,o.doc.key,o.doc,new No(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new mu(r._firestore,r._userDataWriter,o.doc.key,o.doc,new No(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,c=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:bJ(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bJ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}function tM(t,e){return t instanceof Yi&&e instanceof Yi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ks&&e instanceof Ks&&t._firestore===e._firestore&&W1(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fh{}function cs(t,...e){for(const n of e)t=n._apply(t);return t}class IJ extends fh{constructor(e,n,r){super(),this._c=e,this.wc=n,this.mc=r,this.type="where"}_apply(e){const n=Ma(e.firestore),r=function(i,s,o,a,l,c,u){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new L(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){EC(u,c);const f=[];for(const p of u)f.push(IC(a,i,p));d={arrayValue:{values:f}}}else d=IC(a,i,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||EC(u,c),d=X1(o,s,u,c==="in"||c==="not-in");const h=fn.create(l,c,d);return function(f,p){if(p.S()){const m=zb(f);if(m!==null&&!m.isEqual(p.field))throw new L(N.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${m.toString()}' and '${p.field.toString()}'`);const v=Gb(f);v!==null&&aM(f,p.field,v)}const g=function(m,v){for(const b of m.filters)if(v.indexOf(b.op)>=0)return b.op;return null}(f,function(m){switch(m){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(p.op));if(g!==null)throw g===p.op?new L(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${p.op.toString()}' filter.`):new L(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${p.op.toString()}' filters with '${g.toString()}' filters.`)}(i,h),h}(e._query,"where",n,e.firestore._databaseId,this._c,this.wc,this.mc);return new Cn(e.firestore,e.converter,function(i,s){const o=i.filters.concat([s]);return new ns(i.path,i.collectionGroup,i.explicitOrderBy.slice(),o,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function EJ(t,e,n){const r=e,i=om("where",t);return new IJ(i,r,n)}class TJ extends fh{constructor(e,n){super(),this._c=e,this.gc=n,this.type="orderBy"}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new wl(i,s);return function(a,l){if(Gb(a)===null){const c=zb(a);c!==null&&aM(a,c,l.field)}}(r,o),o}(e._query,this._c,this.gc);return new Cn(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new ns(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function SJ(t,e="asc"){const n=e,r=om("orderBy",t);return new TJ(r,n)}class rM extends fh{constructor(e,n,r){super(),this.type=e,this.yc=n,this.Ic=r}_apply(e){return new Cn(e.firestore,e.converter,CD(e._query,this.yc,this.Ic))}}function CJ(t){return B1("limit",t),new rM("limit",t,"F")}function kJ(t){return B1("limitToLast",t),new rM("limitToLast",t,"L")}class iM extends fh{constructor(e,n,r){super(),this.type=e,this.Tc=n,this.Ec=r}_apply(e){const n=oM(e,this.type,this.Tc,this.Ec);return new Cn(e.firestore,e.converter,function(r,i){return new ns(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function AJ(...t){return new iM("startAt",t,!0)}function RJ(...t){return new iM("startAfter",t,!1)}class sM extends fh{constructor(e,n,r){super(),this.type=e,this.Tc=n,this.Ec=r}_apply(e){const n=oM(e,this.type,this.Tc,this.Ec);return new Cn(e.firestore,e.converter,function(r,i){return new ns(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function NJ(...t){return new sM("endBefore",t,!1)}function xJ(...t){return new sM("endAt",t,!0)}function oM(t,e,n,r){if(n[0]=$(n[0]),n[0]instanceof yd)return function(i,s,o,a,l){if(!a)throw new L(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const u of Bl(i))if(u.field.isKeyField())c.push(ta(s,a.key));else{const d=a.data.field(u.field);if(Kb(d))throw new L(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const h=u.field.canonicalString();throw new L(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}c.push(d)}return new qs(c,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Ma(t.firestore);return function(s,o,a,l,c,u){const d=s.explicitOrderBy;if(c.length>d.length)throw new L(N.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<c.length;f++){const p=c[f];if(d[f].field.isKeyField()){if(typeof p!="string")throw new L(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!Yb(s)&&p.indexOf("/")!==-1)throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const g=s.path.child(Fe.fromString(p));if(!z.isDocumentKey(g))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);const m=new z(g);h.push(ta(o,m))}else{const g=X1(a,l,p);h.push(g)}}return new qs(h,u)}(t._query,t.firestore._databaseId,i,e,n,r)}}function IC(t,e,n){if(typeof(n=$(n))=="string"){if(n==="")throw new L(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yb(e)&&n.indexOf("/")!==-1)throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!z.isDocumentKey(r))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ta(t,new z(r))}if(n instanceof ut)return ta(t,n._key);throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nm(n)}.`)}function EC(t,e){if(!Array.isArray(t)||t.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new L(N.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function aM(t,e,n){if(!n.isEqual(e))throw new L(N.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PJ={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{convertValue(e,n="none"){switch(ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw te()}}convertObject(e,n){const r={};return Na(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new rm(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vD(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(cd(e));default:return null}}convertTimestamp(e){const n=Bs(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);fe(XD(r));const i=new zi(r.get(1),r.get(3)),s=new z(r.popFirst(5));return i.isEqual(n)||Rt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class OJ extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DJ{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ma(e)}set(e,n,r){this._verifyNotCommitted();const i=vs(e,this._firestore),s=am(i.converter,n,r),o=sm(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Nt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=vs(e,this._firestore);let o;return o=typeof(n=$(n))=="string"||n instanceof Hs?MI(this._dataReader,"WriteBatch.update",s._key,n,r,i):DI(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=vs(e,this._firestore);return this._mutations=this._mutations.concat(new oh(n._key,Nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new L(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vs(t,e){if((t=$(t)).firestore!==e)throw new L(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MJ(t){t=Ue(t,ut);const e=Ue(t.firestore,_t);return $1(an(e),t._key).then(n=>VI(e,t,n))}class Fa extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}}function LJ(t){t=Ue(t,ut);const e=Ue(t.firestore,_t),n=an(e),r=new Fa(e);return zX(n,t._key).then(i=>new Yi(e,r,t._key,i,new No(i!==null&&i.hasLocalMutations,!0),t.converter))}function FJ(t){t=Ue(t,ut);const e=Ue(t.firestore,_t);return $1(an(e),t._key,{source:"server"}).then(n=>VI(e,t,n))}function $J(t){t=Ue(t,Cn);const e=Ue(t.firestore,_t),n=an(e),r=new Fa(e);return nM(t._query),V1(n,t._query).then(i=>new Ks(e,r,t,i))}function VJ(t){t=Ue(t,Cn);const e=Ue(t.firestore,_t),n=an(e),r=new Fa(e);return YX(n,t._query).then(i=>new Ks(e,r,t,i))}function UJ(t){t=Ue(t,Cn);const e=Ue(t.firestore,_t),n=an(e),r=new Fa(e);return V1(n,t._query,{source:"server"}).then(i=>new Ks(e,r,t,i))}function TC(t,e,n){t=Ue(t,ut);const r=Ue(t.firestore,_t),i=am(t.converter,e,n);return ph(r,[sm(Ma(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Nt.none())])}function SC(t,e,n,...r){t=Ue(t,ut);const i=Ue(t.firestore,_t),s=Ma(i);let o;return o=typeof(e=$(e))=="string"||e instanceof Hs?MI(s,"updateDoc",t._key,e,n,r):DI(s,"updateDoc",t._key,e),ph(i,[o.toMutation(t._key,Nt.exists(!0))])}function BJ(t){return ph(Ue(t.firestore,_t),[new oh(t._key,Nt.none())])}function jJ(t,e){const n=Ue(t.firestore,_t),r=yp(t),i=am(t.converter,e);return ph(n,[sm(Ma(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Nt.exists(!1))]).then(()=>r)}function lM(t,...e){var n,r,i;t=$(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||i_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(i_(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(t instanceof ut)c=Ue(t.firestore,_t),u=vc(t._key.path),l={next:d=>{e[o]&&e[o](VI(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Ue(t,Cn);c=Ue(d.firestore,_t),u=d._query;const h=new Fa(c);l={next:f=>{e[o]&&e[o](new Ks(c,h,d,f))},error:e[o+1],complete:e[o+2]},nM(t._query)}return function(d,h,f,p){const g=new em(p),m=new bI(h,g,f);return d.asyncQueue.enqueueAndForget(async()=>yI(await zl(d),m)),()=>{g.Aa(),d.asyncQueue.enqueueAndForget(async()=>_I(await zl(d),m))}}(an(c),u,a,l)}function qJ(t,e){return QX(an(t=Ue(t,_t)),i_(e)?e:{next:e})}function ph(t,e){return function(n,r){const i=new Gt;return n.asyncQueue.enqueueAndForget(async()=>SX(await xI(n),r,i)),i.promise}(an(t),e)}function VI(t,e,n){const r=n.docs.get(e._key),i=new Fa(t);return new Yi(t,i,e._key,r,new No(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WJ extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ma(e)}get(e){const n=vs(e,this._firestore),r=new OJ(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return te();const s=i[0];if(s.isFoundDocument())return new yd(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new yd(this._firestore,r,n._key,null,n.converter);throw te()})}set(e,n,r){const i=vs(e,this._firestore),s=am(i.converter,n,r),o=sm(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=vs(e,this._firestore);let o;return o=typeof(n=$(n))=="string"||n instanceof Hs?MI(this._dataReader,"Transaction.update",s._key,n,r,i):DI(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=vs(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=vs(e,this._firestore),r=new Fa(this._firestore);return super.get(e).then(i=>new Yi(this._firestore,r,n._key,i._document,new No(!1,!1),n.converter))}}function HJ(t,e,n){t=Ue(t,_t);const r=Object.assign(Object.assign({},PJ),n);return function(i){if(i.maxAttempts<1)throw new L(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),XX(an(t),i=>e(new WJ(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KJ(){return new hh("deleteField")}function GJ(){return new OI("serverTimestamp")}function zJ(...t){return new mJ("arrayUnion",t)}function YJ(...t){return new vJ("arrayRemove",t)}function QJ(t){return new yJ("increment",t)}(function(t,e=!0){(function(n){mc=n})(Ei),yt(new Be("firestore",(n,{options:r})=>{const i=n.getProvider("app").getImmediate(),s=new _t(i,new eQ(n.getProvider("auth-internal")),new iQ(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),Ze(ES,"3.4.9",t),Ze(ES,"3.4.9","esm2017")})();const XJ="@firebase/firestore-compat",JJ="0.1.18";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new L("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(){if(typeof Uint8Array=="undefined")throw new L("unimplemented","Uint8Arrays are not available in this environment.")}function kC(){if(!aQ())throw new L("unimplemented","Blobs are unavailable in Firestore in this environment.")}class _d{constructor(e){this._delegate=e}static fromBase64String(e){return kC(),new _d(yi.fromBase64String(e))}static fromUint8Array(e){return CC(),new _d(yi.fromUint8Array(e))}toBase64(){return kC(),this._delegate.toBase64()}toUint8Array(){return CC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t){return ZJ(t,["next","error","complete"])}function ZJ(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{enableIndexedDbPersistence(e,n){return sJ(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return oJ(e._delegate)}clearIndexedDbPersistence(e){return aJ(e._delegate)}}class cM{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ad("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){eJ(this._delegate,e,n,r)}enableNetwork(){return cJ(this._delegate)}disableNetwork(){return uJ(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,U1("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return lJ(this._delegate)}onSnapshotsInSync(e){return qJ(this._delegate,e)}get app(){if(!this._appCompat)throw new L("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Yl(this,j1(this._delegate,e))}catch(n){throw xn(n,"collection()","Firestore.collection()")}}doc(e){try{return new yr(this,yp(this._delegate,e))}catch(n){throw xn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Nn(this,tJ(this._delegate,e))}catch(n){throw xn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return HJ(this._delegate,n=>e(new uM(this,n)))}batch(){return an(this._delegate),new dM(new DJ(this._delegate,e=>ph(this._delegate,e)))}loadBundle(e){return dJ(this._delegate,e)}namedQuery(e){return hJ(this._delegate,e).then(n=>n?new Nn(this,n):null)}}class lm extends $I{constructor(e){super();this.firestore=e}convertBytes(e){return new _d(new yi(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return yr.forKey(n,this.firestore,null)}}function t9(t){Q5(t)}class uM{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new lm(e)}get(e){const n=xo(e);return this._delegate.get(n).then(r=>new wd(this._firestore,new Yi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=xo(e);return r?(UI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=xo(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=xo(e);return this._delegate.delete(n),this}}class dM{constructor(e){this._delegate=e}set(e,n,r){const i=xo(e);return r?(UI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=xo(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=xo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class la{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new mu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bd(this._firestore,r),n!=null?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=la.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new la(e,new lm(e),n),i.set(n,s)),s}}la.INSTANCES=new WeakMap;class yr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new lm(e)}static forPath(e,n,r){if(e.length%2!==0)throw new L("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new yr(n,new ut(n._delegate,r,new z(e)))}static forKey(e,n,r){return new yr(n,new ut(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Yl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Yl(this.firestore,j1(this._delegate,e))}catch(n){throw xn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=$(e),e instanceof ut?q1(this._delegate,e):!1}set(e,n){n=UI("DocumentReference.set",n);try{return n?TC(this._delegate,e,n):TC(this._delegate,e)}catch(r){throw xn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?SC(this._delegate,e):SC(this._delegate,e,n,...r)}catch(i){throw xn(i,"updateDoc()","DocumentReference.update()")}}delete(){return BJ(this._delegate)}onSnapshot(...e){const n=hM(e),r=fM(e,i=>new wd(this.firestore,new Yi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return lM(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=LJ(this._delegate):(e==null?void 0:e.source)==="server"?n=FJ(this._delegate):n=MJ(this._delegate),n.then(r=>new wd(this.firestore,new Yi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new yr(this.firestore,e?this._delegate.withConverter(la.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function xn(t,e,n){return t.message=t.message.replace(e,n),t}function hM(t){for(const e of t)if(typeof e=="object"&&!o_(e))return e;return{}}function fM(t,e){var n,r;let i;return o_(t[0])?i=t[0]:o_(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class wd{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new yr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return tM(this._delegate,e._delegate)}}class bd extends wd{data(e){const n=this._delegate.data(e);return X5(n!==void 0),n}}class Nn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new lm(e)}where(e,n,r){try{return new Nn(this.firestore,cs(this._delegate,EJ(e,n,r)))}catch(i){throw xn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Nn(this.firestore,cs(this._delegate,SJ(e,n)))}catch(r){throw xn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Nn(this.firestore,cs(this._delegate,CJ(e)))}catch(n){throw xn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Nn(this.firestore,cs(this._delegate,kJ(e)))}catch(n){throw xn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Nn(this.firestore,cs(this._delegate,AJ(...e)))}catch(n){throw xn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Nn(this.firestore,cs(this._delegate,RJ(...e)))}catch(n){throw xn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Nn(this.firestore,cs(this._delegate,NJ(...e)))}catch(n){throw xn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Nn(this.firestore,cs(this._delegate,xJ(...e)))}catch(n){throw xn(n,"endAt()","Query.endAt()")}}isEqual(e){return W1(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=VJ(this._delegate):(e==null?void 0:e.source)==="server"?n=UJ(this._delegate):n=$J(this._delegate),n.then(r=>new a_(this.firestore,new Ks(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=hM(e),r=fM(e,i=>new a_(this.firestore,new Ks(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return lM(this._delegate,n,r)}withConverter(e){return new Nn(this.firestore,e?this._delegate.withConverter(la.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class n9{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new bd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class a_{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Nn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new n9(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new bd(this._firestore,r))})}isEqual(e){return tM(this._delegate,e._delegate)}}class Yl extends Nn{constructor(e,n){super(e,n);this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new yr(this.firestore,e):null}doc(e){try{return e===void 0?new yr(this.firestore,yp(this._delegate)):new yr(this.firestore,yp(this._delegate,e))}catch(n){throw xn(n,"doc()","CollectionReference.doc()")}}add(e){return jJ(this._delegate,e).then(n=>new yr(this.firestore,n))}isEqual(e){return q1(this._delegate,e._delegate)}withConverter(e){return new Yl(this.firestore,e?this._delegate.withConverter(la.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function xo(t){return Ue(t,ut)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(...e){this._delegate=new Hs(...e)}static documentId(){return new BI(Mt.keyField().canonicalString())}isEqual(e){return e=$(e),e instanceof Hs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this._delegate=e}static serverTimestamp(){const e=GJ();return e._methodName="FieldValue.serverTimestamp",new Io(e)}static delete(){const e=KJ();return e._methodName="FieldValue.delete",new Io(e)}static arrayUnion(...e){const n=zJ(...e);return n._methodName="FieldValue.arrayUnion",new Io(n)}static arrayRemove(...e){const n=YJ(...e);return n._methodName="FieldValue.arrayRemove",new Io(n)}static increment(e){const n=QJ(e);return n._methodName="FieldValue.increment",new Io(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9={Firestore:cM,GeoPoint:rm,Timestamp:Tt,Blob:_d,Transaction:uM,WriteBatch:dM,DocumentReference:yr,DocumentSnapshot:wd,Query:Nn,QueryDocumentSnapshot:bd,QuerySnapshot:a_,CollectionReference:Yl,FieldPath:BI,FieldValue:Io,setLogLevel:t9,CACHE_SIZE_UNLIMITED:iJ};function i9(t,e){t.INTERNAL.registerComponent(new Be("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},r9)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(t){i9(t,(e,n)=>new cM(e,n,new e9)),t.registerVersion(XJ,JJ)}s9(et);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9="type.googleapis.com/google.protobuf.Int64Value",a9="type.googleapis.com/google.protobuf.UInt64Value";function pM(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function l_(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>l_(e));if(typeof t=="function"||typeof t=="object")return pM(t,e=>l_(e));throw new Error("Data cannot be encoded in JSON: "+t)}function wp(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case o9:case a9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>wp(e)):typeof t=="function"||typeof t=="object"?pM(t,e=>wp(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Il extends Et{constructor(e,n,r){super(`${gM}/${e}`,n||"");this.details=r}}function l9(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function c9(t,e){let n=l9(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!AC[o])return new Il("internal","internal");n=AC[o],r=o}const a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=wp(i))}}catch{}return n==="ok"?null:new Il(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(!!this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(){if(this.appCheck){const e=await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(){const e=await this.getAuthToken(),n=await this.getMessagingToken(),r=await this.getAppCheckToken();return{authToken:e,messagingToken:n,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="us-central1";function d9(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Il("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class h9{constructor(e,n,r,i,s=RC,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new u9(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=RC}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function f9(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function p9(t,e,n){return r=>v9(t,e,r,n||{})}function g9(t,e,n){return r=>mM(t,e,r,n||{})}async function m9(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function v9(t,e,n,r){const i=t._url(e);return mM(t,i,n,r)}async function mM(t,e,n,r){n=l_(n);const i={data:n},s={},o=await t.contextProvider.getContext();o.authToken&&(s.Authorization="Bearer "+o.authToken),o.messagingToken&&(s["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=o.appCheckToken);const a=r.timeout||7e4,l=d9(a),c=await Promise.race([m9(e,i,s,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new Il("cancelled","Firebase Functions instance was deleted.");const u=c9(c.status,c.json);if(u)throw u;if(!c.json)throw new Il("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d=="undefined"&&(d=c.json.result),typeof d=="undefined")throw new Il("internal","Response is missing data field.");return{data:wp(d)}}const NC="@firebase/functions",xC="0.8.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9="auth-internal",_9="app-check-internal",w9="messaging-internal";function b9(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(y9),a=r.getProvider(w9),l=r.getProvider(_9);return new h9(s,o,a,l,i,t)};yt(new Be(gM,n,"PUBLIC").setMultipleInstances(!0)),Ze(NC,xC,e),Ze(NC,xC,"esm2017")}function PC(t,e,n){f9($(t),e,n)}function I9(t,e,n){return p9($(t),e,n)}function E9(t,e,n){return g9($(t),e,n)}b9(fetch.bind(self));const T9="@firebase/functions-compat",S9="0.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n){this.app=e,this._delegate=n,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,n){return I9(this._delegate,e,n)}httpsCallableFromURL(e,n){return E9(this._delegate,e,n)}useFunctionsEmulator(e){const n=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(n==null)throw new Et("functions","No origin provided to useFunctionsEmulator()");if(n[2]==null)throw new Et("functions","Port missing in origin provided to useFunctionsEmulator()");return PC(this._delegate,n[1],Number(n[2]))}useEmulator(e,n){return PC(this._delegate,e,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9="us-central1",k9=(t,{instanceIdentifier:e})=>{const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("functions").getImmediate({identifier:e!=null?e:C9});return new vM(n,r)};function A9(){const t={Functions:vM};et.INTERNAL.registerComponent(new Be("functions-compat",k9,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */A9();et.registerVersion(T9,S9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9="/firebase-messaging-sw.js",N9="/firebase-cloud-messaging-push-scope",yM="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",x9="https://fcmregistrations.googleapis.com/v1",_M="google.c.a.c_id",P9="google.c.a.c_l",O9="google.c.a.ts",D9="google.c.a.e";var OC;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(OC||(OC={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Id;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Id||(Id={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function M9(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="fcm_token_details_db",L9=5,DC="fcm_token_object_Store";async function F9(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(av))return null;let e=null;return(await ic(av,L9,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(DC))return;const l=o.objectStore(DC),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(i===2){const u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Ci(u.vapidKey)}}}else if(i===3){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ci(u.auth),p256dh:Ci(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ci(u.vapidKey)}}}else if(i===4){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ci(u.auth),p256dh:Ci(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ci(u.vapidKey)}}}}}})).close(),await fl(av),await fl("fcm_vapid_details_db"),await fl("undefined"),$9(e)?e:null}function $9(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9="firebase-messaging-database",U9=1,ca="firebase-messaging-store";let lv=null;function jI(){return lv||(lv=ic(V9,U9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ca)}}})),lv}async function wM(t){const e=WI(t),r=await(await jI()).transaction(ca).objectStore(ca).get(e);if(r)return r;{const i=await F9(t.appConfig.senderId);if(i)return await qI(t,i),i}}async function qI(t,e){const n=WI(t),i=(await jI()).transaction(ca,"readwrite");return await i.objectStore(ca).put(e,n),await i.done,e}async function B9(t){const e=WI(t),r=(await jI()).transaction(ca,"readwrite");await r.objectStore(ca).delete(e),await r.done}function WI({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Vn=new Un("messaging","Messaging",j9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q9(t,e){const n=await KI(t),r=IM(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(HI(t.appConfig),i)).json()}catch(o){throw Vn.create("token-subscribe-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw Vn.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Vn.create("token-subscribe-no-token");return s.token}async function W9(t,e){const n=await KI(t),r=IM(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${HI(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Vn.create("token-update-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw Vn.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Vn.create("token-update-no-token");return s.token}async function bM(t,e){const n=await KI(t),r={method:"DELETE",headers:n};try{const s=await(await fetch(`${HI(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw Vn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Vn.create("token-unsubscribe-failed",{errorInfo:i})}}function HI({projectId:t}){return`${x9}/projects/${t}/registrations`}async function KI({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function IM({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==yM&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=7*24*60*60*1e3;async function K9(t){const e=await z9(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ci(e.getKey("auth")),p256dh:Ci(e.getKey("p256dh"))},r=await wM(t.firebaseDependencies);if(r){if(Y9(r.subscriptionOptions,n))return Date.now()>=r.createTime+H9?G9(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await bM(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return MC(t.firebaseDependencies,n)}else return MC(t.firebaseDependencies,n)}async function EM(t){const e=await wM(t.firebaseDependencies);e&&(await bM(t.firebaseDependencies,e.token),await B9(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function G9(t,e){try{const n=await W9(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await qI(t.firebaseDependencies,r),n}catch(n){throw await EM(t),n}}async function MC(t,e){const r={token:await q9(t,e),createTime:Date.now(),subscriptionOptions:e};return await qI(t,r),r.token}async function z9(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:M9(e)})}function Y9(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Q9(e,t),X9(e,t),J9(e,t),e}function Q9(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}function X9(t,e){!e.data||(t.data=e.data)}function J9(t,e){if(!e.fcmOptions)return;t.fcmOptions={};const n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);const r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t){return typeof t=="object"&&!!t&&_M in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */TM("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");TM("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function TM(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(t){if(!t||!t.options)throw cv("App Configuration Object");if(!t.name)throw cv("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw cv(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function cv(t){return Vn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=e7(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SM(t){try{t.swRegistration=await navigator.serviceWorker.register(R9,{scope:N9}),t.swRegistration.update().catch(()=>{})}catch(e){throw Vn.create("failed-service-worker-registration",{browserErrorMessage:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n7(t,e){if(!e&&!t.swRegistration&&await SM(t),!(!e&&!!t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Vn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r7(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=yM)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CM(t,e){if(!navigator)throw Vn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Vn.create("permission-blocked");return await r7(t,e==null?void 0:e.vapidKey),await n7(t,e==null?void 0:e.serviceWorkerRegistration),K9(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i7(t,e,n){const r=s7(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[_M],message_name:n[P9],message_time:n[O9],message_device_time:Math.floor(Date.now()/1e3)})}function s7(t){switch(t){case Id.NOTIFICATION_CLICKED:return"notification_open";case Id.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o7(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Id.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(LC(n)):t.onMessageHandler.next(LC(n)));const r=n.data;Z9(r)&&r[D9]==="1"&&await i7(t,n.messageType,r)}const FC="@firebase/messaging",$C="0.9.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7=t=>{const e=new t7(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>o7(e,n)),e},l7=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>CM(e,r)}};function c7(){yt(new Be("messaging",a7,"PUBLIC")),yt(new Be("messaging-internal",l7,"PRIVATE")),Ze(FC,$C),Ze(FC,$C,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(t){if(!navigator)throw Vn.create("only-available-in-window");return t.swRegistration||await SM(t),EM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(t,e){if(!navigator)throw Vn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}async function h7(t,e){return t=$(t),CM(t,e)}function f7(t){return t=$(t),u7(t)}function p7(t,e){return t=$(t),d7(t,e)}c7();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",g7="https://fcmregistrations.googleapis.com/v1",AM="FCM_MSG",m7="google.c.a.c_id",v7=3,y7=1;var bp;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(bp||(bp={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ip;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ip||(Ip={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _7(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="fcm_token_details_db",w7=5,VC="fcm_token_object_Store";async function b7(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(uv))return null;let e=null;return(await ic(uv,w7,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(VC))return;const l=o.objectStore(VC),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(i===2){const u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:ki(u.vapidKey)}}}else if(i===3){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:ki(u.auth),p256dh:ki(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:ki(u.vapidKey)}}}else if(i===4){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:ki(u.auth),p256dh:ki(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:ki(u.vapidKey)}}}}}})).close(),await fl(uv),await fl("fcm_vapid_details_db"),await fl("undefined"),I7(e)?e:null}function I7(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7="firebase-messaging-database",T7=1,ua="firebase-messaging-store";let dv=null;function GI(){return dv||(dv=ic(E7,T7,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ua)}}})),dv}async function zI(t){const e=QI(t),r=await(await GI()).transaction(ua).objectStore(ua).get(e);if(r)return r;{const i=await b7(t.appConfig.senderId);if(i)return await YI(t,i),i}}async function YI(t,e){const n=QI(t),i=(await GI()).transaction(ua,"readwrite");return await i.objectStore(ua).put(e,n),await i.done,e}async function S7(t){const e=QI(t),r=(await GI()).transaction(ua,"readwrite");await r.objectStore(ua).delete(e),await r.done}function QI({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ui=new Un("messaging","Messaging",C7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k7(t,e){const n=await JI(t),r=NM(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(XI(t.appConfig),i)).json()}catch(o){throw ui.create("token-subscribe-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw ui.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw ui.create("token-subscribe-no-token");return s.token}async function A7(t,e){const n=await JI(t),r=NM(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${XI(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw ui.create("token-update-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw ui.create("token-update-failed",{errorInfo:o})}if(!s.token)throw ui.create("token-update-no-token");return s.token}async function RM(t,e){const n=await JI(t),r={method:"DELETE",headers:n};try{const s=await(await fetch(`${XI(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw ui.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw ui.create("token-unsubscribe-failed",{errorInfo:i})}}function XI({projectId:t}){return`${g7}/projects/${t}/registrations`}async function JI({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function NM({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==kM&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7=7*24*60*60*1e3;async function N7(t){const e=await P7(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:ki(e.getKey("auth")),p256dh:ki(e.getKey("p256dh"))},r=await zI(t.firebaseDependencies);if(r){if(O7(r.subscriptionOptions,n))return Date.now()>=r.createTime+R7?x7(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await RM(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return UC(t.firebaseDependencies,n)}else return UC(t.firebaseDependencies,n)}async function c_(t){const e=await zI(t.firebaseDependencies);e&&(await RM(t.firebaseDependencies,e.token),await S7(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function x7(t,e){try{const n=await A7(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await YI(t.firebaseDependencies,r),n}catch(n){throw await c_(t),n}}async function UC(t,e){const r={token:await k7(t,e),createTime:Date.now(),subscriptionOptions:e};return await YI(t,r),r.token}async function P7(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_7(e)})}function O7(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return M7(e,t),L7(e,t),F7(e,t),e}function M7(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}function L7(t,e){!e.data||(t.data=e.data)}function F7(t,e){if(!e.fcmOptions)return;t.fcmOptions={};const n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);const r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(t){return typeof t=="object"&&!!t&&m7 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xM("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");xM("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");async function U7(t,e){const n=B7(e,await t.firebaseDependencies.installations.getId());j7(t,n)}function B7(t,e){var n,r;const i={};return t.from&&(i.project_number=t.from),t.fcmMessageId&&(i.message_id=t.fcmMessageId),i.instance_id=e,t.notification?i.message_type=bp.DISPLAY_NOTIFICATION.toString():i.message_type=bp.DATA_MESSAGE.toString(),i.sdk_platform=v7.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),t.collapse_key&&(i.collapse_key=t.collapse_key),i.event=y7.toString(),!((n=t.fcmOptions)===null||n===void 0)&&n.analytics_label&&(i.analytics_label=(r=t.fcmOptions)===null||r===void 0?void 0:r.analytics_label),i}function j7(t,e){const n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(e),t.logEvents.push(n)}function xM(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q7(t,e){var n,r;const{newSubscription:i}=t;if(!i){await c_(e);return}const s=await zI(e.firebaseDependencies);await c_(e),e.vapidKey=(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:kM,await N7(e)}async function W7(t,e){const n=G7(t);if(!n)return;e.deliveryMetricsExportedToBigQueryEnabled&&await U7(e,n);const r=await PM();if(Y7(r))return Q7(r,n);if(n.notification&&await X7(K7(n)),!!e&&e.onBackgroundMessageHandler){const i=D7(n);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(i):e.onBackgroundMessageHandler.next(i)}}async function H7(t){var e,n;const r=(n=(e=t.notification)===null||e===void 0?void 0:e.data)===null||n===void 0?void 0:n[AM];if(r){if(t.action)return}else return;t.stopImmediatePropagation(),t.notification.close();const i=J7(r);if(!i)return;const s=new URL(i,self.location.href),o=new URL(self.location.origin);if(s.host!==o.host)return;let a=await z7(s);if(a?a=await a.focus():(a=await self.clients.openWindow(i),await V7(3e3)),!!a)return r.messageType=Ip.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,a.postMessage(r)}function K7(t){const e=Object.assign({},t.notification);return e.data={[AM]:t},e}function G7({data:t}){if(!t)return null;try{return t.json()}catch{return null}}async function z7(t){const e=await PM();for(const n of e){const r=new URL(n.url,self.location.href);if(t.host===r.host)return n}return null}function Y7(t){return t.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function Q7(t,e){e.isFirebaseMessaging=!0,e.messageType=Ip.PUSH_RECEIVED;for(const n of t)n.postMessage(e)}function PM(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function X7(t){var e;const{actions:n}=t,{maxActions:r}=Notification;return n&&r&&n.length>r&&console.warn(`This browser only supports ${r} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=t.title)!==null&&e!==void 0?e:"",t)}function J7(t){var e,n,r;const i=(n=(e=t.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&n!==void 0?n:(r=t.notification)===null||r===void 0?void 0:r.click_action;return i||($7(t.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z7(t){if(!t||!t.options)throw hv("App Configuration Object");if(!t.name)throw hv("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw hv(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function hv(t){return ui.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=Z7(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tZ=t=>{const e=new eZ(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return self.addEventListener("push",n=>{n.waitUntil(W7(n,e))}),self.addEventListener("pushsubscriptionchange",n=>{n.waitUntil(q7(n,e))}),self.addEventListener("notificationclick",n=>{n.waitUntil(H7(n))}),e};function nZ(){yt(new Be("messaging-sw",tZ,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rZ(t,e){if(self.document!==void 0)throw ui.create("only-available-in-sw");return t.onBackgroundMessageHandler=e,()=>{t.onBackgroundMessageHandler=null}}function iZ(t,e){return t=$(t),rZ(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nZ();const sZ="@firebase/messaging-compat",oZ="0.1.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(){return self&&"ServiceWorkerGlobalScope"in self?cZ():lZ()}function lZ(){return typeof window!="undefined"&&zn()&&Xp()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function cZ(){return zn()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class BC{constructor(e,n){this.app=e,this._delegate=n,this.app=e,this._delegate=n}async getToken(e){return h7(this._delegate,e)}async deleteToken(){return f7(this._delegate)}onMessage(e){return p7(this._delegate,e)}onBackgroundMessage(e){return iZ(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uZ=t=>self&&"ServiceWorkerGlobalScope"in self?new BC(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging-sw").getImmediate()):new BC(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging").getImmediate()),dZ={isSupported:aZ};function hZ(){et.INTERNAL.registerComponent(new Be("messaging-compat",uZ,"PUBLIC").setServiceProps(dZ))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hZ();et.registerVersion(sZ,oZ);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM="firebasestorage.googleapis.com",DM="storageBucket",fZ=2*60*1e3,pZ=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt extends Et{constructor(e,n){super(fv(e),`Firebase Storage: ${n} (${fv(e)})`);this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wt.prototype)}_codeEquals(e){return fv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function fv(t){return"storage/"+t}function ZI(){const t="An unknown error occurred, please check the error payload for server response.";return new wt("unknown",t)}function gZ(t){return new wt("object-not-found","Object '"+t+"' does not exist.")}function mZ(t){return new wt("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vZ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new wt("unauthenticated",t)}function yZ(){return new wt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function _Z(t){return new wt("unauthorized","User does not have permission to access '"+t+"'.")}function wZ(){return new wt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function MM(){return new wt("canceled","User canceled the upload/download.")}function bZ(t){return new wt("invalid-url","Invalid URL '"+t+"'.")}function IZ(t){return new wt("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function EZ(){return new wt("no-default-bucket","No default bucket found. Did you set the '"+DM+"' property when initializing the app?")}function LM(){return new wt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function TZ(){return new wt("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function SZ(){return new wt("no-download-url","The given file does not have any download URLs.")}function El(t){return new wt("invalid-argument",t)}function FM(){return new wt("app-deleted","The Firebase app was deleted.")}function $M(t){return new wt("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vu(t,e){return new wt("invalid-format","String does not match format '"+t+"': "+e)}function jc(t){throw new wt("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=En.makeFromUrl(e,n)}catch{return new En(e,"")}if(r.path==="")return r;throw IZ(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${u}/b/${i}/o${h}`,"i"),p={bucket:1,path:3},g=n===OM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,m="([^?#]*)",v=new RegExp(`^https?://${g}/${i}/${m}`,"i"),T=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<T.length;C++){const S=T[C],A=S.regex.exec(e);if(A){const k=A[S.indices.bucket];let P=A[S.indices.path];P||(P=""),r=new En(k,P),S.postModify(r);break}}if(r==null)throw bZ(e);return r}}class CZ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kZ(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...m){c||(c=!0,e.apply(null,m))}function d(m){i=setTimeout(()=>{i=null,t(f,l())},m)}function h(){s&&clearTimeout(s)}function f(m,...v){if(c){h();return}if(m){h(),u.call(null,m,...v);return}if(l()||o){h(),u.call(null,m,...v);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,d(T)}let p=!1;function g(m){p||(p=!0,h(),!c&&(i!==null?(m||(a=2),clearTimeout(i),d(0)):m||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function AZ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RZ(t){return t!==void 0}function NZ(t){return typeof t=="function"}function xZ(t){return typeof t=="object"&&!Array.isArray(t)}function cm(t){return typeof t=="string"||t instanceof String}function jC(t){return eE()&&t instanceof Blob}function eE(){return typeof Blob!="undefined"}function u_(t,e,n,r){if(r<e)throw El(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw El(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function VM(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Vo||(Vo={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{constructor(e,n,r,i,s,o,a,l,c,u,d){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,f)=>{this.resolve_=h,this.reject_=f,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new jh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Vo.NO_ERROR,l=s.getStatus();if(!a||this.isRetryStatusCode_(l)){const u=s.getErrorCode()===Vo.ABORT;r(!1,new jh(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new jh(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());RZ(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=ZI();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?FM():MM();o(l)}else{const l=wZ();o(l)}};this.canceled_?n(!1,new jh(!1,null,!0)):this.backoffId_=kZ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AZ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=this.additionalRetryCodes_.indexOf(e)!==-1;return n||i||s}}class jh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function OZ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function DZ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function MZ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function LZ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function FZ(t,e,n,r,i,s){const o=VM(t.urlParams),a=t.url+o,l=Object.assign({},t.headers);return MZ(l,e),OZ(l,n),DZ(l,s),LZ(l,r),new PZ(a,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Z(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function VZ(...t){const e=$Z();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(eE())return new Blob(t);throw new wt("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function UZ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BZ(t){return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pv{constructor(e,n){this.data=e,this.contentType=n||null}}function UM(t,e){switch(t){case _r.RAW:return new pv(BM(e));case _r.BASE64:case _r.BASE64URL:return new pv(jM(t,e));case _r.DATA_URL:return new pv(qZ(e),WZ(e))}throw ZI()}function BM(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function jZ(t){let e;try{e=decodeURIComponent(t)}catch{throw vu(_r.DATA_URL,"Malformed data URL.")}return BM(e)}function jM(t,e){switch(t){case _r.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw vu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case _r.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw vu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=BZ(e)}catch{throw vu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class qM{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vu(_r.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=HZ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function qZ(t){const e=new qM(t);return e.base64?jM(_r.BASE64,e.rest):jZ(e.rest)}function WZ(t){return new qM(t).contentType}function HZ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){let r=0,i="";jC(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(jC(this.data_)){const r=this.data_,i=UZ(r,e,n);return i===null?null:new xi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new xi(r,!0)}}static getBlob(...e){if(eE()){const n=e.map(r=>r instanceof xi?r.data_:r);return new xi(VZ.apply(null,n))}else{const n=e.map(o=>cm(o)?UM(_r.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new xi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t){let e;try{e=JSON.parse(t)}catch{return null}return xZ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KZ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function GZ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function WM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zZ(t,e){return e}class An{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||zZ}}let qh=null;function YZ(t){return!cm(t)||t.length<2?t:WM(t)}function um(){if(qh)return qh;const t=[];t.push(new An("bucket")),t.push(new An("generation")),t.push(new An("metageneration")),t.push(new An("name","fullPath",!0));function e(s,o){return YZ(o)}const n=new An("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new An("size");return i.xform=r,t.push(i),t.push(new An("timeCreated")),t.push(new An("updated")),t.push(new An("md5Hash",null,!0)),t.push(new An("cacheControl",null,!0)),t.push(new An("contentDisposition",null,!0)),t.push(new An("contentEncoding",null,!0)),t.push(new An("contentLanguage",null,!0)),t.push(new An("contentType",null,!0)),t.push(new An("metadata","customMetadata",!0)),qh=t,qh}function QZ(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new En(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function XZ(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return QZ(r,t),r}function HM(t,e,n){const r=tE(e);return r===null?null:XZ(t,r,n)}function JZ(t,e,n,r){const i=tE(e);if(i===null||!cm(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,d=t.fullPath,h="/b/"+o(u)+"/o/"+o(d),f=ro(h,n,r),p=VM({alt:"media",token:c});return f+p})[0]}function nE(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="prefixes",WC="items";function ZZ(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[qC])for(const i of n[qC]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new En(e,s));r.prefixes.push(o)}if(n[WC])for(const i of n[WC]){const s=t._makeStorageReference(new En(e,i.name));r.items.push(s)}return r}function eee(t,e,n){const r=tE(n);return r===null?null:ZZ(t,e,r)}class is{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t){if(!t)throw ZI()}function dm(t,e){function n(r,i){const s=HM(t,i,e);return di(s!==null),s}return n}function tee(t,e){function n(r,i){const s=eee(t,e,i);return di(s!==null),s}return n}function nee(t,e){function n(r,i){const s=HM(t,i,e);return di(s!==null),JZ(s,i,t.host,t._protocol)}return n}function Ic(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=yZ():i=vZ():n.getStatus()===402?i=mZ(t.bucket):n.getStatus()===403?i=_Z(t.path):i=r,i.serverResponse=r.serverResponse,i}return e}function hm(t){const e=Ic(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=gZ(t.path)),s.serverResponse=i.serverResponse,s}return n}function KM(t,e,n){const r=e.fullServerUrl(),i=ro(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new is(i,s,dm(t,n),o);return a.errorHandler=hm(e),a}function ree(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=ro(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new is(a,l,tee(t,e.bucket),c);return u.urlParams=s,u.errorHandler=Ic(e),u}function iee(t,e,n){const r=e.fullServerUrl(),i=ro(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new is(i,s,nee(t,n),o);return a.errorHandler=hm(e),a}function see(t,e,n,r){const i=e.fullServerUrl(),s=ro(i,t.host,t._protocol),o="PATCH",a=nE(n,r),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,u=new is(s,o,dm(t,r),c);return u.headers=l,u.body=a,u.errorHandler=hm(e),u}function oee(t,e){const n=e.fullServerUrl(),r=ro(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new is(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=hm(e),a}function aee(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function GM(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=aee(null,e)),r}function lee(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let C=0;C<2;C++)T=T+Math.random().toString().slice(2);return T}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=GM(e,r,i),u=nE(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",f=xi.getBlob(d,r,h);if(f===null)throw LM();const p={name:c.fullPath},g=ro(s,t.host,t._protocol),m="POST",v=t.maxUploadRetryTime,b=new is(g,m,dm(t,n),v);return b.urlParams=p,b.headers=o,b.body=f.uploadData(),b.errorHandler=Ic(e),b}class Ep{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function rE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{di(!1)}return di(!!n&&(e||["active"]).indexOf(n)!==-1),n}function cee(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=GM(e,r,i),a={name:o.fullPath},l=ro(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=nE(o,n),h=t.maxUploadRetryTime;function f(g){rE(g);let m;try{m=g.getResponseHeader("X-Goog-Upload-URL")}catch{di(!1)}return di(cm(m)),m}const p=new is(l,c,f,h);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=Ic(e),p}function uee(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const u=rE(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{di(!1)}d||di(!1);const h=Number(d);return di(!isNaN(h)),new Ep(h,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new is(n,o,s,a);return l.headers=i,l.errorHandler=Ic(e),l}const HC=256*1024;function dee(t,e,n,r,i,s,o,a){const l=new Ep(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw TZ();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u,p={"X-Goog-Upload-Command":u===c?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},g=r.slice(d,h);if(g===null)throw LM();function m(C,S){const A=rE(C,["active","final"]),k=l.current+u,P=r.size();let O;return A==="final"?O=dm(e,s)(C,S):O=null,new Ep(k,P,A==="final",O)}const v="POST",b=e.maxUploadRetryTime,T=new is(n,v,m,b);return T.headers=p,T.body=g.uploadData(),T.progressCallback=a||null,T.errorHandler=Ic(t),T}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hee={STATE_CHANGED:"state_changed"},Pn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gv(t){switch(t){case"running":case"pausing":case"canceling":return Pn.RUNNING;case"paused":return Pn.PAUSED;case"success":return Pn.SUCCESS;case"canceled":return Pn.CANCELED;case"error":return Pn.ERROR;default:return Pn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fee{constructor(e,n,r){if(NZ(e)||n!=null||r!=null)this.next=e,this.error=n!=null?n:void 0,this.complete=r!=null?r:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class pee{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw jc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw jc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class gee extends pee{initXhr(){this.xhr_.responseType="text"}}function ni(){return new gee}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=um(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=cee(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ni,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=uee(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ni,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=HC*this._chunkMultiplier,n=new Ep(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=dee(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ni,i,s);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){HC*this._chunkMultiplier<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=KM(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ni,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=lee(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ni,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":this._state=e,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=e,this._request!==void 0&&this._request.cancel();break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=MM(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=gv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new fee(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(gv(this._state)){case Pn.SUCCESS:Qa(this._resolve.bind(null,this.snapshot))();break;case Pn.CANCELED:case Pn.ERROR:const n=this._reject;Qa(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(gv(this._state)){case Pn.RUNNING:case Pn.PAUSED:e.next&&Qa(e.next.bind(e,this.snapshot))();break;case Pn.SUCCESS:e.complete&&Qa(e.complete.bind(e))();break;case Pn.CANCELED:case Pn.ERROR:e.error&&Qa(e.error.bind(e,this._error))();break;default:e.error&&Qa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){this._service=e,n instanceof En?this._location=n:this._location=En.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new da(e,n)}get root(){const e=new En(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WM(this._location.path)}get storage(){return this._service}get parent(){const e=KZ(this._location.path);if(e===null)return null;const n=new En(this._location.bucket,e);return new da(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw $M(e)}}function mee(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new zM(t,new xi(e),n)}function vee(t){const e={prefixes:[],items:[]};return YM(t,e).then(()=>e)}async function YM(t,e,n){const i=await QM(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await YM(t,e,i.nextPageToken)}function QM(t,e){e!=null&&typeof e.maxResults=="number"&&u_("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=ree(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,ni)}function yee(t){t._throwIfRoot("getMetadata");const e=KM(t.storage,t._location,um());return t.storage.makeRequestWithTokens(e,ni)}function _ee(t,e){t._throwIfRoot("updateMetadata");const n=see(t.storage,t._location,e,um());return t.storage.makeRequestWithTokens(n,ni)}function wee(t){t._throwIfRoot("getDownloadURL");const e=iee(t.storage,t._location,um());return t.storage.makeRequestWithTokens(e,ni).then(n=>{if(n===null)throw SZ();return n})}function bee(t){t._throwIfRoot("deleteObject");const e=oee(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ni)}function XM(t,e){const n=GZ(t._location.path,e),r=new En(t._location.bucket,n);return new da(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iee(t){return/^[A-Za-z]+:\/\//.test(t)}function Eee(t,e){return new da(t,e)}function JM(t,e){if(t instanceof iE){const n=t;if(n._bucket==null)throw EZ();const r=new da(n,n._bucket);return e!=null?JM(r,e):r}else return e!==void 0?XM(t,e):t}function Tee(t,e){if(e&&Iee(e)){if(t instanceof iE)return Eee(t,e);throw El("To use ref(service, url), the first argument must be a Storage instance.")}else return JM(t,e)}function KC(t,e){const n=e==null?void 0:e[DM];return n==null?null:En.makeFromBucketSpec(n,t)}function See(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ow(i,t.app.options.projectId))}class iE{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=OM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fZ,this._maxUploadRetryTime=pZ,this._requests=new Set,i!=null?this._bucket=En.makeFromBucketSpec(i,this._host):this._bucket=KC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,e):this._bucket=KC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){u_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){u_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new da(this,e)}_makeRequest(e,n,r,i){if(this._deleted)return new CZ(FM());{const s=FZ(e,this._appId,r,i,n,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const GC="@firebase/storage",zC="0.9.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cee="storage";function kee(t,e,n){return t=$(t),mee(t,e,n)}function Aee(t){return t=$(t),yee(t)}function Ree(t,e){return t=$(t),_ee(t,e)}function Nee(t,e){return t=$(t),QM(t,e)}function xee(t){return t=$(t),vee(t)}function Pee(t){return t=$(t),wee(t)}function Oee(t){return t=$(t),bee(t)}function YC(t,e){return t=$(t),Tee(t,e)}function Dee(t,e){return XM(t,e)}function Mee(t,e,n,r={}){See(t,e,n,r)}function Lee(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new iE(n,r,i,e,Ei)}function Fee(){yt(new Be(Cee,Lee,"PUBLIC").setMultipleInstances(!0)),Ze(GC,zC,""),Ze(GC,zC,"esm2017")}Fee();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Wh(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Wh(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new Wh(o,this,this._ref)):s={next:n.next?o=>n.next(new Wh(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class XC{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new ji(e,this._service))}get items(){return this._delegate.items.map(e=>new ji(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=Dee(this._delegate,e);return new ji(n,this.storage)}get root(){return new ji(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new ji(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new QC(kee(this._delegate,e,n),this)}putString(e,n=_r.RAW,r){this._throwIfRoot("putString");const i=UM(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new QC(new zM(this._delegate,new xi(i.data,!0),s),this)}listAll(){return xee(this._delegate).then(e=>new XC(e,this.storage))}list(e){return Nee(this._delegate,e||void 0).then(n=>new XC(n,this.storage))}getMetadata(){return Aee(this._delegate)}updateMetadata(e){return Ree(this._delegate,e)}getDownloadURL(){return Pee(this._delegate)}delete(){return this._throwIfRoot("delete"),Oee(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw $M(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(JC(e))throw El("ref() expected a child path but got a URL, use refFromURL instead.");return new ji(YC(this._delegate,e),this)}refFromURL(e){if(!JC(e))throw El("refFromURL() expected a full URL but got a child path, use ref() instead.");try{En.makeFromUrl(e,this._delegate.host)}catch{throw El("refFromUrl() expected a valid full URL but got an invalid one.")}return new ji(YC(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){Mee(this._delegate,e,n,r)}}function JC(t){return/^[A-Za-z]+:\/\//.test(t)}const $ee="@firebase/storage-compat",Vee="0.1.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uee="storage-compat";function Bee(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new ZM(n,r)}function jee(t){const e={TaskState:Pn,TaskEvent:hee,StringFormat:_r,Storage:ZM,Reference:ji};t.INTERNAL.registerComponent(new Be(Uee,Bee,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion($ee,Vee)}jee(et);const ZC="@firebase/performance",d_="0.5.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=d_,qee="FB-PERF-TRACE-START",Wee="FB-PERF-TRACE-STOP",h_="FB-PERF-TRACE-MEASURE",tL="_wt_",nL="_fp",rL="_fcp",iL="_fid",sL="@firebase/performance/config",oL="@firebase/performance/configexpire",Hee="performance",aL="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kee={["trace started"]:"Trace {$traceName} was started before.",["trace stopped"]:"Trace {$traceName} is not running.",["nonpositive trace startTime"]:"Trace {$traceName} startTime should be positive.",["nonpositive trace duration"]:"Trace {$traceName} duration should be positive.",["no window"]:"Window is not available.",["no app id"]:"App id is not available.",["no project id"]:"Project id is not available.",["no api key"]:"Api key is not available.",["invalid cc log"]:"Attempted to queue invalid cc event",["FB not default"]:"Performance can only start when Firebase app instance is the default one.",["RC response not ok"]:"RC response is not ok",["invalid attribute name"]:"Attribute name {$attributeName} is invalid.",["invalid attribute value"]:"Attribute value {$attributeValue} is invalid.",["invalid custom metric name"]:"Custom metric name {$customMetricName} is invalid",["invalid String merger input"]:"Input for String merger is invalid, contact support team to resolve.",["already initialized"]:"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},wn=new Un(Hee,aL,Kee);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new bi(aL);_i.logLevel=Te.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mv,lL;class Yt{constructor(e){if(this.window=e,!e)throw wn.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Xp()?(_i.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):zn()?!0:(_i.info("IndexedDB is not supported by current browswer"),!1)}setupObserver(e,n){if(!this.PerformanceObserver)return;new this.PerformanceObserver(i=>{for(const s of i.getEntries())n(s)}).observe({entryTypes:[e]})}static getInstance(){return mv===void 0&&(mv=new Yt(lL)),mv}}function Gee(t){lL=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cL;function zee(t){const e=t.getId();return e.then(n=>{cL=n}),e}function sE(){return cL}function Yee(t){const e=t.getToken();return e.then(n=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(t,e){const n=t.length-e.length;if(n<0||n>1)throw wn.create("invalid String merger input");const r=[];for(let i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vv;class or{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ek("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ek("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return vv===void 0&&(vv=new or),vv}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tl;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"})(Tl||(Tl={}));const Qee=["firebase_","google_","ga_"],Xee=new RegExp("^[a-zA-Z]\\w*$"),Jee=40,Zee=100;function ete(){const t=Yt.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function uL(){switch(Yt.getInstance().document.visibilityState){case"visible":return Tl.VISIBLE;case"hidden":return Tl.HIDDEN;default:return Tl.UNKNOWN}}function tte(){const e=Yt.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function nte(t){return t.length===0||t.length>Jee?!1:!Qee.some(n=>t.startsWith(n))&&!!t.match(Xee)}function rte(t){return t.length!==0&&t.length<=Zee}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t){var e;const n=(e=t.options)===null||e===void 0?void 0:e.appId;if(!n)throw wn.create("no app id");return n}function ite(t){var e;const n=(e=t.options)===null||e===void 0?void 0:e.projectId;if(!n)throw wn.create("no project id");return n}function ste(t){var e;const n=(e=t.options)===null||e===void 0?void 0:e.apiKey;if(!n)throw wn.create("no api key");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ote="0.0.1",ate={loggingEnabled:!0},lte="FIREBASE_INSTALLATIONS_AUTH";function cte(t,e){const n=ute();return n?(tk(n),Promise.resolve()):fte(t,e).then(tk).then(r=>dte(r),()=>{})}function ute(){const t=Yt.getInstance().localStorage;if(!t)return;const e=t.getItem(oL);if(!e||!pte(e))return;const n=t.getItem(sL);if(!!n)try{return JSON.parse(n)}catch{return}}function dte(t){const e=Yt.getInstance().localStorage;!t||!e||(e.setItem(sL,JSON.stringify(t)),e.setItem(oL,String(Date.now()+or.getInstance().configTimeToLive*60*60*1e3)))}const hte="Could not fetch config, will use default configs";function fte(t,e){return Yee(t.installations).then(n=>{const r=ite(t.app),i=ste(t.app),s=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,o=new Request(s,{method:"POST",headers:{Authorization:`${lte} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:dL(t.app),app_version:eL,sdk_version:ote})});return fetch(o).then(a=>{if(a.ok)return a.json();throw wn.create("RC response not ok")})}).catch(()=>{_i.info(hte)})}function tk(t){if(!t)return t;const e=or.getInstance(),n=t.entries||{};return n.fpr_enabled!==void 0?e.loggingEnabled=String(n.fpr_enabled)==="true":e.loggingEnabled=ate.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),n.fpr_vc_network_request_sampling_rate!==void 0&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),n.fpr_vc_trace_sampling_rate!==void 0&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=nk(e.tracesSamplingRate),e.logNetworkAfterSampling=nk(e.networkRequestsSamplingRate),t}function pte(t){return Number(t)>Date.now()}function nk(t){return Math.random()<=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oE=1,yv;function hL(t){return oE=2,yv=yv||mte(t),yv}function gte(){return oE===3}function mte(t){return vte().then(()=>zee(t.installations)).then(e=>cte(t,e)).then(()=>rk(),()=>rk())}function vte(){const t=Yt.getInstance().document;return new Promise(e=>{if(t&&t.readyState!=="complete"){const n=()=>{t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function rk(){oE=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=10*1e3,yte=5.5*1e3,fL=3,_te=1e3;let Tp=fL,ks=[],ik=!1;function wte(){ik||(fm(yte),ik=!0)}function fm(t){setTimeout(()=>{if(Tp!==0){if(!ks.length)return fm(aE);bte()}},t)}function bte(){const t=ks.splice(0,_te),e=t.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:or.getInstance().logSource,log_event:e};Ite(n,t).catch(()=>{ks=[...t,...ks],Tp--,_i.info(`Tries left: ${Tp}.`),fm(aE)})}function Ite(t,e){return Ete(t).then(n=>(n.ok||_i.info("Call to Firebase backend failed."),n.json())).then(n=>{const r=Number(n.nextRequestWaitMillis);let i=aE;isNaN(r)||(i=Math.max(r,i));const s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(ks=[...e,...ks],_i.info("Retry transport request later.")),Tp=fL,fm(i)})}function Ete(t){const e=or.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function Tte(t){if(!t.eventTime||!t.message)throw wn.create("invalid cc log");ks=[...ks,t]}function Ste(t){return(...e)=>{const n=t(...e);Tte({message:n,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _v;function pL(t,e){_v||(_v=Ste(kte)),_v(t,e)}function Hh(t){const e=or.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||!Yt.getInstance().requiredApisAvailable()||t.isAuto&&uL()!==Tl.VISIBLE||(gte()?wv(t):hL(t.performanceController).then(()=>wv(t),()=>wv(t)))}function wv(t){if(!sE())return;const e=or.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>pL(t,1),0)}function Cte(t){const e=or.getInstance();if(!e.instrumentationEnabled)return;const n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n===r||n===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>pL(t,0),0)}function kte(t,e){return e===0?Ate(t):Rte(t)}function Ate(t){const e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:gL(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}function Rte(t){const e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);const n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);const r={application_info:gL(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}function gL(t){return{google_app_id:dL(t),app_instance_id:sE(),web_app_info:{sdk_version:eL,page_url:Yt.getInstance().getUrl(),service_worker_status:ete(),visibility_state:uL(),effective_connection_type:tte()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nte=100,xte="_",Pte=[nL,rL,iL];function Ote(t,e){return t.length===0||t.length>Nte?!1:e&&e.startsWith(tL)&&Pte.indexOf(t)>-1||!t.startsWith(xte)}function Dte(t){const e=Math.floor(t);return e<t&&_i.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r=!1,i){this.performanceController=e,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=Yt.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${qee}-${this.randomId}-${this.name}`,this.traceStopMark=`${Wee}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${h_}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw wn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw wn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Hh(this)}record(e,n,r){if(e<=0)throw wn.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw wn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));Hh(this)}incrementMetric(e,n=1){this.counters[e]===void 0?this.putMetric(e,n):this.putMetric(e,this.counters[e]+n)}putMetric(e,n){if(Ote(e,this.name))this.counters[e]=Dte(n!=null?n:0);else throw wn.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,n){const r=nte(e),i=rte(n);if(r&&i){this.customAttributes[e]=n;return}if(!r)throw wn.create("invalid attribute name",{attributeName:e});if(!i)throw wn.create("invalid attribute value",{attributeValue:n})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,n,r,i){const s=Yt.getInstance().getUrl();if(!s)return;const o=new As(e,tL+s,!0),a=Math.floor(Yt.getInstance().getTimeOrigin()*1e3);o.setStartTime(a),n&&n[0]&&(o.setDuration(Math.floor(n[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(n[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(n[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(n[0].loadEventEnd*1e3)));const l="first-paint",c="first-contentful-paint";if(r){const u=r.find(h=>h.name===l);u&&u.startTime&&o.putMetric(nL,Math.floor(u.startTime*1e3));const d=r.find(h=>h.name===c);d&&d.startTime&&o.putMetric(rL,Math.floor(d.startTime*1e3)),i&&o.putMetric(iL,Math.floor(i*1e3))}Hh(o)}static createUserTimingTrace(e,n){const r=new As(e,n,!1,n);Hh(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t,e){const n=e;if(!n||n.responseStart===void 0)return;const r=Yt.getInstance().getTimeOrigin(),i=Math.floor((n.startTime+r)*1e3),s=n.responseStart?Math.floor((n.responseStart-n.startTime)*1e3):void 0,o=Math.floor((n.responseEnd-n.startTime)*1e3),a=n.name&&n.name.split("?")[0],l={performanceController:t,url:a,responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o};Cte(l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mte=5e3;function ok(t){!sE()||(setTimeout(()=>Fte(t),0),setTimeout(()=>Lte(t),0),setTimeout(()=>$te(t),0))}function Lte(t){const e=Yt.getInstance(),n=e.getEntriesByType("resource");for(const r of n)sk(t,r);e.setupObserver("resource",r=>sk(t,r))}function Fte(t){const e=Yt.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{As.createOobTrace(t,n,r),i=void 0},Mte);e.onFirstInputDelay(s=>{i&&(clearTimeout(i),As.createOobTrace(t,n,r,s))})}else As.createOobTrace(t,n,r)}function $te(t){const e=Yt.getInstance(),n=e.getEntriesByType("measure");for(const r of n)ak(t,r);e.setupObserver("measure",r=>ak(t,r))}function ak(t,e){const n=e.name;n.substring(0,h_.length)!==h_&&As.createUserTimingTrace(t,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vte{constructor(e,n){this.app=e,this.installations=n,this.initialized=!1}_init(e){this.initialized||((e==null?void 0:e.dataCollectionEnabled)!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),(e==null?void 0:e.instrumentationEnabled)!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),Yt.getInstance().requiredApisAvailable()?xd().then(n=>{n&&(wte(),hL(this).then(()=>ok(this),()=>ok(this)),this.initialized=!0)}).catch(n=>{_i.info(`Environment doesn't support IndexedDB: ${n}`)}):_i.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){or.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return or.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){or.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return or.getInstance().dataCollectionEnabled}}const Ute="[DEFAULT]";function Bte(t,e){return t=$(t),new As(t,e)}const jte=(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(n.name!==Ute)throw wn.create("FB not default");if(typeof window=="undefined")throw wn.create("no window");Gee(window);const i=new Vte(n,r);return i._init(e),i};function qte(){yt(new Be("performance",jte,"PUBLIC")),Ze(ZC,d_),Ze(ZC,d_,"esm2017")}qte();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wte{constructor(e,n){this.app=e,this._delegate=n}get instrumentationEnabled(){return this._delegate.instrumentationEnabled}set instrumentationEnabled(e){this._delegate.instrumentationEnabled=e}get dataCollectionEnabled(){return this._delegate.dataCollectionEnabled}set dataCollectionEnabled(e){this._delegate.dataCollectionEnabled=e}trace(e){return Bte(this._delegate,e)}}const Hte="@firebase/performance-compat",Kte="0.1.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gte(t){t.INTERNAL.registerComponent(new Be("performance-compat",zte,"PUBLIC")),t.registerVersion(Hte,Kte)}function zte(t){const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("performance").getImmediate();return new Wte(e,n)}Gte(et);const bv="@firebase/remote-config",lk="0.3.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yte{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qte="remote-config";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xte={["registration-window"]:"Undefined window object. This SDK only supports usage in a browser environment.",["registration-project-id"]:"Undefined project identifier. Check Firebase app initialization.",["registration-api-key"]:"Undefined API key. Check Firebase app initialization.",["registration-app-id"]:"Undefined app identifier. Check Firebase app initialization.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",["fetch-client-network"]:"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-timeout"]:'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',["fetch-throttle"]:'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',["fetch-client-parse"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["indexed-db-unavailable"]:"Indexed DB is not supported by current browser"},Wn=new Un("remoteconfig","Remote Config",Xte);function Jte(t,e){return t instanceof Et&&t.code.indexOf(e)!==-1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zte=!1,ene="",ck=0,tne=["1","true","t","yes","y","on"];class Iv{constructor(e,n=ene){this._source=e,this._value=n}asString(){return this._value}asBoolean(){return this._source==="static"?Zte:tne.indexOf(this._value.toLowerCase())>=0}asNumber(){if(this._source==="static")return ck;let e=Number(this._value);return isNaN(e)&&(e=ck),e}getSource(){return this._source}}async function mL(t){const e=$(t),[n,r]=await Promise.all([e._storage.getLastSuccessfulFetchResponse(),e._storage.getActiveConfigEtag()]);return!n||!n.config||!n.eTag||n.eTag===r?!1:(await Promise.all([e._storageCache.setActiveConfig(n.config),e._storage.setActiveConfigEtag(n.eTag)]),!0)}function vL(t){const e=$(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}async function yL(t){const e=$(t),n=new Yte;setTimeout(async()=>{n.abort()},e.settings.fetchTimeoutMillis);try{await e._client.fetch({cacheMaxAgeMillis:e.settings.minimumFetchIntervalMillis,signal:n}),await e._storageCache.setLastFetchStatus("success")}catch(r){const i=Jte(r,"fetch-throttle")?"throttle":"failure";throw await e._storageCache.setLastFetchStatus(i),r}}function nne(t){const e=$(t);return ane(e._storageCache.getActiveConfig(),e.defaultConfig).reduce((n,r)=>(n[r]=gh(t,r),n),{})}function rne(t,e){return gh($(t),e).asBoolean()}function ine(t,e){return gh($(t),e).asNumber()}function sne(t,e){return gh($(t),e).asString()}function gh(t,e){const n=$(t);n._isInitializationComplete||n._logger.debug(`A value was requested for key "${e}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const r=n._storageCache.getActiveConfig();return r&&r[e]!==void 0?new Iv("remote",r[e]):n.defaultConfig&&n.defaultConfig[e]!==void 0?new Iv("default",String(n.defaultConfig[e])):(n._logger.debug(`Returning static value for key "${e}". Define a default or remote value if this is unintentional.`),new Iv("static"))}function one(t,e){const n=$(t);switch(e){case"debug":n._logger.logLevel=Te.DEBUG;break;case"silent":n._logger.logLevel=Te.SILENT;break;default:n._logger.logLevel=Te.ERROR}}function ane(t={},e={}){return Object.keys(Object.assign(Object.assign({},t),e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lne{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}async fetch(e){const[n,r]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;const i=await this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),await Promise.all(s),i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cne(t=navigator){return t.languages&&t.languages[0]||t.language}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class une{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}async fetch(e){const[n,r]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:cne()},l={method:"POST",headers:o,body:JSON.stringify(a)},c=fetch(s,l),u=new Promise((m,v)=>{e.signal.addEventListener(()=>{const b=new Error("The operation was aborted.");b.name="AbortError",v(b)})});let d;try{await Promise.race([c,u]),d=await c}catch(m){let v="fetch-client-network";throw m.name==="AbortError"&&(v="fetch-timeout"),Wn.create(v,{originalErrorMessage:m.message})}let h=d.status;const f=d.headers.get("ETag")||void 0;let p,g;if(d.status===200){let m;try{m=await d.json()}catch(v){throw Wn.create("fetch-client-parse",{originalErrorMessage:v.message})}p=m.entries,g=m.state}if(g==="INSTANCE_STATE_UNSPECIFIED"?h=500:g==="NO_CHANGE"?h=304:(g==="NO_TEMPLATE"||g==="EMPTY_CONFIG")&&(p={}),h!==304&&h!==200)throw Wn.create("fetch-status",{httpStatus:h});return{status:h,eTag:f,config:p}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dne(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Wn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function hne(t){if(!(t instanceof Et)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class fne{constructor(e,n){this.client=e,this.storage=n}async fetch(e){const n=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)}async attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){await dne(e.signal,n);try{const i=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),i}catch(i){if(!hne(i))throw i;const s={throttleEndTimeMillis:Date.now()+Rf(r),backoffCount:r+1};return await this.storage.setThrottleMetadata(s),this.attemptFetch(e,s)}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pne=60*1e3,gne=12*60*60*1e3;class mne{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:pne,minimumFetchIntervalMillis:gne},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t,e){const n=t.target.error||void 0;return Wn.create(e,{originalErrorMessage:n&&n.message})}const mo="app_namespace_store",vne="firebase_remote_config",yne=1;function _ne(){return new Promise((t,e)=>{try{const n=indexedDB.open(vne,yne);n.onerror=r=>{e(hf(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(mo,{keyPath:"compositeKey"})}}}catch(n){e(Wn.create("storage-open",{originalErrorMessage:n}))}})}class wne{constructor(e,n,r,i=_ne()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(e){const n=await this.openDbPromise;return new Promise((r,i)=>{const o=n.transaction([mo],"readonly").objectStore(mo),a=this.createCompositeKey(e);try{const l=o.get(a);l.onerror=c=>{i(hf(c,"storage-get"))},l.onsuccess=c=>{const u=c.target.result;r(u?u.value:void 0)}}catch(l){i(Wn.create("storage-get",{originalErrorMessage:l&&l.message}))}})}async set(e,n){const r=await this.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([mo],"readwrite").objectStore(mo),l=this.createCompositeKey(e);try{const c=a.put({compositeKey:l,value:n});c.onerror=u=>{s(hf(u,"storage-set"))},c.onsuccess=()=>{i()}}catch(c){s(Wn.create("storage-set",{originalErrorMessage:c&&c.message}))}})}async delete(e){const n=await this.openDbPromise;return new Promise((r,i)=>{const o=n.transaction([mo],"readwrite").objectStore(mo),a=this.createCompositeKey(e);try{const l=o.delete(a);l.onerror=c=>{i(hf(c,"storage-delete"))},l.onsuccess=()=>{r()}}catch(l){i(Wn.create("storage-delete",{originalErrorMessage:l&&l.message}))}})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bne{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){const e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=await e;i&&(this.lastFetchStatus=i);const s=await n;s&&(this.lastSuccessfulFetchTimestampMillis=s);const o=await r;o&&(this.activeConfig=o)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ine(){yt(new Be(Qte,t,"PUBLIC").setMultipleInstances(!0)),Ze(bv,lk),Ze(bv,lk,"esm2017");function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window=="undefined")throw Wn.create("registration-window");if(!zn())throw Wn.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Wn.create("registration-project-id");if(!o)throw Wn.create("registration-api-key");if(!a)throw Wn.create("registration-app-id");n=n||"firebase";const l=new wne(a,r.name,n),c=new bne(l),u=new bi(bv);u.logLevel=Te.ERROR;const d=new une(i,Ei,n,s,o,a),h=new fne(d,l),f=new lne(h,l,c,u),p=new mne(r,f,c,l,u);return vL(p),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ene(t){return t=$(t),await yL(t),mL(t)}async function Tne(){if(!zn())return!1;try{return await xd()}catch{return!1}}Ine();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sne{constructor(e,n){this.app=e,this._delegate=n}get defaultConfig(){return this._delegate.defaultConfig}set defaultConfig(e){this._delegate.defaultConfig=e}get fetchTimeMillis(){return this._delegate.fetchTimeMillis}get lastFetchStatus(){return this._delegate.lastFetchStatus}get settings(){return this._delegate.settings}set settings(e){this._delegate.settings=e}activate(){return mL(this._delegate)}ensureInitialized(){return vL(this._delegate)}fetch(){return yL(this._delegate)}fetchAndActivate(){return Ene(this._delegate)}getAll(){return nne(this._delegate)}getBoolean(e){return rne(this._delegate,e)}getNumber(e){return ine(this._delegate,e)}getString(e){return sne(this._delegate,e)}getValue(e){return gh(this._delegate,e)}setLogLevel(e){one(this._delegate,e)}}const Cne="@firebase/remote-config-compat",kne="0.1.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ane(t){t.INTERNAL.registerComponent(new Be("remoteConfig-compat",Rne,"PUBLIC").setMultipleInstances(!0).setServiceProps({isSupported:Tne})),t.registerVersion(Cne,kne)}function Rne(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("remote-config").getImmediate({identifier:e});return new Sne(n,r)}Ane(et);var Nne="firebase",xne="9.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */et.registerVersion(Nne,xne,"app-compat");var Pne="firebase",One="9.8.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);et.registerVersion(Pne,One,"compat");const Dne="modulepreload",uk={},Mne="/viteMonitorbox/",il=function(e,n){return!n||n.length===0?e():Promise.all(n.map(r=>{if(r=`${Mne}${r}`,r in uk)return;uk[r]=!0;const i=r.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const o=document.createElement("link");if(o.rel=i?"stylesheet":Dne,i||(o.as="script",o.crossOrigin=""),o.href=r,document.head.appendChild(o),i)return new Promise((a,l)=>{o.addEventListener("load",a),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};function Lne(){return _L().__VUE_DEVTOOLS_GLOBAL_HOOK__}function _L(){return typeof navigator!="undefined"&&typeof window!="undefined"?window:typeof global!="undefined"?global:{}}const Fne=typeof Proxy=="function",$ne="devtools-plugin:setup",Vne="plugin:settings:set";let Xa,f_;function Une(){var t;return Xa!==void 0||(typeof window!="undefined"&&window.performance?(Xa=!0,f_=window.performance):typeof global!="undefined"&&((t=global.perf_hooks)===null||t===void 0?void 0:t.performance)?(Xa=!0,f_=global.perf_hooks.performance):Xa=!1),Xa}function Bne(){return Une()?f_.now():Date.now()}class jne{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},r);try{const o=localStorage.getItem(i),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(i,JSON.stringify(o))}catch{}s=o},now(){return Bne()}},n&&n.on(Vne,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function qne(t,e){const n=t,r=_L(),i=Lne(),s=Fne&&n.enableEarlyProxy;if(i&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))i.emit($ne,t,e);else{const o=s?new jne(n,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * vue-router v4.0.14
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const wL=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Ec=t=>wL?Symbol(t):"_vr_"+t,Wne=Ec("rvlm"),dk=Ec("rvd"),lE=Ec("r"),bL=Ec("rl"),p_=Ec("rvl"),sl=typeof window!="undefined";function Hne(t){return t.__esModule||wL&&t[Symbol.toStringTag]==="Module"}const Qe=Object.assign;function Ev(t,e){const n={};for(const r in e){const i=e[r];n[r]=Array.isArray(i)?i.map(t):t(i)}return n}const yu=()=>{},Kne=/\/$/,Gne=t=>t.replace(Kne,"");function Tv(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("?"),l=e.indexOf("#",a>-1?a:0);return a>-1&&(r=e.slice(0,a),s=e.slice(a+1,l>-1?l:e.length),i=t(s)),l>-1&&(r=r||e.slice(0,l),o=e.slice(l,e.length)),r=Xne(r!=null?r:e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:o}}function zne(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function hk(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Yne(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Ql(e.matched[r],n.matched[i])&&IL(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ql(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function IL(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Qne(t[n],e[n]))return!1;return!0}function Qne(t,e){return Array.isArray(t)?fk(t,e):Array.isArray(e)?fk(e,t):t===e}function fk(t,e){return Array.isArray(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Xne(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i=n.length-1,s,o;for(s=0;s<r.length;s++)if(o=r[s],!(i===1||o==="."))if(o==="..")i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(s-(s===r.length?1:0)).join("/")}var Ed;(function(t){t.pop="pop",t.push="push"})(Ed||(Ed={}));var _u;(function(t){t.back="back",t.forward="forward",t.unknown=""})(_u||(_u={}));function Jne(t){if(!t)if(sl){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Gne(t)}const Zne=/^[^#]+#/;function ere(t,e){return t.replace(Zne,"#")+e}function tre(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const pm=()=>({left:window.pageXOffset,top:window.pageYOffset});function nre(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=tre(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function pk(t,e){return(history.state?history.state.position-e:-1)+t}const g_=new Map;function rre(t,e){g_.set(t,e)}function ire(t){const e=g_.get(t);return g_.delete(t),e}let sre=()=>location.protocol+"//"+location.host;function EL(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),hk(l,"")}return hk(n,t)+r+i}function ore(t,e,n,r){let i=[],s=[],o=null;const a=({state:h})=>{const f=EL(t,location),p=n.value,g=e.value;let m=0;if(h){if(n.value=f,e.value=h,o&&o===p){o=null;return}m=g?h.position-g.position:0}else r(f);i.forEach(v=>{v(n.value,p,{delta:m,type:Ed.pop,direction:m?m>0?_u.forward:_u.back:_u.unknown})})};function l(){o=n.value}function c(h){i.push(h);const f=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return s.push(f),f}function u(){const{history:h}=window;!h.state||h.replaceState(Qe({},h.state,{scroll:pm()}),"")}function d(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:l,listen:c,destroy:d}}function gk(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?pm():null}}function are(t){const{history:e,location:n}=window,r={value:EL(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const d=t.indexOf("#"),h=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:sre()+t+l;try{e[u?"replaceState":"pushState"](c,"",h),i.value=c}catch(f){console.error(f),n[u?"replace":"assign"](h)}}function o(l,c){const u=Qe({},e.state,gk(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,u,!0),r.value=l}function a(l,c){const u=Qe({},i.value,e.state,{forward:l,scroll:pm()});s(u.current,u,!0);const d=Qe({},gk(r.value,l,null),{position:u.position+1},c);s(l,d,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function lre(t){t=Jne(t);const e=are(t),n=ore(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Qe({location:"",base:t,go:r,createHref:ere.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function cre(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),lre(t)}function ure(t){return typeof t=="string"||t&&typeof t=="object"}function TL(t){return typeof t=="string"||typeof t=="symbol"}const us={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},SL=Ec("nf");var mk;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(mk||(mk={}));function Xl(t,e){return Qe(new Error,{type:t,[SL]:!0},e)}function ds(t,e){return t instanceof Error&&SL in t&&(e==null||!!(t.type&e))}const vk="[^/]+?",dre={sensitive:!1,strict:!1,start:!0,end:!0},hre=/[.+*?^${}()[\]/\\]/g;function fre(t,e){const n=Qe({},dre,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const h=c[d];let f=40+(n.sensitive?.25:0);if(h.type===0)d||(i+="/"),i+=h.value.replace(hre,"\\$&"),f+=40;else if(h.type===1){const{value:p,repeatable:g,optional:m,regexp:v}=h;s.push({name:p,repeatable:g,optional:m});const b=v||vk;if(b!==vk){f+=10;try{new RegExp(`(${b})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+C.message)}}let T=g?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||(T=m&&c.length<2?`(?:/${T})`:"/"+T),m&&(T+="?"),i+=T,f+=20,m&&(f+=-8),g&&(f+=-20),b===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",p=s[h-1];d[p.name]=f&&p.repeatable?f.split("/"):f}return d}function l(c){let u="",d=!1;for(const h of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:g,optional:m}=f,v=p in c?c[p]:"";if(Array.isArray(v)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=Array.isArray(v)?v.join("/"):v;if(!b)if(m)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=b}}return u}return{re:o,score:r,keys:s,parse:a,stringify:l}}function pre(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function gre(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=pre(r[n],i[n]);if(s)return s;n++}return i.length-r.length}const mre={type:0,value:""},vre=/[a-zA-Z0-9_]/;function yre(t){if(!t)return[[]];if(t==="/")return[[mre]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",u="";function d(){!c||(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),n=1):h();break;case 4:h(),n=r;break;case 1:l==="("?n=2:vre.test(l)?h():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),i}function _re(t,e,n){const r=fre(yre(t.path),n),i=Qe(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function wre(t,e){const n=[],r=new Map;e=_k({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,d,h){const f=!h,p=Ire(u);p.aliasOf=h&&h.record;const g=_k(e,u),m=[p];if("alias"in u){const T=typeof u.alias=="string"?[u.alias]:u.alias;for(const C of T)m.push(Qe({},p,{components:h?h.record.components:p.components,path:C,aliasOf:h?h.record:p}))}let v,b;for(const T of m){const{path:C}=T;if(d&&C[0]!=="/"){const S=d.record.path,A=S[S.length-1]==="/"?"":"/";T.path=d.record.path+(C&&A+C)}if(v=_re(T,d,g),h?h.alias.push(v):(b=b||v,b!==v&&b.alias.push(v),f&&u.name&&!yk(v)&&o(u.name)),"children"in p){const S=p.children;for(let A=0;A<S.length;A++)s(S[A],v,h&&h.children[A])}h=h||v,l(v)}return b?()=>{o(b)}:yu}function o(u){if(TL(u)){const d=r.get(u);d&&(r.delete(u),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(u);d>-1&&(n.splice(d,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let d=0;for(;d<n.length&&gre(u,n[d])>=0&&(u.record.path!==n[d].record.path||!CL(u,n[d]));)d++;n.splice(d,0,u),u.record.name&&!yk(u)&&r.set(u.record.name,u)}function c(u,d){let h,f={},p,g;if("name"in u&&u.name){if(h=r.get(u.name),!h)throw Xl(1,{location:u});g=h.record.name,f=Qe(bre(d.params,h.keys.filter(b=>!b.optional).map(b=>b.name)),u.params),p=h.stringify(f)}else if("path"in u)p=u.path,h=n.find(b=>b.re.test(p)),h&&(f=h.parse(p),g=h.record.name);else{if(h=d.name?r.get(d.name):n.find(b=>b.re.test(d.path)),!h)throw Xl(1,{location:u,currentLocation:d});g=h.record.name,f=Qe({},d.params,u.params),p=h.stringify(f)}const m=[];let v=h;for(;v;)m.unshift(v.record),v=v.parent;return{name:g,path:p,params:f,matched:m,meta:Tre(m)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function bre(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Ire(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Ere(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function Ere(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function yk(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Tre(t){return t.reduce((e,n)=>Qe(e,n.meta),{})}function _k(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function CL(t,e){return e.children.some(n=>n===t||CL(t,n))}const kL=/#/g,Sre=/&/g,Cre=/\//g,kre=/=/g,Are=/\?/g,AL=/\+/g,Rre=/%5B/g,Nre=/%5D/g,RL=/%5E/g,xre=/%60/g,NL=/%7B/g,Pre=/%7C/g,xL=/%7D/g,Ore=/%20/g;function cE(t){return encodeURI(""+t).replace(Pre,"|").replace(Rre,"[").replace(Nre,"]")}function Dre(t){return cE(t).replace(NL,"{").replace(xL,"}").replace(RL,"^")}function m_(t){return cE(t).replace(AL,"%2B").replace(Ore,"+").replace(kL,"%23").replace(Sre,"%26").replace(xre,"`").replace(NL,"{").replace(xL,"}").replace(RL,"^")}function Mre(t){return m_(t).replace(kre,"%3D")}function Lre(t){return cE(t).replace(kL,"%23").replace(Are,"%3F")}function Fre(t){return t==null?"":Lre(t).replace(Cre,"%2F")}function Sp(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function $re(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(AL," "),o=s.indexOf("="),a=Sp(o<0?s:s.slice(0,o)),l=o<0?null:Sp(s.slice(o+1));if(a in e){let c=e[a];Array.isArray(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function wk(t){let e="";for(let n in t){const r=t[n];if(n=Mre(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(r)?r.map(s=>s&&m_(s)):[r&&m_(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function Vre(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Array.isArray(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}function qc(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function gs(t,e,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,a)=>{const l=d=>{d===!1?a(Xl(4,{from:n,to:e})):d instanceof Error?a(d):ure(d)?a(Xl(2,{from:e,to:d})):(s&&r.enterCallbacks[i]===s&&typeof d=="function"&&s.push(d),o())},c=t.call(r&&r.instances[i],e,n,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch(d=>a(d))})}function Sv(t,e,n,r){const i=[];for(const s of t)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(Ure(a)){const c=(a.__vccOpts||a)[e];c&&i.push(gs(c,n,r,s,o))}else{let l=a();i.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=Hne(c)?c.default:c;s.components[o]=u;const h=(u.__vccOpts||u)[e];return h&&gs(h,n,r,s,o)()}))}}return i}function Ure(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function bk(t){const e=Ke(lE),n=Ke(bL),r=I(()=>e.resolve(oi(t.to))),i=I(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=n.matched;if(!u||!d.length)return-1;const h=d.findIndex(Ql.bind(null,u));if(h>-1)return h;const f=Ik(l[c-2]);return c>1&&Ik(u)===f&&d[d.length-1].path!==f?d.findIndex(Ql.bind(null,l[c-2])):h}),s=I(()=>i.value>-1&&Wre(n.params,r.value.params)),o=I(()=>i.value>-1&&i.value===n.matched.length-1&&IL(n.params,r.value.params));function a(l={}){return qre(l)?e[oi(t.replace)?"replace":"push"](oi(t.to)).catch(yu):Promise.resolve()}return{route:r,href:I(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const Bre=Fp({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:bk,setup(t,{slots:e}){const n=bn(bk(t)),{options:r}=Ke(lE),i=I(()=>({[Ek(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Ek(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Rr("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),jre=Bre;function qre(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Wre(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Ik(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Ek=(t,e,n)=>t!=null?t:e!=null?e:n,Hre=Fp({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const r=Ke(p_),i=I(()=>t.route||r.value),s=Ke(dk,0),o=I(()=>i.value.matched[s]);Kt(dk,s+1),Kt(Wne,o),Kt(p_,i);const a=X();return $e(()=>[a.value,o.value,t.name],([l,c,u],[d,h,f])=>{c&&(c.instances[u]=l,h&&h!==c&&l&&l===d&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),l&&c&&(!h||!Ql(c,h)||!d)&&(c.enterCallbacks[u]||[]).forEach(p=>p(l))},{flush:"post"}),()=>{const l=i.value,c=o.value,u=c&&c.components[t.name],d=t.name;if(!u)return Tk(n.default,{Component:u,route:l});const h=c.props[t.name],f=h?h===!0?l.params:typeof h=="function"?h(l):h:null,g=Rr(u,Qe({},f,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(c.instances[d]=null)},ref:a}));return Tk(n.default,{Component:g,route:l})||g}}});function Tk(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Kre=Hre;function Gre(t){const e=wre(t.routes,t),n=t.parseQuery||$re,r=t.stringifyQuery||wk,i=t.history,s=qc(),o=qc(),a=qc(),l=sA(us);let c=us;sl&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ev.bind(null,D=>""+D),d=Ev.bind(null,Fre),h=Ev.bind(null,Sp);function f(D,ne){let Q,se;return TL(D)?(Q=e.getRecordMatcher(D),se=ne):se=D,e.addRoute(se,Q)}function p(D){const ne=e.getRecordMatcher(D);ne&&e.removeRoute(ne)}function g(){return e.getRoutes().map(D=>D.record)}function m(D){return!!e.getRecordMatcher(D)}function v(D,ne){if(ne=Qe({},ne||l.value),typeof D=="string"){const we=Tv(n,D,ne.path),_=e.resolve({path:we.path},ne),w=i.createHref(we.fullPath);return Qe(we,_,{params:h(_.params),hash:Sp(we.hash),redirectedFrom:void 0,href:w})}let Q;if("path"in D)Q=Qe({},D,{path:Tv(n,D.path,ne.path).path});else{const we=Qe({},D.params);for(const _ in we)we[_]==null&&delete we[_];Q=Qe({},D,{params:d(D.params)}),ne.params=d(ne.params)}const se=e.resolve(Q,ne),Ge=D.hash||"";se.params=u(h(se.params));const tt=zne(r,Qe({},D,{hash:Dre(Ge),path:se.path})),Ne=i.createHref(tt);return Qe({fullPath:tt,hash:Ge,query:r===wk?Vre(D.query):D.query||{}},se,{redirectedFrom:void 0,href:Ne})}function b(D){return typeof D=="string"?Tv(n,D,l.value.path):Qe({},D)}function T(D,ne){if(c!==D)return Xl(8,{from:ne,to:D})}function C(D){return k(D)}function S(D){return C(Qe(b(D),{replace:!0}))}function A(D){const ne=D.matched[D.matched.length-1];if(ne&&ne.redirect){const{redirect:Q}=ne;let se=typeof Q=="function"?Q(D):Q;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=b(se):{path:se},se.params={}),Qe({query:D.query,hash:D.hash,params:D.params},se)}}function k(D,ne){const Q=c=v(D),se=l.value,Ge=D.state,tt=D.force,Ne=D.replace===!0,we=A(Q);if(we)return k(Qe(b(we),{state:Ge,force:tt,replace:Ne}),ne||Q);const _=Q;_.redirectedFrom=ne;let w;return!tt&&Yne(r,se,Q)&&(w=Xl(16,{to:_,from:se}),kt(se,se,!0,!1)),(w?Promise.resolve(w):O(_,se)).catch(x=>ds(x)?ds(x,2)?x:st(x):be(x,_,se)).then(x=>{if(x){if(ds(x,2))return k(Qe(b(x.to),{state:Ge,force:tt,replace:Ne}),ne||_)}else x=G(_,se,!0,Ne,Ge);return W(_,se,x),x})}function P(D,ne){const Q=T(D,ne);return Q?Promise.reject(Q):Promise.resolve()}function O(D,ne){let Q;const[se,Ge,tt]=zre(D,ne);Q=Sv(se.reverse(),"beforeRouteLeave",D,ne);for(const we of se)we.leaveGuards.forEach(_=>{Q.push(gs(_,D,ne))});const Ne=P.bind(null,D,ne);return Q.push(Ne),Ja(Q).then(()=>{Q=[];for(const we of s.list())Q.push(gs(we,D,ne));return Q.push(Ne),Ja(Q)}).then(()=>{Q=Sv(Ge,"beforeRouteUpdate",D,ne);for(const we of Ge)we.updateGuards.forEach(_=>{Q.push(gs(_,D,ne))});return Q.push(Ne),Ja(Q)}).then(()=>{Q=[];for(const we of D.matched)if(we.beforeEnter&&!ne.matched.includes(we))if(Array.isArray(we.beforeEnter))for(const _ of we.beforeEnter)Q.push(gs(_,D,ne));else Q.push(gs(we.beforeEnter,D,ne));return Q.push(Ne),Ja(Q)}).then(()=>(D.matched.forEach(we=>we.enterCallbacks={}),Q=Sv(tt,"beforeRouteEnter",D,ne),Q.push(Ne),Ja(Q))).then(()=>{Q=[];for(const we of o.list())Q.push(gs(we,D,ne));return Q.push(Ne),Ja(Q)}).catch(we=>ds(we,8)?we:Promise.reject(we))}function W(D,ne,Q){for(const se of a.list())se(D,ne,Q)}function G(D,ne,Q,se,Ge){const tt=T(D,ne);if(tt)return tt;const Ne=ne===us,we=sl?history.state:{};Q&&(se||Ne?i.replace(D.fullPath,Qe({scroll:Ne&&we&&we.scroll},Ge)):i.push(D.fullPath,Ge)),l.value=D,kt(D,ne,Q,Ne),st()}let B;function ie(){B=i.listen((D,ne,Q)=>{const se=v(D),Ge=A(se);if(Ge){k(Qe(Ge,{replace:!0}),se).catch(yu);return}c=se;const tt=l.value;sl&&rre(pk(tt.fullPath,Q.delta),pm()),O(se,tt).catch(Ne=>ds(Ne,12)?Ne:ds(Ne,2)?(k(Ne.to,se).then(we=>{ds(we,20)&&!Q.delta&&Q.type===Ed.pop&&i.go(-1,!1)}).catch(yu),Promise.reject()):(Q.delta&&i.go(-Q.delta,!1),be(Ne,se,tt))).then(Ne=>{Ne=Ne||G(se,tt,!1),Ne&&(Q.delta?i.go(-Q.delta,!1):Q.type===Ed.pop&&ds(Ne,20)&&i.go(-1,!1)),W(se,tt,Ne)}).catch(yu)})}let oe=qc(),xe=qc(),Ae;function be(D,ne,Q){st(D);const se=xe.list();return se.length?se.forEach(Ge=>Ge(D,ne,Q)):console.error(D),Promise.reject(D)}function Ie(){return Ae&&l.value!==us?Promise.resolve():new Promise((D,ne)=>{oe.add([D,ne])})}function st(D){return Ae||(Ae=!D,ie(),oe.list().forEach(([ne,Q])=>D?Q(D):ne()),oe.reset()),D}function kt(D,ne,Q,se){const{scrollBehavior:Ge}=t;if(!sl||!Ge)return Promise.resolve();const tt=!Q&&ire(pk(D.fullPath,0))||(se||!Q)&&history.state&&history.state.scroll||null;return Ar().then(()=>Ge(D,ne,tt)).then(Ne=>Ne&&nre(Ne)).catch(Ne=>be(Ne,D,ne))}const He=D=>i.go(D);let ln;const cn=new Set;return{currentRoute:l,addRoute:f,removeRoute:p,hasRoute:m,getRoutes:g,resolve:v,options:t,push:C,replace:S,go:He,back:()=>He(-1),forward:()=>He(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:xe.add,isReady:Ie,install(D){const ne=this;D.component("RouterLink",jre),D.component("RouterView",Kre),D.config.globalProperties.$router=ne,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>oi(l)}),sl&&!ln&&l.value===us&&(ln=!0,C(i.location).catch(Ge=>{}));const Q={};for(const Ge in us)Q[Ge]=I(()=>l.value[Ge]);D.provide(lE,ne),D.provide(bL,bn(Q)),D.provide(p_,l);const se=D.unmount;cn.add(D),D.unmount=function(){cn.delete(D),cn.size<1&&(c=us,B&&B(),l.value=us,ln=!1,Ae=!1),se()}}}}function Ja(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function zre(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Ql(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Ql(c,l))||i.push(l))}return[n,r,i]}const Yre=_e({name:"VContainer",props:E({fluid:{type:Boolean,default:!1}},nn()),setup(t,e){let{slots:n}=e;return()=>y(t.tag,{class:["v-container",{"v-container--fluid":t.fluid}]},n)}}),uE=["sm","md","lg","xl","xxl"],PL=(()=>uE.reduce((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t),{}))(),OL=(()=>uE.reduce((t,e)=>(t["offset"+Gs(e)]={type:[String,Number],default:null},t),{}))(),DL=(()=>uE.reduce((t,e)=>(t["order"+Gs(e)]={type:[String,Number],default:null},t),{}))(),Sk={col:Object.keys(PL),offset:Object.keys(OL),order:Object.keys(DL)};function Qre(t,e,n){let r=t;if(!(n==null||n===!1))return e&&(r+=`-${e.replace(t,"")}`),t==="col"&&(r="v-"+r),t==="col"&&(n===""||n===!0)||(r+=`-${n}`),r.toLowerCase()}const ML=_e({name:"VCol",props:E(Ee(E(Ee(E(Ee(E({cols:{type:[Boolean,String,Number],default:!1}},PL),{offset:{type:[String,Number],default:null}}),OL),{order:{type:[String,Number],default:null}}),DL),{alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)}}),nn()),setup(t,e){let{slots:n}=e;const r=I(()=>{const i=[];let s;for(s in Sk)Sk[s].forEach(a=>{const l=t[a],c=Qre(s,a,l);c&&i.push(c)});const o=i.some(a=>a.startsWith("v-col-"));return i.push({"v-col":!o||!t.cols,[`v-col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),i});return()=>{var i;return Rr(t.tag,{class:r.value},(i=n.default)==null?void 0:i.call(n))}}}),Xre=["sm","md","lg","xl","xxl"],dE=["start","end","center"];function hE(t,e){return Xre.reduce((n,r)=>(n[t+Gs(r)]=e(),n),{})}const LL=t=>[...dE,"baseline","stretch"].includes(t),FL=hE("align",()=>({type:String,default:null,validator:LL})),$L=t=>[...dE,"space-between","space-around"].includes(t),VL=hE("justify",()=>({type:String,default:null,validator:$L})),UL=t=>[...dE,"space-between","space-around","stretch"].includes(t),BL=hE("alignContent",()=>({type:String,default:null,validator:UL})),Ck={align:Object.keys(FL),justify:Object.keys(VL),alignContent:Object.keys(BL)},Jre={align:"align",justify:"justify",alignContent:"align-content"};function Zre(t,e,n){let r=Jre[t];if(n!=null)return e&&(r+=`-${e.replace(t,"")}`),r+=`-${n}`,r.toLowerCase()}const jL=_e({name:"VRow",props:E(E(Ee(E(Ee(E({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:LL}},FL),{justify:{type:String,default:null,validator:$L}}),VL),{alignContent:{type:String,default:null,validator:UL}}),BL),nn()),setup(t,e){let{slots:n}=e;const r=I(()=>{const i=[];let s;for(s in Ck)Ck[s].forEach(o=>{const a=t[o],l=Zre(s,o,a);l&&i.push(l)});return i.push({"v-row--no-gutters":t.noGutters,"v-row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),i});return()=>{var i;return Rr(t.tag,{class:["v-row",r.value]},(i=n.default)==null?void 0:i.call(n))}}}),qL=De({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function WL(t,e){const n={},r=i=>()=>{if(!bt)return Promise.resolve(!0);const s=i==="openDelay";return n.closeDelay&&window.clearTimeout(n.closeDelay),delete n.closeDelay,n.openDelay&&window.clearTimeout(n.openDelay),delete n.openDelay,new Promise(o=>{var a;const l=parseInt((a=t[i])!=null?a:0,10);n[i]=window.setTimeout(()=>{e==null||e(s),o(s)},l)})};return{runCloseDelay:r("closeDelay"),runOpenDelay:r("openDelay")}}const HL=_e({name:"VHover",props:E({disabled:Boolean,modelValue:{type:Boolean,default:void 0}},qL()),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=yn(t,"modelValue"),{runOpenDelay:i,runCloseDelay:s}=WL(t,o=>!t.disabled&&(r.value=o));return()=>{var o;return(o=n.default)==null?void 0:o.call(n,{isHovering:r.value,props:{onMouseenter:i,onMouseleave:s}})}}}),eie={name:"Home",data:()=>({}),computed:{}};function tie(t,e,n,r,i,s){const o=Fi("router-link"),a=Fi("router-view");return Ht(),Sl(at,null,[y(jL,{class:"fill-height","no-gutters":""},{default:Oe(()=>[(Ht(!0),Sl(at,null,q_(t.$store.state.menu,({title:l,link:c,src:u},d)=>(Ht(),br(HL,{key:d},{default:Oe(({isHovering:h,props:f})=>[y(ML,ct(f,{cols:h?12/t.$store.state.menu.length+2:"",class:"transition"}),{default:Oe(()=>[y(o,{class:"text-decoration-none",to:c,onClick:p=>t.$store.state.titleToolBar=l},{default:Oe(()=>[y(Gp,{src:u,"min-height":"100%",cover:""},{default:Oe(()=>[ri("div",{class:Ap([h?"on-hover":"background"," fill-height transition d-flex align-center justify-center text-h2 text-white"])},k_(l),3)]),_:2},1032,["src"])]),_:2},1032,["to","onClick"])]),_:2},1040,["cols"])]),_:2},1024))),128))]),_:1}),y(a)],64)}var nie=ec(eie,[["render",tie],["__scopeId","data-v-e60342aa"]]);const rie=[{path:"/",name:"Home",component:nie},{path:"/salary",name:"Salary",component:()=>il(()=>import("./Salary.e0038f38.js"),["assets/Salary.e0038f38.js","assets/Salary.e8daa446.css","assets/datetime.a6c08513.js","assets/VTable.84f20693.js","assets/VTable.b8a7a448.css"])},{path:"/Gap&Unloading",name:"Gap&Unloading",component:()=>il(()=>import("./Gap_Unloading.7bd25206.js"),["assets/Gap_Unloading.7bd25206.js","assets/Gap_Unloading.466498ed.css","assets/datetime.a6c08513.js"])},{path:"/times",name:"Times",component:()=>il(()=>import("./Times.56e50697.js"),["assets/Times.56e50697.js","assets/datetime.a6c08513.js"])},{path:"/autocommitCounter",name:"Autocommit counter",component:()=>il(()=>import("./AutocommitCounter.fa7a22b4.js"),[])},{path:"/userProfile",name:"My profile",component:()=>il(()=>import("./UserProfile.855f4ac4.js"),["assets/UserProfile.855f4ac4.js","assets/UserProfile.220ef416.css","assets/VTable.84f20693.js","assets/VTable.b8a7a448.css"])}],Td=Gre({history:cre({}.BASE_URL),routes:rie});const iie=_e({name:"VBtnGroup",props:E(E(E(E(E(E(E({divided:Boolean},wa()),Ys()),Ia()),Ji()),nn()),kn()),Ad()),setup(t,e){let{slots:n}=e;const{themeClasses:r}=Qn(t),{densityClasses:i}=Qs(t),{borderClasses:s}=ba(t),{elevationClasses:o}=Ea(t),{roundedClasses:a}=Zi(t);tc({VBtn:{height:"auto",color:Se(t,"color"),density:Se(t,"density"),flat:!0,variant:Se(t,"variant")}}),Ft(()=>y(t.tag,{class:["v-btn-group",{"v-btn-group--divided":t.divided},r.value,s.value,i.value,o.value,a.value]},n))}}),sie=De({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),oie=De({value:null,disabled:Boolean,selectedClass:String},"group-item");function aie(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=ur("useGroupItem");if(!r)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const i=Hr();Kt(Symbol.for(`${e.description}:id`),i);const s=Ke(e,null);if(!s){if(!n)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${e.description}`)}const o=Se(t,"value"),a=I(()=>s.disabled.value||t.disabled);s.register({id:i,value:o,disabled:a},r),Wr(()=>{s.unregister(i)});const l=I(()=>s.isSelected(i)),c=I(()=>l.value&&[s.selectedClass.value,t.selectedClass]);return $e(l,u=>{r.emit("group:selected",{value:u})}),{id:i,isSelected:l,toggle:()=>s.select(i,!l.value),select:u=>s.select(i,u),selectedClass:c,value:o,disabled:a,group:s}}function lie(t,e){let n=!1;const r=bn([]),i=yn(t,"modelValue",[],h=>h==null?[]:KL(r,Al(h)),h=>{const f=uie(r,h);return t.multiple?f:f[0]}),s=ur("useGroup");function o(h,f){const p=h,g=Symbol.for(`${e.description}:id`),v=tu(g,s==null?void 0:s.vnode).indexOf(f);v>-1?r.splice(v,0,p):r.push(p)}function a(h){if(n)return;l();const f=r.findIndex(p=>p.id===h);r.splice(f,1)}function l(){const h=r.find(f=>!f.disabled);h&&t.mandatory==="force"&&!i.value.length&&(i.value=[h.id])}ga(()=>{l()}),Wr(()=>{n=!0});function c(h,f){const p=r.find(v=>v.id===h);if(!(f&&p!=null&&p.disabled))if(t.multiple){var g;const v=i.value.slice(),b=v.findIndex(C=>C===h),T=~b;if(f=(g=f)!=null?g:!T,T&&t.mandatory&&v.length<=1||!T&&t.max!=null&&v.length+1>t.max)return;b<0&&f?v.push(h):b>=0&&!f&&v.splice(b,1),i.value=v}else{var m;const v=i.value.includes(h);if(t.mandatory&&v)return;i.value=((m=f)!=null?m:!v)?[h]:[]}}function u(h){if(t.multiple&&Do('This method is not supported when using "multiple" prop'),i.value.length){const f=i.value[0],p=r.findIndex(v=>v.id===f);let g=(p+h)%r.length,m=r[g];for(;m.disabled&&g!==p;)g=(g+h)%r.length,m=r[g];if(m.disabled)return;i.value=[r[g].id]}else{const f=r.find(p=>!p.disabled);f&&(i.value=[f.id])}}const d={register:o,unregister:a,selected:i,select:c,disabled:Se(t,"disabled"),prev:()=>u(r.length-1),next:()=>u(1),isSelected:h=>i.value.includes(h),selectedClass:I(()=>t.selectedClass),items:I(()=>r),getItemIndex:h=>cie(r,h)};return Kt(e,d),d}function cie(t,e){const n=KL(t,[e]);return n.length?t.findIndex(r=>r.id===n[0]):-1}function KL(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r];i.value!=null?e.find(s=>Y_(s,i.value))!=null&&n.push(i.id):e.includes(r)&&n.push(i.id)}return n}function uie(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r];e.includes(i.id)&&n.push(i.value!=null?i.value:r)}return n}const GL=Symbol.for("vuetify:v-btn-toggle");Yn()({name:"VBtnToggle",props:sie({selectedClass:"v-btn--selected"}),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{isSelected:r,next:i,prev:s,select:o,selected:a}=lie(t,GL);return Ft(()=>{var l;return y(iie,{class:"v-btn-toggle"},{default:()=>[(l=n.default)==null?void 0:l.call(n,{isSelected:r,next:i,prev:s,select:o,selected:a})]})}),{next:i,prev:s,select:o}}});var die={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected",nextMonthAriaLabel:"Next month",nextYearAriaLabel:"Next year",prevMonthAriaLabel:"Previous month",prevYearAriaLabel:"Previous year"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Goto Page {0}",currentPage:"Page {0}, Current Page",first:"First page",last:"Last page"}},rating:{ariaLabel:{item:"Rating {0} of {1}"}}};const hie={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!1,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1},fE=Symbol.for("vuetify:rtl");function fie(t,e){var n,r;return pie({rtl:E(E({},hie),(n=e==null?void 0:e.rtl)!=null?n:{}),isRtl:X((r=e==null?void 0:e.defaultRtl)!=null?r:!1),rtlClasses:X("")},t)}function pie(t,e,n){const r=I(()=>typeof(n==null?void 0:n.rtl)=="boolean"?n.rtl:e.current.value&&t.rtl.hasOwnProperty(e.current.value)?t.rtl[e.current.value]:t.isRtl.value);return{isRtl:r,rtl:t.rtl,rtlClasses:I(()=>`v-locale--is-${r.value?"rtl":"ltr"}`)}}function gm(){const t=Ke(fE);if(!t)throw new Error("[Vuetify] Could not find injected rtl instance");return t}const kk={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},zL=De({location:String},"location");function YL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:r}=gm();function i(o){return o==="start"?r.value?"right":"left":o==="end"?r.value?"left":"right":o}return{locationStyles:I(()=>{if(!t.location)return{};const o=Wv(t.location.split(" ").length>1?t.location:`${t.location} center`),a=i(o.side),l=i(o.align);function c(d){return n?n(d):0}const u={};return a!=="center"&&(e?u[kk[a]]=`calc(100% - ${c(a)}px)`:u[a]=0),l!=="center"?e?u[kk[l]]=`calc(100% - ${c(l)}px)`:u[l]=0:(a==="center"?u.top=u.left="50%":u[{top:"left",bottom:"left",left:"top",right:"top"}[a]]="50%",u.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[a]),u})}}const gie=["static","relative","fixed","absolute","sticky"],QL=De({position:{type:String,validator:t=>gie.includes(t)}},"position");function XL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xi();return{positionClasses:I(()=>t.position?`${e}--${t.position}`:void 0)}}function mie(t,e){$e(()=>{var n;return(n=t.isExactActive)==null?void 0:n.value},n=>{t.isLink.value&&n&&e&&Ar(()=>{e(!0)})},{immediate:!0})}const cl=_e({name:"VBtn",directives:{Ripple:zp},props:E(E(E(E(E(E(E(E(E(E(E(E(E({active:Boolean,symbol:{type:null,default:GL},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:It,appendIcon:It,block:Boolean,stacked:Boolean,ripple:{type:Boolean,default:!0}},wa()),Ji()),Ys()),ya()),Ia()),oie()),zL()),QL()),sw()),Wp()),nn({tag:"button"})),kn()),Ad({variant:"contained"})),setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:i}=Qn(t),{borderClasses:s}=ba(t),{colorClasses:o,colorStyles:a,variantClasses:l}=rw(t),{densityClasses:c}=Qs(t),{dimensionStyles:u}=_a(t),{elevationClasses:d}=Ea(t),{locationStyles:h}=YL(t),{positionClasses:f}=XL(t),{roundedClasses:p}=Zi(t),{sizeClasses:g}=Hp(t),m=aie(t,t.symbol,!1),v=iw(t,n),b=I(()=>(m==null?void 0:m.disabled.value)||t.disabled),T=I(()=>t.variant==="contained"&&!(t.disabled||t.flat||t.border));return mie(v,m==null?void 0:m.select),()=>{var C;const S=v.isLink.value?"a":t.tag,A=!m||m.isSelected.value;return Tr(y(S,{type:S==="a"?void 0:"button",class:["v-btn",m==null?void 0:m.selectedClass.value,{"v-btn--active":t.active,"v-btn--block":t.block,"v-btn--disabled":b.value,"v-btn--elevated":T.value,"v-btn--flat":t.flat,"v-btn--icon":!!t.icon,"v-btn--stacked":t.stacked},i.value,s.value,A?o.value:void 0,c.value,d.value,f.value,p.value,g.value,l.value],style:[A?a.value:void 0,u.value,h.value],disabled:b.value||void 0,href:v.href.value,onClick:k=>{var P;b.value||((P=v.navigate)==null||P.call(v,k),m==null||m.toggle())}},{default:()=>[nw(!0,"v-btn"),!t.icon&&t.prependIcon&&y(Kn,{class:"v-btn__icon",icon:t.prependIcon,start:!0},null),y("div",{class:"v-btn__content","data-no-activator":""},[typeof t.icon=="boolean"?(C=r.default)==null?void 0:C.call(r):y(Kn,{class:"v-btn__icon",icon:t.icon,size:t.size},null)]),!t.icon&&t.appendIcon&&y(Kn,{class:"v-btn__icon",icon:t.appendIcon,end:!0},null)]}),[[ma("ripple"),!b.value&&t.ripple,null]])}}});const vie=_e({name:"VCardActions",setup(t,e){let{slots:n}=e;return tc({VBtn:{variant:"text"}}),Ft(()=>{var r;return y("div",{class:"v-card-actions"},[n==null||(r=n.default)==null?void 0:r.call(n)])}),{}}}),Ak=Kr("v-card-avatar"),yie=Kr("v-card-content"),_ie=Kr("v-card-header"),wie=Kr("v-card-header-text"),bie=Kr("v-card-img"),Iie=Kr("v-card-subtitle"),Eie=Kr("v-card-text"),Tie=Kr("v-card-title"),Sie=_e({name:"VCard",directives:{Ripple:zp},props:E(E(E(E(E(E(E(E(E(E(E({appendAvatar:String,appendIcon:It,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:Boolean,prependAvatar:String,prependIcon:It,ripple:Boolean,subtitle:String,text:String,title:String},kn()),wa()),Ys()),ya()),Ia()),zL()),QL()),Ji()),sw()),nn()),Ad({variant:"contained"})),setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:i}=Qn(t),{borderClasses:s}=ba(t),{colorClasses:o,colorStyles:a,variantClasses:l}=rw(t),{densityClasses:c}=Qs(t),{dimensionStyles:u}=_a(t),{elevationClasses:d}=Ea(t),{locationStyles:h}=YL(t),{positionClasses:f}=XL(t),{roundedClasses:p}=Zi(t),g=iw(t,n);return()=>{var m,v,b,T;const C=g.isLink.value?"a":t.tag,S=!!(r.title||t.title),A=!!(r.subtitle||t.subtitle),k=S||A,P=!!(r.append||t.appendAvatar||t.appendIcon),O=!!(r.prepend||t.prependAvatar||t.prependIcon),W=!!(r.image||t.image),G=k||O||P,B=!!(r.text||t.text),ie=!t.disabled&&(g.isClickable.value||t.link);return Tr(y(C,{class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":ie},i.value,s.value,o.value,c.value,d.value,f.value,p.value,l.value],style:[a.value,u.value,h.value],href:g.href.value,onClick:ie&&g.navigate},{default:()=>[nw(ie,"v-card"),W&&y(nu,{defaults:{VImg:{cover:!0,src:t.image}}},{default:()=>[y(bie,null,{default:()=>[r.image?(m=r.image)==null?void 0:m.call(r):y(Gp,{alt:""},null)]})]}),(v=r.media)==null?void 0:v.call(r),G&&y(_ie,null,{default:()=>[O&&y(nu,{defaults:{VAvatar:{density:t.density,icon:t.prependIcon,image:t.prependAvatar}}},{default:()=>[y(Ak,null,{default:()=>[r.prepend?r.prepend():y(Pu,null,null)]})]}),k&&y(wie,null,{default:()=>[S&&y(Tie,null,{default:()=>[r.title?r.title():t.title]}),A&&y(Iie,null,{default:()=>[r.subtitle?r.subtitle():t.subtitle]}),(b=r.headerText)==null?void 0:b.call(r)]}),P&&y(nu,{defaults:{VAvatar:{density:t.density,icon:t.appendIcon,image:t.appendAvatar}}},{default:()=>[y(Ak,null,{default:()=>[r.append?r.append():y(Pu,null,null)]})]})]}),B&&y(Eie,null,{default:()=>[r.text?r.text():t.text]}),r.content&&y(yie,null,{default:r.content}),(T=r.default)==null?void 0:T.call(r),r.actions&&y(vie,null,{default:r.actions})]}),[[ma("ripple"),ie]])}}});const v_=Symbol.for("vuetify:v-menu"),Cie=De(E({activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean},qL()));function kie(t,e){let{isActive:n,isTop:r}=e;const i=X();let s=!1,o=!1;const a=I(()=>t.openOnFocus||t.openOnFocus==null&&t.openOnHover),l=I(()=>t.openOnClick||t.openOnClick==null&&!t.openOnHover&&!a.value),{runOpenDelay:c,runCloseDelay:u}=WL(t,v=>{v===(t.openOnHover&&s||a.value&&o)&&!(t.openOnHover&&n.value&&!r.value)&&(n.value=v)}),d={click:v=>{v.stopPropagation(),i.value=v.currentTarget||v.target,n.value=!n.value},mouseenter:v=>{s=!0,i.value=v.currentTarget||v.target,c()},mouseleave:v=>{s=!1,u()},focus:v=>{zv&&!v.target.matches(":focus-visible")||(o=!0,v.stopPropagation(),i.value=v.currentTarget||v.target,c())},blur:v=>{o=!1,v.stopPropagation(),u()}},h=I(()=>{const v={};return l.value&&(v.click=d.click),t.openOnHover&&(v.mouseenter=d.mouseenter,v.mouseleave=d.mouseleave),a.value&&(v.focus=d.focus,v.blur=d.blur),v}),f=I(()=>{const v={};if(t.openOnHover&&(v.mouseenter=()=>{s=!0,c()},v.mouseleave=()=>{s=!1,u()}),t.closeOnContentClick){const b=Ke(v_,null);v.click=()=>{n.value=!1,b==null||b.closeParents()}}return v});$e(r,v=>{v&&t.openOnHover&&!s&&(n.value=!1)});const p=X();zs(()=>{!p.value||Ar(()=>{const v=p.value;i.value=wU(v)?v.$el:v})});const g=ur("useActivator");let m;return $e(()=>!!t.activator,v=>{v&&bt?(m=Cd(),m.run(()=>{Aie(t,g,{activatorEl:i,activatorEvents:h})})):m&&m.stop()},{flush:"post",immediate:!0}),{activatorEl:i,activatorRef:p,activatorEvents:h,contentEvents:f}}function Aie(t,e,n){let{activatorEl:r,activatorEvents:i}=n;$e(()=>t.activator,(l,c)=>{if(c&&l!==c){const u=a(c);u&&o(u)}l&&Ar(()=>s())},{immediate:!0}),$e(()=>t.activatorProps,()=>{s()}),ha(()=>{o()});function s(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;!l||(Object.entries(i.value).forEach(u=>{let[d,h]=u;l.addEventListener(d,h)}),Object.keys(c).forEach(u=>{c[u]==null?l.removeAttribute(u):l.setAttribute(u,c[u])}))}function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;!l||(Object.entries(i.value).forEach(u=>{let[d,h]=u;l.removeEventListener(d,h)}),Object.keys(c).forEach(u=>{l.removeAttribute(u)}))}function a(){var l;let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.activator,u;if(c)if(c==="parent"){var d,h;let f=e==null||(d=e.proxy)==null||(h=d.$el)==null?void 0:h.parentNode;for(;f.hasAttribute("data-no-activator");)f=f.parentNode;u=f}else typeof c=="string"?u=document.querySelector(c):"$el"in c?u=c.$el:u=c;return r.value=((l=u)==null?void 0:l.nodeType)===Node.ELEMENT_NODE?u:null,r.value}}function Cv(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Rie(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Rk(t,e){if(t.side==="top"||t.side==="bottom"){const{side:n,align:r}=t,i=r==="start"?0:r==="center"?e.width/2:r==="end"?e.width:r,s=n==="top"?0:n==="bottom"?e.height:n;return Cv({x:i,y:s},e)}else if(t.side==="start"||t.side==="end"){const{side:n,align:r}=t,i=n==="start"?0:n==="end"?e.width:n,s=r==="top"?0:r==="center"?e.height/2:r==="bottom"?e.height:r;return Cv({x:i,y:s},e)}return Cv({x:e.width/2,y:e.height/2},e)}const JL={static:Pie,connected:Oie},Nie=De({locationStrategy:{type:[String,Function],default:"static",validator:t=>typeof t=="function"||t in JL},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String]});function xie(t,e){const n=X({}),r=X();let i;zs(async()=>{var o;(o=i)==null||o.stop(),r.value=void 0,bt&&e.isActive.value&&t.locationStrategy&&(i=Cd(),await Ar(),i.run(()=>{if(typeof t.locationStrategy=="function"){var a;r.value=(a=t.locationStrategy(e,t,n))==null?void 0:a.updateLocation}else{var l;r.value=(l=JL[t.locationStrategy](e,t,n))==null?void 0:l.updateLocation}}))}),bt&&window.addEventListener("resize",s,{passive:!0}),ha(()=>{var o;bt&&window.removeEventListener("resize",s),r.value=void 0,(o=i)==null||o.stop()});function s(o){var a;(a=r.value)==null||a.call(r,o)}return{contentStyles:n,updateLocation:r}}function Pie(){}function Oie(t,e,n){const r=$U(t.activatorEl.value);r&&Object.assign(n.value,{position:"fixed"});const i=I(()=>Wv(e.location)),s=I(()=>e.origin==="overlap"?i.value:e.origin==="auto"?Em(i.value):Wv(e.origin)),o=I(()=>i.value.side===s.value.side),a=I(()=>{const d=parseFloat(e.maxHeight);return isNaN(d)?1/0:d}),l=I(()=>{const d=parseFloat(e.minWidth);return isNaN(d)?1/0:d});let c=!1;if(bt){const d=new ResizeObserver(()=>{c&&u()});d.observe(t.activatorEl.value),d.observe(t.contentEl.value),ha(()=>{d.disconnect()})}function u(){var d;c=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>c=!0)});const h=t.activatorEl.value.getBoundingClientRect();e.offset&&(h.x-=+e.offset,h.y-=+e.offset,h.width+=+e.offset*2,h.height+=+e.offset*2);const f=aR(t.contentEl.value),p=f.clientWidth,g=Math.min(f.clientHeight,window.innerHeight);let m;{const Ae=new Map;t.contentEl.value.querySelectorAll("*").forEach(st=>{const kt=st.scrollLeft,He=st.scrollTop;(kt||He)&&Ae.set(st,[kt,He])});const be=t.contentEl.value.style.maxWidth,Ie=t.contentEl.value.style.maxHeight;t.contentEl.value.style.removeProperty("max-width"),t.contentEl.value.style.removeProperty("max-height"),m=z_(t.contentEl.value),m.x-=parseFloat(t.contentEl.value.style.left)||0,m.y-=parseFloat(t.contentEl.value.style.top)||0,t.contentEl.value.style.maxWidth=be,t.contentEl.value.style.maxHeight=Ie,Ae.forEach((st,kt)=>{kt.scrollTo(...st)})}const v=Math.min(a.value,m.height),b=e.maxWidth===void 0?Number.MAX_VALUE:parseInt((d=e.maxWidth)!=null?d:0,10),T=12,C={top:h.top-T,bottom:g-h.bottom-T,left:Math.min(h.left-T,b),right:Math.min(p-h.right-T,b)},S=i.value.side==="bottom"&&v<=C.bottom||i.value.side==="top"&&v<=C.top,A=S?i.value:i.value.side==="bottom"&&C.top>C.bottom||i.value.side==="top"&&C.bottom>C.top?Em(i.value):i.value,k=S?s.value:Em(A),O=o.value||["center","top","bottom"].includes(A.side)?Math.min(p,Math.max(h.width,p-T*2)):A.side==="end"?C.right:A.side==="start"?C.left:null,W=Math.min(l.value,O,h.width),G=S?a.value:Math.min(a.value,Math.floor(A.side==="top"?C.top:C.bottom)),B=Rk(A,h),ie=Rk(k,new ef(Ee(E({},m),{height:Math.min(v,G)}))),{x:oe,y:xe}=Rie(B,ie);Object.assign(n.value,{"--v-overlay-anchor-origin":dT(A,t.activatorEl.value),top:me(Math.round(xe)),left:me(Math.round(oe)),transformOrigin:dT(k,t.activatorEl.value),minWidth:me(W),maxWidth:me(O),maxHeight:me(G)})}return $e(()=>[i.value,s.value,e.offset],()=>u(),{immediate:!r}),r&&Ar(()=>u()),requestAnimationFrame(()=>{n.value.maxHeight&&u()}),{updateLocation:u}}let y_=!0;const Cp=[];function Die(t){!y_||Cp.length?(Cp.push(t),__()):(y_=!1,t(),__())}let Nk=-1;function __(){cancelAnimationFrame(Nk),Nk=requestAnimationFrame(()=>{const t=Cp.shift();t&&t(),Cp.length?__():y_=!0})}const w_={none:null,close:Fie,block:$ie,reposition:Vie},Mie=De({scrollStrategy:{type:[String,Function],default:"block",validator:t=>typeof t=="function"||t in w_}});function Lie(t,e){if(!bt)return;let n;zs(async()=>{var r;(r=n)==null||r.stop(),e.isActive.value&&t.scrollStrategy&&(n=Cd(),await Ar(),n.run(()=>{if(typeof t.scrollStrategy=="function")t.scrollStrategy(e);else{var i;(i=w_[t.scrollStrategy])==null||i.call(w_,e)}}))})}function Fie(t){var e;function n(r){t.isActive.value=!1}ZL((e=t.activatorEl.value)!=null?e:t.contentEl.value,n)}function $ie(t){var e;const n=[...new Set([...Gv(t.activatorEl.value),...Gv(t.contentEl.value)])].filter(s=>!s.classList.contains("v-overlay-scroll-blocked")),r=window.innerWidth-document.documentElement.offsetWidth,i=(s=>J_(s)&&s)(((e=t.root.value)==null?void 0:e.offsetParent)||document.documentElement);i&&t.root.value.classList.add("v-overlay--scroll-blocked"),n.forEach((s,o)=>{s.style.setProperty("--v-body-scroll-x",me(-s.scrollLeft)),s.style.setProperty("--v-body-scroll-y",me(-s.scrollTop)),s.style.setProperty("--v-scrollbar-offset",me(r)),s.classList.add("v-overlay-scroll-blocked")}),ha(()=>{n.forEach((s,o)=>{const a=parseFloat(s.style.getPropertyValue("--v-body-scroll-x")),l=parseFloat(s.style.getPropertyValue("--v-body-scroll-y"));s.style.removeProperty("--v-body-scroll-x"),s.style.removeProperty("--v-body-scroll-y"),s.style.removeProperty("--v-scrollbar-offset"),s.classList.remove("v-overlay-scroll-blocked"),s.scrollLeft=-a,s.scrollTop=-l}),i&&t.root.value.classList.remove("v-overlay--scroll-blocked")})}function Vie(t){var e;let n=!1,r=-1;function i(s){Die(()=>{var o,a;const l=performance.now();(o=(a=t.updateLocation).value)==null||o.call(a,s),n=(performance.now()-l)/(1e3/60)>2})}ZL((e=t.activatorEl.value)!=null?e:t.contentEl.value,s=>{n?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{i(s)})})):i(s)})}function ZL(t,e){const n=[document,...Gv(t)];n.forEach(r=>{r.addEventListener("scroll",e,{passive:!0})}),ha(()=>{n.forEach(r=>{r.removeEventListener("scroll",e)})})}function eF(t,e){let n;$e(t,r=>{if(r&&!n)n=Cd(),n.run(e);else{var i;(i=n)==null||i.stop(),n=void 0}},{immediate:!0})}function wu(t){return{teleportTarget:I(()=>{const n=t.value;if(n===!0||!bt)return;const r=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(r==null){I$(`Unable to locate target ${n}`);return}if(!wu.cache.has(r)){const i=document.createElement("div");i.className="v-overlay-container",r.appendChild(i),wu.cache.set(r,i)}return wu.cache.get(r)})}}wu.cache=new WeakMap;const Uie=De({eager:Boolean},"lazy");function Bie(t,e){const n=X(!1),r=I(()=>n.value||t.eager||e.value);$e(e,()=>n.value=!0);function i(){t.eager||(n.value=!1)}return{isBooted:n,hasContent:r,onAfterLeave:i}}const uo=bn([]);function jie(t,e){const n=ur("useStack"),r=X(+e.value);eF(t,()=>{var s;const o=(s=uo[uo.length-1])==null?void 0:s[1];r.value=o?o+10:+e.value,uo.push([n,r.value]),ha(()=>{const a=uo.findIndex(l=>l[0]===n);uo.splice(a,1)})});const i=X(!0);return zs(()=>{var s;const o=Pe((s=uo[uo.length-1])==null?void 0:s[0])===n;setTimeout(()=>i.value=o)}),{isTop:Pp(i),stackStyles:I(()=>({zIndex:r.value}))}}function qie(){return!0}function tF(t,e,n){if(!t||nF(t,n)===!1)return!1;const r=oR(e);if(typeof ShadowRoot!="undefined"&&r instanceof ShadowRoot&&r.host===t.target)return!1;const i=(typeof n.value=="object"&&n.value.include||(()=>[]))();return i.push(e),!i.some(s=>s==null?void 0:s.contains(t.target))}function nF(t,e){return(typeof e.value=="object"&&e.value.closeConditional||qie)(t)}function Wie(t,e,n){const r=typeof n.value=="function"?n.value:n.value.handler;e._clickOutside.lastMousedownWasOutside&&tF(t,e,n)&&setTimeout(()=>{nF(t,n)&&r&&r(t)},0)}function xk(t,e){const n=oR(t);e(document),typeof ShadowRoot!="undefined"&&n instanceof ShadowRoot&&e(n)}const Hie={mounted(t,e){const n=i=>Wie(i,t,e),r=i=>{t._clickOutside.lastMousedownWasOutside=tF(i,t,e)};xk(t,i=>{i.addEventListener("click",n,!0),i.addEventListener("mousedown",r,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!0}),t._clickOutside[e.instance.$.uid]={onClick:n,onMousedown:r}},unmounted(t,e){!t._clickOutside||(xk(t,n=>{var r;if(!n||!((r=t._clickOutside)!=null&&r[e.instance.$.uid]))return;const{onClick:i,onMousedown:s}=t._clickOutside[e.instance.$.uid];n.removeEventListener("click",i,!0),n.removeEventListener("mousedown",s,!0)}),delete t._clickOutside[e.instance.$.uid])}};function Kie(t){const i=t,{modelValue:e,color:n}=i,r=Ti(i,["modelValue","color"]);return y(hi,{name:"fade-transition",appear:!0},{default:()=>[t.modelValue&&y("div",ct({class:["v-overlay__scrim",t.color.backgroundColorClasses.value],style:t.color.backgroundColorStyles.value},r),null)]})}const rF=Yn()({name:"VOverlay",directives:{ClickOutside:Hie},inheritAttrs:!1,props:E(E(E(E(E(E(E({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[String,Boolean],default:!0},zIndex:{type:[Number,String],default:2e3}},Cie()),ya()),Nie()),Mie()),kn()),nc()),Uie()),emits:{"click:outside":t=>!0,"update:modelValue":t=>!0,afterLeave:()=>!0},setup(t,e){let{slots:n,attrs:r,emit:i}=e;const s=yn(t,"modelValue"),o=I({get:()=>s.value,set:oe=>{oe&&t.disabled||(s.value=oe)}}),{teleportTarget:a}=wu(I(()=>t.attach||t.contained)),{themeClasses:l}=Qn(t),{rtlClasses:c}=gm(),{hasContent:u,onAfterLeave:d}=Bie(t,o),h=Wi(I(()=>typeof t.scrim=="string"?t.scrim:null)),{isTop:f,stackStyles:p}=jie(o,Se(t,"zIndex")),{activatorEl:g,activatorRef:m,activatorEvents:v,contentEvents:b}=kie(t,{isActive:o,isTop:f}),{dimensionStyles:T}=_a(t);$e(()=>t.disabled,oe=>{oe&&(o.value=!1)});const C=X(),S=X(),{contentStyles:A,updateLocation:k}=xie(t,{contentEl:S,activatorEl:g,isActive:o});Lie(t,{root:C,contentEl:S,activatorEl:g,isActive:o,updateLocation:k});function P(oe){i("click:outside",oe),t.persistent?ie():o.value=!1}function O(){return o.value&&f.value}bt&&$e(o,oe=>{oe?window.addEventListener("keydown",W):window.removeEventListener("keydown",W)},{immediate:!0});function W(oe){oe.key==="Escape"&&f.value&&(t.persistent?ie():o.value=!1)}const G=SR();eF(()=>t.closeOnBack,()=>{EB(G,oe=>{f.value&&o.value?(oe(!1),t.persistent?ie():o.value=!1):oe()})});const B=X();$e(()=>o.value&&(t.absolute||t.contained)&&a.value==null,oe=>{if(oe){const xe=aR(C.value);xe&&xe!==document.scrollingElement&&(B.value=xe.scrollTop)}});function ie(){var oe;t.noClickAnimation||(oe=S.value)==null||oe.animate([{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:bf})}return Ft(()=>{var oe,xe;return y(at,null,[(oe=n.activator)==null?void 0:oe.call(n,{isActive:o.value,props:ct({ref:m},$E(v.value),t.activatorProps)}),bt&&y(pV,{disabled:!a.value,to:a.value},{default:()=>[u.value&&y("div",ct({class:["v-overlay",{"v-overlay--absolute":t.absolute||t.contained,"v-overlay--active":o.value,"v-overlay--contained":t.contained},l.value,c.value],style:[p.value,{top:me(B.value)}],ref:C},r),[y(Kie,{color:h,modelValue:o.value&&!!t.scrim},null),y(To,{appear:!0,persisted:!0,transition:t.transition,target:g.value,onAfterLeave:()=>{d(),i("afterLeave")}},{default:()=>[Tr(y("div",ct({ref:S,class:["v-overlay__content",t.contentClass],style:[T.value,A.value]},$E(b.value),t.contentProps),[(xe=n.default)==null?void 0:xe.call(n,{isActive:o})]),[[kd,o.value],[ma("click-outside"),{handler:P,closeConditional:O,include:()=>[g.value]}]])]})])]})])}),{animateClick:ie,contentEl:S,activatorEl:g,isTop:f,updateLocation:k}}});function iF(){const e=ur("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const Gie=Yn()({name:"VDialog",inheritAttrs:!1,props:E(E({fullscreen:Boolean,origin:{type:String,default:"center center"},retainFocus:{type:Boolean,default:!0},scrollable:Boolean,modelValue:Boolean},ya({width:"auto"})),nc({transition:{component:hR}})),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const i=yn(t,"modelValue"),{dimensionStyles:s}=_a(t),{scopeId:o}=iF(),a=X();function l(c){var u,d;const h=c.relatedTarget,f=c.target;if(h!==f&&(u=a.value)!=null&&u.contentEl&&(d=a.value)!=null&&d.isTop&&![document,a.value.contentEl].includes(f)&&!a.value.contentEl.contains(f)){const p=[...a.value.contentEl.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')].filter(v=>!v.hasAttribute("disabled"));if(!p.length)return;const g=p[0],m=p[p.length-1];h===g?m.focus():g.focus()}}return bt&&$e(()=>i.value&&t.retainFocus,c=>{c?document.addEventListener("focusin",l):document.removeEventListener("focusin",l)},{immediate:!0}),$e(i,async c=>{if(await Ar(),c){var u;(u=a.value.contentEl)==null||u.focus({preventScroll:!0})}else{var d;(d=a.value.activatorEl)==null||d.focus({preventScroll:!0})}}),()=>y(rF,ct({modelValue:i.value,"onUpdate:modelValue":c=>i.value=c,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable}],style:s.value,transition:t.transition,ref:a,"aria-role":"dialog","aria-modal":"true",activatorProps:{"aria-haspopup":"dialog","aria-expanded":String(i.value)},"z-index":2400},o,n),{default:r.default,activator:r.activator})}}),sF=Symbol.for("vuetify:form"),zie=De({disabled:Boolean,fastFail:Boolean,lazyValidation:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null}});function Yie(t){const e=yn(t,"modelValue"),n=I(()=>t.disabled),r=I(()=>t.readonly),i=X(!1),s=X([]),o=X([]);async function a(){const u=[];let d=!0;o.value=[],i.value=!0;for(const h of s.value){const f=await h.validate();if(f.length>0&&(d=!1,u.push({id:h.id,errorMessages:f})),!d&&t.fastFail)break}return o.value=u,i.value=!1,{valid:d,errorMessages:o.value}}function l(){s.value.forEach(u=>u.reset()),e.value=null}function c(){s.value.forEach(u=>u.resetValidation()),o.value=[],e.value=null}return $e(s,()=>{let u=null;s.value.some(d=>d.isValid===!1)?u=!1:s.value.every(d=>d.isValid===!0)&&(u=!0),e.value=u},{deep:!0}),Kt(sF,{register:(u,d,h,f,p)=>{s.value.some(g=>g.id===u)&&Do(`Duplicate input name "${u}"`),s.value.push({id:u,validate:d,reset:h,resetValidation:f,isValid:p})},unregister:u=>{s.value=s.value.filter(d=>d.id!==u)},isDisabled:n,isReadonly:r,isValidating:i,items:s}),{errorMessages:o,isDisabled:n,isReadonly:r,isValidating:i,items:s,validate:a,reset:l,resetValidation:c}}function Qie(){return Ke(sF,null)}function mm(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new Proxy(t,{get(i,s){if(Reflect.has(i,s))return Reflect.get(i,s);for(const o of n)if(o.value&&Reflect.has(o.value,s)){const a=Reflect.get(o.value,s);return typeof a=="function"?a.bind(o.value):a}},getOwnPropertyDescriptor(i,s){const o=Reflect.getOwnPropertyDescriptor(i,s);if(o)return o;for(const a of n){if(!a.value)continue;const l=Reflect.getOwnPropertyDescriptor(a.value,s);if(l)return l}for(const a of n){let l=a.value&&Object.getPrototypeOf(a.value);for(;l;){const c=Reflect.getOwnPropertyDescriptor(l,s);if(c)return c;l=Object.getPrototypeOf(l)}}}})}const Pk=_e({name:"VForm",props:E({},zie()),emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,e){let{slots:n,emit:r}=e;const i=Yie(t),s=X();function o(l){l.preventDefault(),i.reset()}function a(l){const c=l,u=i.validate();c.then=u.then.bind(u),c.catch=u.catch.bind(u),c.finally=u.finally.bind(u),r("submit",c),c.defaultPrevented||u.then(d=>{let{valid:h}=d;if(h){var f;(f=s.value)==null||f.submit()}}),c.preventDefault()}return Ft(()=>{var l;return y("form",{ref:s,class:"v-form",novalidate:!0,onReset:o,onSubmit:a},[(l=n.default)==null?void 0:l.call(n,i)])}),mm(i,s)}});const Xie=_e({name:"VMessages",props:E({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]}},nc({transition:{component:fR,leaveAbsolute:!0,group:!0}})),setup(t,e){let{slots:n}=e;const r=I(()=>Al(t.messages)),{textColorClasses:i,textColorStyles:s}=Ps(I(()=>t.color));return()=>y(To,{transition:t.transition,tag:"div",class:["v-messages",i.value],style:s.value},{default:()=>[t.active&&r.value.map((o,a)=>y("div",{class:"v-messages__message",key:`${a}-${r.value}`},[n.message?n.message({message:o}):o]))]})}}),Jie=De({disabled:Boolean,error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,readonly:Boolean,rules:{type:Array,default:()=>[]},modelValue:null});function Zie(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xi();const n=yn(t,"modelValue"),r=Qie(),i=X([]),s=X(!0),o=I(()=>Al(n.value===""?null:n.value).length>0),a=I(()=>!!(t.disabled||r!=null&&r.isDisabled.value)),l=I(()=>!!(t.readonly||r!=null&&r.isReadonly.value)),c=I(()=>t.errorMessages.length?Al(t.errorMessages):i.value),u=I(()=>t.rules.length?t.error||c.value.length?!1:s.value?null:!0:!0),d=X(!1),h=I(()=>({[`${e}--error`]:u.value===!1,[`${e}--dirty`]:o.value,[`${e}--disabled`]:a.value,[`${e}--readonly`]:l.value})),f=I(()=>{var v;return(v=t.name)!=null?v:Hr()});Up(()=>{r==null||r.register(f.value,m,p,g,u)}),Wr(()=>{r==null||r.unregister(f.value)}),$e(n,()=>{n.value!=null&&m()});function p(){g(),n.value=null}function g(){s.value=!0,i.value=[]}async function m(){const v=[];d.value=!0;for(const b of t.rules){if(v.length>=(t.maxErrors||1))break;const C=await(typeof b=="function"?b:()=>b)(n.value);if(C!==!0){if(typeof C!="string"){console.warn(`${C} is not a valid value. Rule functions must return boolean true or a string.`);continue}v.push(C)}}return i.value=v,d.value=!1,s.value=!1,i.value}return{errorMessages:c,isDirty:o,isDisabled:a,isReadonly:l,isPristine:s,isValid:u,isValidating:d,reset:p,resetValidation:g,validate:m,validationClasses:h}}const pE=De(E(E({id:String,appendIcon:It,prependIcon:It,hideDetails:[Boolean,String],messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:t=>["horizontal","vertical"].includes(t)}},Ys()),Jie())),gE=Yn()({name:"VInput",props:E({},pE()),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r,emit:i}=e;const{densityClasses:s}=Qs(t),{errorMessages:o,isDirty:a,isDisabled:l,isReadonly:c,isPristine:u,isValid:d,isValidating:h,reset:f,resetValidation:p,validate:g,validationClasses:m}=Zie(t),v=Hr(),b=I(()=>t.id||`input-${v}`),T=I(()=>({id:b,isDirty:a,isDisabled:l,isReadonly:c,isPristine:u,isValid:d,isValidating:h,reset:f,resetValidation:p,validate:g}));return Ft(()=>{var C,S,A,k,P;const O=!!(r.prepend||t.prependIcon),W=!!(r.append||t.appendIcon),G=!!((C=t.messages)!=null&&C.length||o.value.length),B=!t.hideDetails||t.hideDetails==="auto"&&G;return y("div",{class:["v-input",`v-input--${t.direction}`,s.value,m.value]},[O&&y("div",{class:"v-input__prepend"},[r==null||(S=r.prepend)==null?void 0:S.call(r,T.value),t.prependIcon&&y(Kn,{onClick:n["onClick:prepend"],icon:t.prependIcon},null)]),r.default&&y("div",{class:"v-input__control"},[(A=r.default)==null?void 0:A.call(r,T.value)]),W&&y("div",{class:"v-input__append"},[r==null||(k=r.append)==null?void 0:k.call(r,T.value),t.appendIcon&&y(Kn,{onClick:n["onClick:append"],icon:t.appendIcon},null)]),B&&y("div",{class:"v-input__details"},[y(Xie,{active:G,messages:o.value.length>0?o.value:t.messages},{message:r.message}),(P=r.details)==null?void 0:P.call(r,T.value)])])}),{reset:f,resetValidation:p,validate:g}}});function oF(t){return va(t,Object.keys(gE.props))}const aF=_e({name:"VLabel",props:E({text:String},kn()),setup(t,e){let{slots:n}=e;return()=>{var r;return y("label",{class:"v-label"},[t.text,(r=n.default)==null?void 0:r.call(n)])}}}),Kh=_e({name:"VFieldLabel",props:{floating:Boolean},setup(t,e){let{slots:n}=e;return()=>y(aF,{class:["v-field-label",{"v-field-label--floating":t.floating}],"aria-hidden":t.floating||void 0},n)}});function lF(t){const e=X(),n=X(!1);if(Z_){const r=new IntersectionObserver(i=>{t==null||t(i,r),n.value=!!i.find(s=>s.isIntersecting)});Wr(()=>{r.disconnect()}),$e(e,(i,s)=>{s&&(r.unobserve(s),n.value=!1),i&&r.observe(i)},{flush:"post"})}return{intersectionRef:e,isIntersecting:n}}const ese=_e({name:"VProgressLinear",props:E(E(E({active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean},Ji()),nn()),kn()),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=yn(t,"modelValue"),{isRtl:i}=gm(),{themeClasses:s}=Qn(t),{textColorClasses:o,textColorStyles:a}=Ps(t,"color"),{backgroundColorClasses:l,backgroundColorStyles:c}=Wi(I(()=>t.bgColor||t.color)),{backgroundColorClasses:u,backgroundColorStyles:d}=Wi(t,"color"),{roundedClasses:h}=Zi(t),{intersectionRef:f,isIntersecting:p}=lF(),g=I(()=>parseInt(t.max,10)),m=I(()=>parseInt(t.height,10)),v=I(()=>parseFloat(t.bufferValue)/g.value*100),b=I(()=>parseFloat(r.value)/g.value*100),T=I(()=>i.value!==t.reverse),C=I(()=>t.indeterminate?"fade-transition":"slide-x-transition"),S=I(()=>t.bgOpacity==null?t.bgOpacity:parseFloat(t.bgOpacity));function A(k){if(!f.value)return;const{left:P,right:O,width:W}=f.value.getBoundingClientRect(),G=T.value?W-k.clientX+(O-W):k.clientX-P;r.value=Math.round(G/W*g.value)}return()=>y(t.tag,{ref:f,class:["v-progress-linear",{"v-progress-linear--active":t.active&&p.value,"v-progress-linear--reverse":T.value,"v-progress-linear--rounded":t.rounded,"v-progress-linear--rounded-bar":t.roundedBar,"v-progress-linear--striped":t.striped},h.value,s.value],style:{height:t.active?me(m.value):0,"--v-progress-linear-height":me(m.value)},role:"progressbar","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.indeterminate?void 0:b.value,onClick:t.clickable&&A},{default:()=>[t.stream&&y("div",{class:["v-progress-linear__stream",o.value],style:Ee(E({},a.value),{[T.value?"left":"right"]:me(-m.value),borderTop:`${me(m.value/2)} dotted`,opacity:S.value,top:`calc(50% - ${me(m.value/4)})`,width:me(100-v.value,"%"),"--v-progress-linear-stream-to":me(m.value*(T.value?1:-1))})},null),y("div",{class:["v-progress-linear__background",l.value],style:[c.value,{opacity:S.value,width:me(t.stream?v.value:100,"%")}]},null),y(hi,{name:C.value},{default:()=>[t.indeterminate?y("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(k=>y("div",{key:k,class:["v-progress-linear__indeterminate",k,u.value],style:d.value},null))]):y("div",{class:["v-progress-linear__determinate",u.value],style:[d.value,{width:me(b.value,"%")}]},null)]}),n.default&&y("div",{class:"v-progress-linear__content"},[n.default({value:b.value,buffer:v.value})])]})}}),tse=De({loading:Boolean},"loader");function cF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xi();return{loaderClasses:I(()=>({[`${e}--loading`]:t.loading}))}}function uF(t,e){var n;let{slots:r}=e;return y("div",{class:`${t.name}__loader`},[((n=r.default)==null?void 0:n.call(r,{color:t.color,isActive:t.active}))||y(ese,{active:t.active,color:t.color,height:"2",indeterminate:!0},null)])}const nse=De({focused:Boolean},"focus");function rse(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xi();const n=yn(t,"focused"),r=I(()=>({[`${e}--focused`]:n.value}));function i(){n.value=!0}function s(){n.value=!1}return{focusClasses:r,isFocused:n,focus:i,blur:s}}const ise=["underlined","outlined","filled","contained","plain"],dF=De(E(E({appendInnerIcon:It,bgColor:String,clearable:Boolean,clearIcon:{type:It,default:"$clear"},active:Boolean,color:String,dirty:Boolean,disabled:Boolean,error:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:It,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:t=>ise.includes(t)}},kn()),tse()),"v-field"),hF=Yn()({name:"VField",inheritAttrs:!1,props:E(E({id:String},nse()),dF()),emits:{"click:clear":t=>!0,"click:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{themeClasses:s}=Qn(t),{loaderClasses:o}=cF(t),{focusClasses:a,isFocused:l,focus:c,blur:u}=rse(t),d=I(()=>t.dirty||t.active),h=I(()=>!t.singleLine&&!!(t.label||i.label)),f=Hr(),p=I(()=>t.id||`input-${f}`),g=X(),m=X(),v=X(),{backgroundColorClasses:b,backgroundColorStyles:T}=Wi(Se(t,"bgColor")),{textColorClasses:C,textColorStyles:S}=Ps(I(()=>d.value&&l.value&&!t.error&&!t.disabled?t.color:void 0));$e(d,P=>{if(h.value){const O=g.value.$el,W=m.value.$el,G=z_(O),B=W.getBoundingClientRect(),ie=B.x-G.x,oe=B.y-G.y-(G.height/2-B.height/2),xe=B.width/.75,Ae=Math.abs(xe-G.width)>1?{maxWidth:me(xe)}:void 0,be=parseFloat(getComputedStyle(O).transitionDuration)*1e3,Ie=parseFloat(getComputedStyle(W).getPropertyValue("--v-field-label-scale"));O.style.visibility="visible",W.style.visibility="hidden",O.animate([{transform:"translate(0)"},E({transform:`translate(${ie}px, ${oe}px) scale(${Ie})`},Ae)],{duration:be,easing:bf,direction:P?"normal":"reverse"}).finished.then(()=>{O.style.removeProperty("visibility"),W.style.removeProperty("visibility")})}},{flush:"post"});const A=I(()=>({isActive:d,isFocused:l,controlRef:v,blur:u,focus:c}));function k(P){P.target!==document.activeElement&&P.preventDefault(),r("click:control",P)}return Ft(()=>{var P,O,W;const G=t.variant==="outlined",B=i.prependInner||t.prependInnerIcon,ie=!!(t.clearable||i.clear),oe=!!(i.appendInner||t.appendInnerIcon||ie),xe=i.label?i.label({label:t.label,props:{for:p.value}}):t.label;return y("div",ct({class:["v-field",{"v-field--active":d.value,"v-field--appended":oe,"v-field--disabled":t.disabled,"v-field--dirty":t.dirty,"v-field--error":t.error,"v-field--has-background":!!t.bgColor,"v-field--persistent-clear":t.persistentClear,"v-field--prepended":B,"v-field--reverse":t.reverse,"v-field--single-line":t.singleLine,"v-field--has-label":!!xe,[`v-field--variant-${t.variant}`]:!0},s.value,b.value,a.value,o.value],style:[T.value,S.value],onClick:k},n),[y("div",{class:"v-field__overlay"},null),y(uF,{name:"v-field",active:t.loading,color:t.error?"error":t.color},{default:i.loader}),B&&y("div",{class:"v-field__prepend-inner"},[t.prependInnerIcon&&y(Kn,{onClick:n["onClick:prependInner"],icon:t.prependInnerIcon},null),i==null||(P=i.prependInner)==null?void 0:P.call(i,A.value)]),y("div",{class:"v-field__field","data-no-activator":""},[["contained","filled"].includes(t.variant)&&h.value&&y(Kh,{ref:m,class:[C.value],floating:!0},{default:()=>[xe]}),y(Kh,{ref:g,for:p.value},{default:()=>[xe]}),(O=i.default)==null?void 0:O.call(i,Ee(E({},A.value),{props:{id:p.value,class:"v-field__input"},focus:c,blur:u}))]),ie&&y(iB,null,{default:()=>[Tr(y("div",{class:"v-field__clearable"},[i.clear?i.clear():y(Kn,{onClick:Ae=>r("click:clear",Ae),icon:t.clearIcon},null)]),[[kd,t.dirty]])]}),oe&&y("div",{class:"v-field__append-inner"},[i==null||(W=i.appendInner)==null?void 0:W.call(i,A.value),t.appendInnerIcon&&y(Kn,{onClick:n["onClick:appendInner"],icon:t.appendInnerIcon},null)]),y("div",{class:["v-field__outline",C.value]},[G&&y(at,null,[y("div",{class:"v-field__outline__start"},null),h.value&&y("div",{class:"v-field__outline__notch"},[y(Kh,{ref:m,floating:!0},{default:()=>[xe]})]),y("div",{class:"v-field__outline__end"},null)]),["plain","underlined"].includes(t.variant)&&h.value&&y(Kh,{ref:m,floating:!0},{default:()=>[xe]})])])}),{controlRef:v}}});function sse(t){return va(t,Object.keys(hF.props))}const ose=_e({name:"VCounter",functional:!0,props:E({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0}},nc({transition:{component:fR}})),setup(t,e){let{slots:n}=e;const r=I(()=>t.max?`${t.value} / ${t.max}`:String(t.value));return()=>y(To,{transition:t.transition},{default:()=>[Tr(y("div",{class:"v-counter"},[n.default?n.default({counter:r.value,max:t.max,value:t.value}):r.value]),[[kd,t.active]])]})}}),ase=["color","file","time","date","datetime-local","week","month"],Gh=Yn()({name:"VTextField",directives:{Intersect:IR},inheritAttrs:!1,props:E(E({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,type:{type:String,default:"text"}},pE()),dF()),emits:{"click:clear":t=>!0,"click:control":t=>!0,"click:input":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const s=yn(t,"modelValue"),o=I(()=>{var b;return typeof t.counterValue=="function"?t.counterValue(s.value):((b=s.value)!=null?b:"").toString().length}),a=I(()=>{if(n.maxlength)return n.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter});function l(b,T){var C,S;!t.autofocus||!b||(C=T[0].target)==null||(S=C.focus)==null||S.call(C)}const c=X(),u=X(),d=X(!1),h=X(),f=I(()=>ase.includes(t.type)||t.persistentPlaceholder||d.value),p=I(()=>t.messages.length?t.messages:d.value||t.persistentHint?t.hint:"");function g(){if(h.value!==document.activeElement){var b;(b=h.value)==null||b.focus()}d.value||(d.value=!0)}function m(b){g(),r("click:control",b)}function v(b){b.stopPropagation(),g(),Ar(()=>{s.value="",r("click:clear",b)})}return Ft(()=>{const b=!!(i.counter||t.counter||t.counterValue),[T,C]=ZA(n),[P]=oF(t),O=P,{modelValue:S}=O,A=Ti(O,["modelValue"]),[k]=sse(t);return y(gE,ct({ref:c,modelValue:s.value,"onUpdate:modelValue":W=>s.value=W,class:["v-text-field",{"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-text-field--flush-details":["plain","underlined"].includes(t.variant)}],"onClick:prepend":n["onClick:prepend"],"onClick:append":n["onClick:append"]},T,A,{messages:p.value}),Ee(E({},i),{default:W=>{let{isDisabled:G,isDirty:B,isReadonly:ie,isValid:oe}=W;return y(hF,ct({ref:u,onMousedown:xe=>{xe.target!==h.value&&xe.preventDefault()},"onClick:control":m,"onClick:clear":v,"onClick:prependInner":n["onClick:prependInner"],"onClick:appendInner":n["onClick:appendInner"],role:"textbox"},k,{active:f.value||B.value,dirty:B.value||t.dirty,focused:d.value,error:oe.value===!1}),Ee(E({},i),{default:xe=>{var Ae;let{props:st}=xe,kt=st,{class:be}=kt,Ie=Ti(kt,["class"]);return y(at,null,[t.prefix&&y("span",{class:"v-text-field__prefix"},[t.prefix]),y("div",{class:be,onClick:He=>r("click:input",He),"data-no-activator":""},[(Ae=i.default)==null?void 0:Ae.call(i),Tr(y("input",ct({ref:h,"onUpdate:modelValue":He=>s.value=He,autofocus:t.autofocus,readonly:ie.value,disabled:G.value,name:t.name,placeholder:t.placeholder,size:1,type:t.type,onFocus:g,onBlur:()=>d.value=!1},Ie,C),null),[[YA,s.value],[ma("intersect"),{handler:l},null,{once:!0}]])]),t.suffix&&y("span",{class:"v-text-field__suffix"},[t.suffix])])}}))},details:b?()=>y(at,null,[y("span",null,null),y(ose,{active:t.persistentCounter||d.value,value:o.value,max:a.value},i.counter)]):void 0}))}),mm({},c,u,h)}});function lse(){et.database().ref("users/").child(et.auth().currentUser.uid).set({fullName:"",email:et.auth().currentUser.email,role:"user",photo:""})}const cse={name:"LoginRegister",data:()=>({loginWindow:!1,email:null,password:null,showPassword:!1,confirmPassword:null,registrationWindow:!0,showConfirmPassword:!1}),methods:{createAccount(){et.auth().createUserWithEmailAndPassword(this.email,this.password).then(t=>{Td.push("/"),this.loginWindow=!1,lse()}).catch(t=>{console.log(t.code),alert(t.message)})},signInOnAccount(){et.auth().signInWithEmailAndPassword(this.email,this.password).then(t=>{Td.push("/"),this.loginWindow=!1}).catch(t=>{alert(t)})}}},use=ri("h1",{class:"text-center"},"Login",-1),dse=wi(" Login "),hse={class:"d-flex align-center justify-center"},fse=wi(" Dont have account? "),pse=wi(" Registration "),gse=ri("h1",{class:"text-center"},"Registration",-1),mse=wi(" Registration "),vse={class:"d-flex align-center justify-center"},yse=wi(" You have account? "),_se=wi(" Login ");function wse(t,e,n,r,i,s){return Ht(),br(Gie,{modelValue:t.loginWindow,"onUpdate:modelValue":e[10]||(e[10]=o=>t.loginWindow=o)},{activator:Oe(({props:o})=>[y(Pu,ct({icon:"login",class:"v-card--hover"},o),null,16)]),default:Oe(()=>[y(Sie,{"min-width":"600",class:"pa-5"},{default:Oe(()=>[y(jL,{justify:"center"},{default:Oe(()=>[y(ML,{cols:"6"},{default:Oe(()=>[t.registrationWindow?(Ht(),br(Pk,{key:0,class:"text-center"},{default:Oe(()=>[use,y(Gh,{variant:"outlined",modelValue:t.email,"onUpdate:modelValue":e[0]||(e[0]=o=>t.email=o),"hide-details":"auto",label:"Email",class:"py-2"},null,8,["modelValue"]),y(Gh,{variant:"outlined",modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=o=>t.password=o),"hide-details":"auto",label:"Password",class:"py-2","append-icon":t.showPassword?"visibility":"visibility_off",type:t.showPassword?"text":"password","onClick:append":e[2]||(e[2]=o=>t.showPassword=!t.showPassword)},null,8,["modelValue","append-icon","type"]),ri("div",null,[y(cl,{block:"",color:"success",onClick:e[3]||(e[3]=o=>s.signInOnAccount())},{default:Oe(()=>[dse]),_:1})]),ri("div",hse,[fse,y(cl,{color:"primary",size:"x-small",onClick:e[4]||(e[4]=o=>t.registrationWindow=!1)},{default:Oe(()=>[pse]),_:1})])]),_:1})):(Ht(),br(Pk,{key:1,class:"text-center"},{default:Oe(()=>[gse,y(Gh,{variant:"outlined",modelValue:t.email,"onUpdate:modelValue":e[5]||(e[5]=o=>t.email=o),"hide-details":"auto",label:"Email",class:"py-2"},null,8,["modelValue"]),y(Gh,{variant:"outlined",modelValue:t.password,"onUpdate:modelValue":e[6]||(e[6]=o=>t.password=o),"hide-details":"auto",label:"Password",class:"py-2","append-icon":t.showPassword?"visibility":"visibility_off",type:t.showPassword?"text":"password","onClick:append":e[7]||(e[7]=o=>t.showPassword=!t.showPassword)},null,8,["modelValue","append-icon","type"]),ri("div",null,[y(cl,{block:"",color:"success",onClick:e[8]||(e[8]=o=>s.createAccount())},{default:Oe(()=>[mse]),_:1})]),ri("div",vse,[yse,y(cl,{color:"primary",size:"x-small",onClick:e[9]||(e[9]=o=>t.registrationWindow=!0)},{default:Oe(()=>[_se]),_:1})])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var bse=ec(cse,[["render",wse]]);const Ise=Yn()({name:"VMenu",inheritAttrs:!1,props:E({modelValue:Boolean,id:String},nc({transition:{component:hR}})),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const i=yn(t,"modelValue"),{scopeId:s}=iF(),o=Hr(),a=I(()=>t.id||`v-menu-${o}`),l=X(),c=Ke(v_,null);let u=0;Kt(v_,{register(){++u},unregister(){--u},closeParents(){setTimeout(()=>{u||(i.value=!1,c==null||c.closeParents())},40)}}),$e(i,h=>{h?c==null||c.register():c==null||c.unregister()});function d(){c==null||c.closeParents()}return Ft(()=>y(rF,ct({ref:l,modelValue:i.value,"onUpdate:modelValue":h=>i.value=h,class:["v-menu"],transition:t.transition,absolute:!0,closeOnContentClick:!0,locationStrategy:"connected",scrollStrategy:"reposition",scrim:!1,openDelay:"300",closeDelay:"250",activatorProps:{"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-owns":a.value},"onClick:outside":d},s,n),{default:r.default,activator:r.activator})),mm({id:a},l)}}),Ese={name:"ProfileToolbar",data:()=>({userMenu:[{to:"/userProfile",title:"Profile"}]}),methods:{singOut(){et.auth().signOut(),Td.push("/")}}},Tse=wi("Logout");function Sse(t,e,n,r,i,s){const o=Fi("router-link");return Ht(),Sl(at,null,[y(Pu,{id:"activator",icon:"account_circle",image:t.$store.state.userPhoto,size:"large",class:"v-card--hover"},null,8,["image"]),y(Ise,{activator:"#activator",location:"start"},{default:Oe(()=>[y($R,null,{default:Oe(()=>[(Ht(!0),Sl(at,null,q_(t.userMenu,a=>(Ht(),br(o,{key:a.to,to:a.to,class:"text-decoration-none text-black"},{default:Oe(()=>[y(HL,null,{default:Oe(({isHovering:l,props:c})=>[y(Mu,ct(c,{class:l?"bg-grey lighten-4":""}),{default:Oe(()=>[y(TR,null,{default:Oe(()=>[wi(k_(a.title),1)]),_:2},1024)]),_:2},1040,["class"])]),_:2},1024)]),_:2},1032,["to"]))),128)),y(Mu,null,{default:Oe(()=>[y(cl,{variant:"contained-flat",color:"error",onClick:e[0]||(e[0]=a=>s.singOut())},{default:Oe(()=>[Tse]),_:1})]),_:1})]),_:1})]),_:1})],64)}var Cse=ec(Ese,[["render",Sse]]);const fF=Yn()({name:"VToolbarTitle",props:E({text:String},nn()),setup(t,e){let{slots:n}=e;return Ft(()=>{var r;const i=!!(n.default||n.text||t.text);return y(t.tag,{class:"v-toolbar-title"},{default:()=>[i&&y("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():t.text,(r=n.default)==null?void 0:r.call(n)])]})}),{}}}),kse=[null,"prominent","default","comfortable","compact"],pF=De(E(E(E(E(E({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:t=>kse.includes(t)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:56},image:String,title:String},wa()),Ia()),Ji()),nn({tag:"header"})),kn()),"v-toolbar"),b_=Yn()({name:"VToolbar",props:pF(),setup(t,e){var n;let{slots:r}=e;const{borderClasses:i}=ba(t),{elevationClasses:s}=Ea(t),{roundedClasses:o}=Zi(t),{themeClasses:a}=Qn(t),{backgroundColorClasses:l,backgroundColorStyles:c}=Wi(Se(t,"color")),u=X(!!(t.extended||(n=r.extension)!=null&&n.call(r))),d=I(()=>parseInt(Number(t.height)+(t.density==="prominent"?Number(t.height):0)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0),10)),h=I(()=>u.value?parseInt(Number(t.extensionHeight)+(t.density==="prominent"?Number(t.extensionHeight):0)-(t.density==="comfortable"?4:0)-(t.density==="compact"?8:0),10):0);return tc({VBtn:{flat:!0,variant:"text"}}),Ft(()=>{var f,p,g,m,v;const b=!!(t.title||r.title),T=!!(r.image||t.image),C=(f=r.extension)==null?void 0:f.call(r);return u.value=!!(t.extended||C),y(t.tag,{class:["v-toolbar",{"v-toolbar--absolute":t.absolute,"v-toolbar--collapse":t.collapse,"v-toolbar--flat":t.flat,"v-toolbar--floating":t.floating,[`v-toolbar--density-${t.density}`]:!0},l.value,i.value,s.value,o.value,a.value],style:[c.value]},{default:()=>[T&&y("div",{class:"v-toolbar__image"},[y(nu,{defaults:{VImg:{cover:!0,src:t.image}},scoped:!0},{default:()=>[r.image?(p=r.image)==null?void 0:p.call(r):y(Gp,null,null)]})]),y("div",{class:"v-toolbar__content",style:{height:me(d.value)}},[r.prepend&&y("div",{class:"v-toolbar__prepend"},[(g=r.prepend)==null?void 0:g.call(r)]),b&&y(fF,{text:t.title},{text:r.title}),(m=r.default)==null?void 0:m.call(r),r.append&&y("div",{class:"v-toolbar__append"},[(v=r.append)==null?void 0:v.call(r)])]),y(pR,null,{default:()=>[u.value&&y("div",{class:"v-toolbar__extension",style:{height:me(h.value)}},[C])]})]})}),mm({contentHeight:d,extensionHeight:h})}});function Ase(t){var e;return va(t,Object.keys((e=b_==null?void 0:b_.props)!=null?e:{}))}const Rse=_e({name:"VAppBar",props:Ee(E(E({modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)}},pF()),BR()),{height:{type:[Number,String],default:64}}),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=X(),i=yn(t,"modelValue"),s=I(()=>{var a,l,c,u;const d=(a=(l=r.value)==null?void 0:l.contentHeight)!=null?a:0,h=(c=(u=r.value)==null?void 0:u.extensionHeight)!=null?c:0;return d+h}),{layoutItemStyles:o}=jR({id:t.name,order:I(()=>parseInt(t.order,10)),position:Se(t,"location"),layoutSize:s,elementSize:s,active:i,absolute:Se(t,"absolute")});return()=>{const[a]=Ase(t);return y(b_,ct({ref:r,class:["v-app-bar",{"v-app-bar--bottom":t.location==="bottom"}],style:Ee(E({},o.value),{height:void 0})},a),n)}}}),Nse=_e({name:"VAppBarNavIcon",props:{icon:{type:It,default:"$menu"}},setup(t,e){let{slots:n}=e;return()=>{var r;return y(cl,{class:"v-app-bar-nav-icon",icon:t.icon},{default:()=>[(r=n.default)==null?void 0:r.call(n)]})}}});const gF=Symbol.for("vuetify:selection-control-group");_e({name:"VSelectionControlGroup",props:{disabled:Boolean,id:String,inline:Boolean,name:String,falseIcon:It,trueIcon:It,multiple:{type:Boolean,default:null},readonly:Boolean,type:String,modelValue:null},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=yn(t,"modelValue"),i=Hr(),s=I(()=>t.id||`v-selection-control-group-${i}`),o=I(()=>t.name||s.value);return Kt(gF,{disabled:Se(t,"disabled"),inline:Se(t,"inline"),modelValue:r,multiple:I(()=>!!t.multiple||t.multiple==null&&Array.isArray(r.value)),name:o,falseIcon:Se(t,"falseIcon"),trueIcon:Se(t,"trueIcon"),readonly:Se(t,"readonly"),type:Se(t,"type")}),Ft(()=>{var a;return y("div",{class:"v-selection-control-group","aria-labelled-by":t.type==="radio"?s.value:void 0,role:t.type==="radio"?"radiogroup":void 0},[n==null||(a=n.default)==null?void 0:a.call(n)])}),{}}});const mF=De(E(E({color:String,disabled:Boolean,error:Boolean,id:String,inline:Boolean,label:String,falseIcon:It,trueIcon:It,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,trueValue:null,falseValue:null,modelValue:null,type:String,value:null,valueComparator:{type:Function,default:Y_}},kn()),Ys()));function xse(t){const e=Ke(gF,void 0),{densityClasses:n}=Qs(t),r=yn(t,"modelValue"),i=I(()=>t.trueValue!==void 0?t.trueValue:t.value!==void 0?t.value:!0),s=I(()=>t.falseValue!==void 0?t.falseValue:!1),o=I(()=>(e==null?void 0:e.multiple.value)||!!t.multiple||t.multiple==null&&Array.isArray(r.value)),a=I({get(){const d=e?e.modelValue.value:r.value;return o.value?d.some(h=>t.valueComparator(h,i.value)):t.valueComparator(d,i.value)},set(d){if(t.readonly)return;const h=d?i.value:s.value;let f=h;o.value&&(f=d?[...Al(r.value),h]:Al(r.value).filter(p=>!t.valueComparator(p,i.value))),e?e.modelValue.value=f:r.value=f}}),{textColorClasses:l,textColorStyles:c}=Ps(I(()=>a.value&&!t.error&&!t.disabled?t.color:void 0)),u=I(()=>{var d,h;return a.value?(d=e==null?void 0:e.trueIcon.value)!=null?d:t.trueIcon:(h=e==null?void 0:e.falseIcon.value)!=null?h:t.falseIcon});return{group:e,densityClasses:n,trueValue:i,falseValue:s,model:a,textColorClasses:l,textColorStyles:c,icon:u}}const vF=Yn()({name:"VSelectionControl",directives:{Ripple:zp},inheritAttrs:!1,props:mF(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{densityClasses:i,group:s,icon:o,model:a,textColorClasses:l,textColorStyles:c,trueValue:u}=xse(t),d=Hr(),h=I(()=>t.id||`input-${d}`),f=X(!1),p=X(!1),g=X();function m(b){f.value=!0,(!zv||zv&&b.target.matches(":focus-visible"))&&(p.value=!0)}function v(){f.value=!1,p.value=!1}return Ft(()=>{var b,T,C,S;const A=r.label?r.label({label:t.label,props:{for:h.value}}):t.label,k=(b=s==null?void 0:s.type.value)!=null?b:t.type;return y("div",{class:["v-selection-control",{"v-selection-control--dirty":a.value,"v-selection-control--disabled":t.disabled,"v-selection-control--error":t.error,"v-selection-control--focused":f.value,"v-selection-control--focus-visible":p.value,"v-selection-control--inline":(s==null?void 0:s.inline.value)||t.inline},i.value]},[y("div",{class:["v-selection-control__wrapper",l.value],style:c.value},[(T=r.default)==null?void 0:T.call(r),Tr(y("div",{class:["v-selection-control__input"]},[o.value&&y(Kn,{icon:o.value},null),Tr(y("input",ct({"onUpdate:modelValue":P=>a.value=P,ref:g,disabled:t.disabled,id:h.value,onBlur:v,onFocus:m,"aria-readonly":t.readonly,type:k,value:u.value,name:(C=s==null?void 0:s.name.value)!=null?C:t.name,"aria-checked":k==="checkbox"?a.value:void 0},n),null),[[YA,a.value]]),(S=r.input)==null?void 0:S.call(r,{model:a,textColorClasses:l,props:{onFocus:m,onBlur:v,id:h.value}})]),[[ma("ripple"),t.ripple&&[!t.disabled&&!t.readonly,null,["center","circle"]]]])]),y(aF,{for:h.value},{default:()=>[A]})])}),{isFocused:f,input:g}}});function Pse(t){return va(t,Object.keys(vF.props))}const Ose=_e({name:"VProgressCircular",props:E(E(E({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4}},Wp()),nn({tag:"div"})),kn()),setup(t,e){let{slots:n}=e;const r=20,i=2*Math.PI*r,s=X(),{themeClasses:o}=Qn(t),{sizeClasses:a,sizeStyles:l}=Hp(t),{textColorClasses:c,textColorStyles:u}=Ps(Se(t,"color")),{textColorClasses:d,textColorStyles:h}=Ps(Se(t,"bgColor")),{intersectionRef:f,isIntersecting:p}=lF(),{resizeRef:g,contentRect:m}=VR(),v=I(()=>Math.max(0,Math.min(100,parseFloat(t.modelValue)))),b=I(()=>Number(t.width)),T=I(()=>l.value?Number(t.size):m.value?m.value.width:Math.max(b.value,32)),C=I(()=>r/(1-b.value/T.value)*2),S=I(()=>b.value/T.value*C.value),A=I(()=>me((100-v.value)/100*i));return zs(()=>{f.value=s.value,g.value=s.value}),()=>y(t.tag,{ref:s,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!t.indeterminate,"v-progress-circular--visible":p.value,"v-progress-circular--disable-shrink":t.indeterminate==="disable-shrink"},o.value,a.value,c.value],style:[l.value,u.value],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.indeterminate?void 0:v.value},{default:()=>[y("svg",{style:{transform:`rotate(calc(-90deg + ${Number(t.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${C.value} ${C.value}`},[y("circle",{class:["v-progress-circular__underlay",d.value],style:h.value,fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":S.value,"stroke-dasharray":i,"stroke-dashoffset":0},null),y("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":S.value,"stroke-dasharray":i,"stroke-dashoffset":A.value},null)]),n.default&&y("div",{class:"v-progress-circular__content"},[n.default({value:v.value})])]})}}),Dse=_e({name:"VSwitch",inheritAttrs:!1,props:E(E({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1}},pE()),mF()),emits:{"update:indeterminate":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const i=yn(t,"indeterminate"),{loaderClasses:s}=cF(t),o=I(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color);function a(){i.value&&(i.value=!1)}return Ft(()=>{const[l,c]=ZA(n),[u,d]=oF(t),[h,f]=Pse(t),p=X();function g(){var m,v;(m=p.value)==null||(v=m.input)==null||v.click()}return y(gE,ct({class:["v-switch",{"v-switch--inset":t.inset},{"v-switch--indeterminate":i.value},s.value]},l,u),Ee(E({},r),{default:m=>{let{isDisabled:v,isReadonly:b,isValid:T}=m;return y(vF,ct({ref:p},h,{type:"checkbox","onUpdate:modelValue":a,"aria-checked":i.value?"mixed":void 0,disabled:v.value,readonly:b.value},c),Ee(E({},r),{default:()=>y("div",{class:"v-switch__track",onClick:g},null),input:C=>{let{textColorClasses:S}=C;return y("div",{class:["v-switch__thumb",S.value]},[t.loading&&y(uF,{name:"v-switch",active:!0,color:T.value===!1?void 0:o.value},{default:A=>r.loader?r.loader(A):y(Ose,{active:A.isActive,color:A.color,indeterminate:!0,size:"16",width:"2"},null)})])}}))}}))}),{}}}),Mse={name:"ToolBar",components:{ProfileToolbar:Cse,LoginRegister:bse},data:()=>({userStatus:!1}),mounted(){et.auth().onAuthStateChanged(t=>{this.userStatus=!!t})},methods:{showBarMenu(){this.$store.state.show=!this.$store.state.show}},computed:{}},Lse={key:0,class:"d-flex align-center"};function Fse(t,e,n,r,i,s){const o=Fi("ProfileToolbar"),a=Fi("LoginRegister");return Ht(),br(Rse,{color:"white"},{default:Oe(()=>[y(Nse,{onClick:e[0]||(e[0]=l=>s.showBarMenu())}),y(fF,null,{default:Oe(()=>[wi(k_(t.$store.state.titleToolBar),1)]),_:1}),t.$store.state.titleToolBar=="Autocommit counter"?(Ht(),Sl("div",Lse,[y(Kn,{icon:"view_headline",color:t.$store.state.changeVeawStyle?"":"info"},null,8,["color"]),y(Dse,{"hide-details":"",class:"ml-2",modelValue:t.$store.state.changeVeawStyle,"onUpdate:modelValue":e[1]||(e[1]=l=>t.$store.state.changeVeawStyle=l)},null,8,["modelValue"]),y(Kn,{icon:"grid_view",color:t.$store.state.changeVeawStyle?"info":""},null,8,["color"])])):yV("",!0),t.userStatus?(Ht(),br(o,{key:1})):(Ht(),br(a,{key:2}))]),_:1})}var $se=ec(Mse,[["render",Fse]]);const Vse=_e({name:"VApp",props:E(E({},OB({fullHeight:!0})),kn()),setup(t,e){let{slots:n}=e;const r=Qn(t),{layoutClasses:i,layoutStyles:s,getLayoutItem:o,items:a,layoutRef:l}=LB(t),{rtlClasses:c}=gm();return Ft(()=>{var u;return y("div",{ref:l,class:["v-application",r.themeClasses.value,i.value,c.value],style:s.value,"data-app":"true"},[y("div",{class:"v-application__wrap"},[(u=n.default)==null?void 0:u.call(n)])])}),{getLayoutItem:o,items:a,theme:r}}});function Use(){const t=X(!1);return ga(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:I(()=>t.value?void 0:{transition:"none !important"})}}const Bse=_e({name:"VMain",props:nn({tag:"main"}),setup(t,e){let{slots:n}=e;const{mainStyles:r}=DB(),{ssrBootStyles:i}=Use();return()=>{var s;return y(t.tag,{class:"v-main",style:[r.value,i.value]},{default:()=>[y("div",{class:"v-main__wrap"},[(s=n.default)==null?void 0:s.call(n)])]})}}}),jse={name:"App",components:{ToolBar:$se,BarMenu:QB},data:()=>({}),methods:{}};function qse(t,e,n,r,i,s){const o=Fi("BarMenu"),a=Fi("ToolBar"),l=Fi("router-view");return Ht(),br(Vse,{class:"bg-grey-lighten-3"},{default:Oe(()=>[y(o),y(a),y(Bse,{class:"full-screen"},{default:Oe(()=>[y(Yre,{fluid:"",class:"fill-height pa-0"},{default:Oe(()=>[y(l)]),_:1})]),_:1})]),_:1})}var Wse=ec(jse,[["render",qse]]);const I_=Symbol.for("vuetify:locale-adapter"),zh=Symbol.for("vuetify:locale");function Coe(){const t=Ke(I_);if(!t)throw new Error("[Vuetify] Could not find injected locale adapter");return t.getScope()}function Hse(t){return!!t&&t.hasOwnProperty("getScope")&&t.hasOwnProperty("createScope")&&t.hasOwnProperty("createRoot")}function Kse(t,e){const n=Hse(e)?e:Yse(e),r=n.createRoot(t);return t==null||t.provide(fE,fie(r,e)),n}const Ok="$vuetify.",Dk=(t,e)=>t.replace(/\{(\d+)\}/g,(n,r)=>String(e[+r])),Gse=(t,e,n)=>function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(!r.startsWith(Ok))return Dk(r,s);const a=r.replace(Ok,""),l=t.value&&n.value[t.value],c=e.value&&n.value[e.value];let u=Hv(l,a,null);return u||(Do(`Translation key "${r}" not found in "${t.value}", trying fallback locale`),u=Hv(c,a,null)),u||(hT(`Translation key "${r}" not found in fallback`),u=r),typeof u!="string"&&(hT(`Translation key "${r}" has a non-string value`),u=r),Dk(u,s)};function zse(t,e){return(n,r)=>new Intl.NumberFormat([t.value,e.value],r).format(n)}function Yse(t){const e=n=>{const r=X(n.current),i=X(n.fallback),s=X(n.messages);return{current:r,fallback:i,messages:s,t:Gse(r,i,s),n:zse(r,i)}};return{createRoot:n=>{var r,i,s;const o=e({current:(r=t==null?void 0:t.defaultLocale)!=null?r:"en",fallback:(i=t==null?void 0:t.fallbackLocale)!=null?i:"en",messages:(s=t==null?void 0:t.messages)!=null?s:{en:die}});if(!n)throw new Error("[Vuetify] Could not find default app instance");return n.provide(zh,o),o},getScope:()=>{const n=Ke(zh);if(!n)throw new Error("[Vuetify] Could not find injected locale instance");return n},createScope:n=>{const r=Ke(zh);if(!r)throw new Error("[Vuetify] Could not find injected locale instance");const i=e({current:I(()=>{var s;return(s=n==null?void 0:n.locale)!=null?s:r.current.value}),fallback:I(()=>{var s;return(s=n==null?void 0:n.locale)!=null?s:r.fallback.value}),messages:I(()=>{var s;return(s=n==null?void 0:n.messages)!=null?s:r.messages.value})});return Kt(zh,i),i}}}const Qse=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{install:n=>{const{aliases:r={},components:i={},directives:s={}}=t;for(const a in s)n.directive(a,s[a]);for(const a in i)n.component(a,i[a]);for(const a in r)n.component(a,_e(Ee(E({},r[a]),{name:a})));n.provide(wf,OU(t.defaults)),n.provide(Zv,VB(t.display)),n.provide(If,tB(n,t.theme)),n.provide(Yv,HU(t.icons)),n.provide(I_,Kse(n,t.locale));function o(a){var l,c,u;const d=this.$,h=(l=(c=d.parent)==null?void 0:c.provides)!=null?l:(u=d.vnode.appContext)==null?void 0:u.provides;if(h&&a in h)return h[a]}n.mixin({computed:{$vuetify(){return bn({defaults:o.call(this,wf),display:o.call(this,Zv),theme:o.call(this,If),icons:o.call(this,Yv),locale:o.call(this,I_),rtl:o.call(this,fE)})}}})}}},Xse={collapse:"keyboard_arrow_up",complete:"check",cancel:"cancel",close:"close",delete:"cancel",clear:"cancel",success:"check_circle",info:"info",warning:"priority_high",error:"warning",prev:"chevron_left",next:"chevron_right",checkboxOn:"check_box",checkboxOff:"check_box_outline_blank",checkboxIndeterminate:"indeterminate_check_box",delimiter:"fiber_manual_record",sort:"arrow_upward",expand:"keyboard_arrow_down",menu:"menu",subgroup:"arrow_drop_down",dropdown:"arrow_drop_down",radioOn:"radio_button_checked",radioOff:"radio_button_unchecked",edit:"edit",ratingEmpty:"star_border",ratingFull:"star",ratingHalf:"star_half",loading:"cached",first:"first_page",last:"last_page",unfold:"unfold_more",file:"attach_file",plus:"add",minus:"remove"},Jse={component:t=>Rr(qU,Ee(E({},t),{class:"material-icons"}))};var Zse=Qse({icons:{defaultSet:"md",aliases:Xse,sets:{md:Jse}}});async function eoe(){(await il(()=>import("./webfontloader.cd097671.js").then(function(e){return e.w}),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var toe="store";function Tc(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function noe(t){return t!==null&&typeof t=="object"}function roe(t){return t&&typeof t.then=="function"}function ioe(t,e){return function(){return t(e)}}function yF(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function _F(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;vm(t,n,[],t._modules.root,!0),mE(t,n,e)}function mE(t,e,n){var r=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,s={};Tc(i,function(o,a){s[a]=ioe(o,t),Object.defineProperty(t.getters,a,{get:function(){return s[a]()},enumerable:!0})}),t._state=bn({data:e}),t.strict&&coe(t),r&&n&&t._withCommit(function(){r.data=null})}function vm(t,e,n,r,i){var s=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!s&&!i){var a=vE(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit(function(){a[l]=r.state})}var c=r.context=soe(t,o,n);r.forEachMutation(function(u,d){var h=o+d;ooe(t,h,u,c)}),r.forEachAction(function(u,d){var h=u.root?d:o+d,f=u.handler||u;aoe(t,h,f,c)}),r.forEachGetter(function(u,d){var h=o+d;loe(t,h,u,c)}),r.forEachChild(function(u,d){vm(t,e,n.concat(d),u,i)})}function soe(t,e,n){var r=e==="",i={dispatch:r?t.dispatch:function(s,o,a){var l=kp(s,o,a),c=l.payload,u=l.options,d=l.type;return(!u||!u.root)&&(d=e+d),t.dispatch(d,c)},commit:r?t.commit:function(s,o,a){var l=kp(s,o,a),c=l.payload,u=l.options,d=l.type;(!u||!u.root)&&(d=e+d),t.commit(d,c,u)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return wF(t,e)}},state:{get:function(){return vE(t.state,n)}}}),i}function wF(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(i){if(i.slice(0,r)===e){var s=i.slice(r);Object.defineProperty(n,s,{get:function(){return t.getters[i]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function ooe(t,e,n,r){var i=t._mutations[e]||(t._mutations[e]=[]);i.push(function(o){n.call(t,r.state,o)})}function aoe(t,e,n,r){var i=t._actions[e]||(t._actions[e]=[]);i.push(function(o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return roe(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):a})}function loe(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(s){return n(r.state,r.getters,s.state,s.getters)})}function coe(t){$e(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function vE(t,e){return e.reduce(function(n,r){return n[r]},t)}function kp(t,e,n){return noe(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var uoe="vuex bindings",Mk="vuex:mutations",kv="vuex:actions",Za="vuex",doe=0;function hoe(t,e){qne({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[uoe]},function(n){n.addTimelineLayer({id:Mk,label:"Vuex Mutations",color:Lk}),n.addTimelineLayer({id:kv,label:"Vuex Actions",color:Lk}),n.addInspector({id:Za,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===Za)if(r.filter){var i=[];TF(i,e._modules.root,r.filter,""),r.rootNodes=i}else r.rootNodes=[EF(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===Za){var i=r.nodeId;wF(e,i),r.state=goe(voe(e._modules,i),i==="root"?e.getters:e._makeLocalGettersCache,i)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===Za){var i=r.nodeId,s=r.path;i!=="root"&&(s=i.split("/").filter(Boolean).concat(s)),e._withCommit(function(){r.set(e._state.data,s,r.state.value)})}}),e.subscribe(function(r,i){var s={};r.payload&&(s.payload=r.payload),s.state=i,n.notifyComponentUpdate(),n.sendInspectorTree(Za),n.sendInspectorState(Za),n.addTimelineEvent({layerId:Mk,event:{time:Date.now(),title:r.type,data:s}})}),e.subscribeAction({before:function(r,i){var s={};r.payload&&(s.payload=r.payload),r._id=doe++,r._time=Date.now(),s.state=i,n.addTimelineEvent({layerId:kv,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:s}})},after:function(r,i){var s={},o=Date.now()-r._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(s.payload=r.payload),s.state=i,n.addTimelineEvent({layerId:kv,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:s}})}})})}var Lk=8702998,foe=6710886,poe=16777215,bF={label:"namespaced",textColor:poe,backgroundColor:foe};function IF(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function EF(t,e){return{id:e||"root",label:IF(e),tags:t.namespaced?[bF]:[],children:Object.keys(t._children).map(function(n){return EF(t._children[n],e+n+"/")})}}function TF(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[bF]:[]}),Object.keys(e._children).forEach(function(i){TF(t,e._children[i],n,r+i+"/")})}function goe(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),i={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var s=moe(e);i.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?IF(o):o,editable:!1,value:E_(function(){return s[o]})}})}return i}function moe(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var i=e,s=r.pop();r.forEach(function(o){i[o]||(i[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),i=i[o]._custom.value}),i[s]=E_(function(){return t[n]})}else e[n]=E_(function(){return t[n]})}),e}function voe(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,i,s){var o=r[i];if(!o)throw new Error('Missing module "'+i+'" for path "'+e+'".');return s===n.length-1?o:o._children},e==="root"?t:t.root._children)}function E_(t){try{return t()}catch(e){return e}}var zr=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},SF={namespaced:{configurable:!0}};SF.namespaced.get=function(){return!!this._rawModule.namespaced};zr.prototype.addChild=function(e,n){this._children[e]=n};zr.prototype.removeChild=function(e){delete this._children[e]};zr.prototype.getChild=function(e){return this._children[e]};zr.prototype.hasChild=function(e){return e in this._children};zr.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};zr.prototype.forEachChild=function(e){Tc(this._children,e)};zr.prototype.forEachGetter=function(e){this._rawModule.getters&&Tc(this._rawModule.getters,e)};zr.prototype.forEachAction=function(e){this._rawModule.actions&&Tc(this._rawModule.actions,e)};zr.prototype.forEachMutation=function(e){this._rawModule.mutations&&Tc(this._rawModule.mutations,e)};Object.defineProperties(zr.prototype,SF);var $a=function(e){this.register([],e,!1)};$a.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};$a.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,i){return n=n.getChild(i),r+(n.namespaced?i+"/":"")},"")};$a.prototype.update=function(e){CF([],this.root,e)};$a.prototype.register=function(e,n,r){var i=this;r===void 0&&(r=!0);var s=new zr(n,r);if(e.length===0)this.root=s;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],s)}n.modules&&Tc(n.modules,function(a,l){i.register(e.concat(l),a,r)})};$a.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],i=n.getChild(r);!i||!i.runtime||n.removeChild(r)};$a.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function CF(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;CF(t.concat(r),e.getChild(r),n.modules[r])}}function yoe(t){return new Jn(t)}var Jn=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var i=e.strict;i===void 0&&(i=!1);var s=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new $a(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=s;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(h,f){return l.call(o,h,f)},this.commit=function(h,f,p){return c.call(o,h,f,p)},this.strict=i;var u=this._modules.root.state;vm(this,u,[],this._modules.root),mE(this,u),r.forEach(function(d){return d(n)})},yE={state:{configurable:!0}};Jn.prototype.install=function(e,n){e.provide(n||toe,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&hoe(e,this)};yE.state.get=function(){return this._state.data};yE.state.set=function(t){};Jn.prototype.commit=function(e,n,r){var i=this,s=kp(e,n,r),o=s.type,a=s.payload,l={type:o,payload:a},c=this._mutations[o];!c||(this._withCommit(function(){c.forEach(function(d){d(a)})}),this._subscribers.slice().forEach(function(u){return u(l,i.state)}))};Jn.prototype.dispatch=function(e,n){var r=this,i=kp(e,n),s=i.type,o=i.payload,a={type:s,payload:o},l=this._actions[s];if(!!l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,r.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(o)})):l[0](o);return new Promise(function(u,d){c.then(function(h){try{r._actionSubscribers.filter(function(f){return f.after}).forEach(function(f){return f.after(a,r.state)})}catch{}u(h)},function(h){try{r._actionSubscribers.filter(function(f){return f.error}).forEach(function(f){return f.error(a,r.state,h)})}catch{}d(h)})})}};Jn.prototype.subscribe=function(e,n){return yF(e,this._subscribers,n)};Jn.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return yF(r,this._actionSubscribers,n)};Jn.prototype.watch=function(e,n,r){var i=this;return $e(function(){return e(i.state,i.getters)},n,Object.assign({},r))};Jn.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Jn.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),vm(this,this.state,e,this._modules.get(e),r.preserveState),mE(this,this.state)};Jn.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=vE(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),_F(this)};Jn.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Jn.prototype.hotUpdate=function(e){this._modules.update(e),_F(this,!0)};Jn.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Jn.prototype,yE);var kF=yoe({state(){return{show:!1,menu:[{icon:"paid",title:"Salary",value:"salary",link:"/salary",src:"https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"},{icon:"schedule",title:"Times GAP",value:"timesGAP",link:"/Gap&Unloading",src:"https://images.unsplash.com/photo-1508962914676-134849a727f0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"},{icon:"hdr_auto",title:"Autocommit couter",value:"counter",link:"/autocommitCounter",src:"https://images.unsplash.com/photo-1508061538535-6effdf9eb6f5?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1469&q=80"}],titleToolBar:"Home",changeVeawStyle:!1,userPhoto:""}},mutations:{},modules:{}});eoe();et.initializeApp({apiKey:"AIzaSyCy37-VIORLTw-TYc-SkWgLitI9v95Qods",authDomain:"monitorbox-88b5b.firebaseapp.com",projectId:"monitorbox-88b5b",storageBucket:"monitorbox-88b5b.appspot.com",messagingSenderId:"180778580190",appId:"1:180778580190:web:757af0ea99b6ca44142a4f",measurementId:"G-YEENE3QMDG",databaseURL:"https://monitorbox-88b5b-default-rtdb.europe-west1.firebasedatabase.app"});let Fk;et.auth().onAuthStateChanged(()=>{Fk||(Fk=uU(Wse).use(Zse).use(Td).use(kF).mount("#app"))});Td.beforeEach((t,e,n)=>{t.name&&(document.title=t.name,kF.state.titleToolBar=t.name),n()});export{Eoe as $,sw as A,Wp as B,ba as C,rw as D,Ea as E,aie as F,Zi as G,Hp as H,It as I,Qs as J,iw as K,Tr as L,ma as M,nw as N,iB as O,Kn as P,kd as Q,zp as R,Pu as S,De as T,NB as U,vF as V,Yn as W,nc as X,hR as Y,Coe as Z,X as _,mF as a,at as a0,Ise as a1,$R as a2,Mu as a3,nu as a4,wi as a5,Gh as a6,mm as a7,Al as a8,iF as a9,To as aA,Ar as aB,ga as aC,ese as aD,Gp as aE,q_ as aF,Kr as aG,ya as aH,zL as aI,QL as aJ,Wi as aK,_a as aL,YL as aM,XL as aN,Toe as aO,Soe as aP,aO as aQ,Py as aR,K3 as aS,HL as aT,pR as aU,woe as aV,boe as aW,rF as aa,Hr as ab,ec as ac,Fi as ad,Ht as ae,Sl as af,ri as ag,Pk as ah,Oe as ai,jL as aj,br as ak,yV as al,ML as am,fR as an,cl as ao,k_ as ap,aT as aq,Sie as ar,me as as,Ioe as at,gm as au,$e as av,Kt as aw,Uie as ax,Ke as ay,Bie as az,Ft as b,I as c,_e as d,oF as e,ZA as f,Pse as g,y as h,ct as i,gE as j,Y_ as k,sie as l,pE as m,nn as n,kn as o,Ad as p,Qn as q,lie as r,tc as s,Se as t,yn as u,wa as v,Ys as w,Ia as x,oie as y,Ji as z};
